var fv=Object.defineProperty;var gv=(t,e,n)=>e in t?fv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rd=(t,e,n)=>gv(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Fu(t,e){const n=new Set(t.split(","));return i=>n.has(i)}const ht={},or=[],Sn=()=>{},pv=()=>!1,yl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nu=t=>t.startsWith("onUpdate:"),jt=Object.assign,$u=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_v=Object.prototype.hasOwnProperty,Ve=(t,e)=>_v.call(t,e),Ae=Array.isArray,ar=t=>$o(t)==="[object Map]",Mg=t=>$o(t)==="[object Set]",od=t=>$o(t)==="[object Date]",$e=t=>typeof t=="function",Tt=t=>typeof t=="string",ri=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",Dg=t=>(ct(t)||$e(t))&&$e(t.then)&&$e(t.catch),Fg=Object.prototype.toString,$o=t=>Fg.call(t),mv=t=>$o(t).slice(8,-1),Ng=t=>$o(t)==="[object Object]",Gu=t=>Tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,no=Fu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bl=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},vv=/-(\w)/g,Wn=bl(t=>t.replace(vv,(e,n)=>n?n.toUpperCase():"")),yv=/\B([A-Z])/g,Ls=bl(t=>t.replace(yv,"-$1").toLowerCase()),El=bl(t=>t.charAt(0).toUpperCase()+t.slice(1)),rc=bl(t=>t?`on${El(t)}`:""),ts=(t,e)=>!Object.is(t,e),Ia=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$g=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},qc=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let ad;const Gg=()=>ad||(ad=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Et(t){if(Ae(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=Tt(i)?xv(i):Et(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(Tt(t)||ct(t))return t}const bv=/;(?![^(]*\))/g,Ev=/:([^]+)/,wv=/\/\*[^]*?\*\//g;function xv(t){const e={};return t.replace(wv,"").split(bv).forEach(n=>{if(n){const i=n.split(Ev);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function nt(t){let e="";if(Tt(t))e=t;else if(Ae(t))for(let n=0;n<t.length;n++){const i=nt(t[n]);i&&(e+=i+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Cv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sv=Fu(Cv);function zg(t){return!!t||t===""}function Rv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=Ka(t[i],e[i]);return n}function Ka(t,e){if(t===e)return!0;let n=od(t),i=od(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=ri(t),i=ri(e),n||i)return t===e;if(n=Ae(t),i=Ae(e),n||i)return n&&i?Rv(t,e):!1;if(n=ct(t),i=ct(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ka(t[o],e[o]))return!1}}return String(t)===String(e)}const Wg=t=>!!(t&&t.__v_isRef===!0),X=t=>Tt(t)?t:t==null?"":Ae(t)||ct(t)&&(t.toString===Fg||!$e(t.toString))?Wg(t)?X(t.value):JSON.stringify(t,Bg,2):String(t),Bg=(t,e)=>Wg(e)?Bg(t,e.value):ar(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[oc(i,r)+" =>"]=s,n),{})}:Mg(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>oc(n))}:ri(e)?oc(e):ct(e)&&!Ae(e)&&!Ng(e)?String(e):e,oc=(t,e="")=>{var n;return ri(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mn;class Tv{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Mn,!e&&Mn&&(this.index=(Mn.scopes||(Mn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Mn;try{return Mn=this,e()}finally{Mn=n}}}on(){Mn=this}off(){Mn=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Iv(t,e=Mn){e&&e.active&&e.effects.push(t)}function Av(){return Mn}let Ss;class zu{constructor(e,n,i,s){this.fn=e,this.trigger=n,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Iv(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,rs();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Pv(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),os()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Ji,n=Ss;try{return Ji=!0,Ss=this,this._runnings++,ld(this),this.fn()}finally{cd(this),this._runnings--,Ss=n,Ji=e}}stop(){this.active&&(ld(this),cd(this),this.onStop&&this.onStop(),this.active=!1)}}function Pv(t){return t.value}function ld(t){t._trackId++,t._depsLength=0}function cd(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Ug(t.deps[e],t);t.deps.length=t._depsLength}}function Ug(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Ji=!0,Zc=0;const Kg=[];function rs(){Kg.push(Ji),Ji=!1}function os(){const t=Kg.pop();Ji=t===void 0?!0:t}function Wu(){Zc++}function Bu(){for(Zc--;!Zc&&Jc.length;)Jc.shift()()}function jg(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&Ug(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Jc=[];function Yg(t,e,n){Wu();for(const i of t.keys()){let s;i._dirtyLevel<e&&(s??(s=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(s??(s=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&Jc.push(i.scheduler)))}Bu()}const Xg=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},ja=new WeakMap,Rs=Symbol(""),Qc=Symbol("");function cn(t,e,n){if(Ji&&Ss){let i=ja.get(t);i||ja.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=Xg(()=>i.delete(n))),jg(Ss,s)}}function yi(t,e,n,i,s,r){const o=ja.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ae(t)){const l=Number(i);o.forEach((u,c)=>{(c==="length"||!ri(c)&&c>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ae(t)?Gu(n)&&a.push(o.get("length")):(a.push(o.get(Rs)),ar(t)&&a.push(o.get(Qc)));break;case"delete":Ae(t)||(a.push(o.get(Rs)),ar(t)&&a.push(o.get(Qc)));break;case"set":ar(t)&&a.push(o.get(Rs));break}Wu();for(const l of a)l&&Yg(l,4);Bu()}function Ov(t,e){const n=ja.get(t);return n&&n.get(e)}const kv=Fu("__proto__,__v_isRef,__isVue"),Vg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ri)),ud=Lv();function Lv(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=tt(this);for(let r=0,o=this.length;r<o;r++)cn(i,"get",r+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(tt)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){rs(),Wu();const i=tt(this)[e].apply(this,n);return Bu(),os(),i}}),t}function Mv(t){ri(t)||(t=String(t));const e=tt(this);return cn(e,"has",t),e.hasOwnProperty(t)}class Hg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?Xv:Qg:r?Jg:Zg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Ae(e);if(!s){if(o&&Ve(ud,n))return Reflect.get(ud,n,i);if(n==="hasOwnProperty")return Mv}const a=Reflect.get(e,n,i);return(ri(n)?Vg.has(n):kv(n))||(s||cn(e,"get",n),r)?a:Rt(a)?o&&Gu(n)?a:a.value:ct(a)?s?tp(a):Go(a):a}}class qg extends Hg{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const l=Is(r);if(!pr(i)&&!Is(i)&&(r=tt(r),i=tt(i)),!Ae(e)&&Rt(r)&&!Rt(i))return l?!1:(r.value=i,!0)}const o=Ae(e)&&Gu(n)?Number(n)<e.length:Ve(e,n),a=Reflect.set(e,n,i,s);return e===tt(s)&&(o?ts(i,r)&&yi(e,"set",n,i):yi(e,"add",n,i)),a}deleteProperty(e,n){const i=Ve(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&yi(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!ri(n)||!Vg.has(n))&&cn(e,"has",n),i}ownKeys(e){return cn(e,"iterate",Ae(e)?"length":Rs),Reflect.ownKeys(e)}}class Dv extends Hg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Fv=new qg,Nv=new Dv,$v=new qg(!0);const Uu=t=>t,wl=t=>Reflect.getPrototypeOf(t);function ia(t,e,n=!1,i=!1){t=t.__v_raw;const s=tt(t),r=tt(e);n||(ts(e,r)&&cn(s,"get",e),cn(s,"get",r));const{has:o}=wl(s),a=i?Uu:n?Yu:_o;if(o.call(s,e))return a(t.get(e));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(e)}function sa(t,e=!1){const n=this.__v_raw,i=tt(n),s=tt(t);return e||(ts(t,s)&&cn(i,"has",t),cn(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function ra(t,e=!1){return t=t.__v_raw,!e&&cn(tt(t),"iterate",Rs),Reflect.get(t,"size",t)}function hd(t,e=!1){!e&&!pr(t)&&!Is(t)&&(t=tt(t));const n=tt(this);return wl(n).has.call(n,t)||(n.add(t),yi(n,"add",t,t)),this}function dd(t,e,n=!1){!n&&!pr(e)&&!Is(e)&&(e=tt(e));const i=tt(this),{has:s,get:r}=wl(i);let o=s.call(i,t);o||(t=tt(t),o=s.call(i,t));const a=r.call(i,t);return i.set(t,e),o?ts(e,a)&&yi(i,"set",t,e):yi(i,"add",t,e),this}function fd(t){const e=tt(this),{has:n,get:i}=wl(e);let s=n.call(e,t);s||(t=tt(t),s=n.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return s&&yi(e,"delete",t,void 0),r}function gd(){const t=tt(this),e=t.size!==0,n=t.clear();return e&&yi(t,"clear",void 0,void 0),n}function oa(t,e){return function(i,s){const r=this,o=r.__v_raw,a=tt(o),l=e?Uu:t?Yu:_o;return!t&&cn(a,"iterate",Rs),o.forEach((u,c)=>i.call(s,l(u),l(c),r))}}function aa(t,e,n){return function(...i){const s=this.__v_raw,r=tt(s),o=ar(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...i),c=n?Uu:e?Yu:_o;return!e&&cn(r,"iterate",l?Qc:Rs),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function Li(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Gv(){const t={get(r){return ia(this,r)},get size(){return ra(this)},has:sa,add:hd,set:dd,delete:fd,clear:gd,forEach:oa(!1,!1)},e={get(r){return ia(this,r,!1,!0)},get size(){return ra(this)},has:sa,add(r){return hd.call(this,r,!0)},set(r,o){return dd.call(this,r,o,!0)},delete:fd,clear:gd,forEach:oa(!1,!0)},n={get(r){return ia(this,r,!0)},get size(){return ra(this,!0)},has(r){return sa.call(this,r,!0)},add:Li("add"),set:Li("set"),delete:Li("delete"),clear:Li("clear"),forEach:oa(!0,!1)},i={get(r){return ia(this,r,!0,!0)},get size(){return ra(this,!0)},has(r){return sa.call(this,r,!0)},add:Li("add"),set:Li("set"),delete:Li("delete"),clear:Li("clear"),forEach:oa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=aa(r,!1,!1),n[r]=aa(r,!0,!1),e[r]=aa(r,!1,!0),i[r]=aa(r,!0,!0)}),[t,n,e,i]}const[zv,Wv,Bv,Uv]=Gv();function Ku(t,e){const n=e?t?Uv:Bv:t?Wv:zv;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(Ve(n,s)&&s in i?n:i,s,r)}const Kv={get:Ku(!1,!1)},jv={get:Ku(!1,!0)},Yv={get:Ku(!0,!1)};const Zg=new WeakMap,Jg=new WeakMap,Qg=new WeakMap,Xv=new WeakMap;function Vv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hv(t){return t.__v_skip||!Object.isExtensible(t)?0:Vv(mv(t))}function Go(t){return Is(t)?t:ju(t,!1,Fv,Kv,Zg)}function ep(t){return ju(t,!1,$v,jv,Jg)}function tp(t){return ju(t,!0,Nv,Yv,Qg)}function ju(t,e,n,i,s){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=Hv(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return s.set(t,a),a}function io(t){return Is(t)?io(t.__v_raw):!!(t&&t.__v_isReactive)}function Is(t){return!!(t&&t.__v_isReadonly)}function pr(t){return!!(t&&t.__v_isShallow)}function np(t){return t?!!t.__v_raw:!1}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function qv(t){return Object.isExtensible(t)&&$g(t,"__v_skip",!0),t}const _o=t=>ct(t)?Go(t):t,Yu=t=>ct(t)?tp(t):t;class ip{constructor(e,n,i,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new zu(()=>e(this._value),()=>Aa(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=tt(this);return(!e._cacheable||e.effect.dirty)&&ts(e._value,e._value=e.effect.run())&&Aa(e,4),sp(e),e.effect._dirtyLevel>=2&&Aa(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function Zv(t,e,n=!1){let i,s;const r=$e(t);return r?(i=t,s=Sn):(i=t.get,s=t.set),new ip(i,s,r||!s,n)}function sp(t){var e;Ji&&Ss&&(t=tt(t),jg(Ss,(e=t.dep)!=null?e:t.dep=Xg(()=>t.dep=void 0,t instanceof ip?t:void 0)))}function Aa(t,e=4,n,i){t=tt(t);const s=t.dep;s&&Yg(s,e)}function Rt(t){return!!(t&&t.__v_isRef===!0)}function T(t){return rp(t,!1)}function Jv(t){return rp(t,!0)}function rp(t,e){return Rt(t)?t:new Qv(t,e)}class Qv{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:tt(e),this._value=n?e:_o(e)}get value(){return sp(this),this._value}set value(e){const n=this.__v_isShallow||pr(e)||Is(e);e=n?e:tt(e),ts(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=n?e:_o(e),Aa(this,4))}}function L(t){return Rt(t)?t.value:t}const ey={get:(t,e,n)=>L(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Rt(s)&&!Rt(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function op(t){return io(t)?t:new Proxy(t,ey)}function ty(t){const e=Ae(t)?new Array(t.length):{};for(const n in t)e[n]=iy(t,n);return e}class ny{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ov(tt(this._object),this._key)}}function iy(t,e,n){const i=t[e];return Rt(i)?i:new ny(t,e,n)}/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qi(t,e,n,i){try{return i?t(...i):t()}catch(s){xl(s,e,n)}}function Gn(t,e,n,i){if($e(t)){const s=Qi(t,e,n,i);return s&&Dg(s)&&s.catch(r=>{xl(r,e,n)}),s}if(Ae(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Gn(t[r],e,n,i));return s}}function xl(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const u=r.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){rs(),Qi(l,null,10,[t,o,a]),os();return}}sy(t,n,s,i)}function sy(t,e,n,i=!0){console.error(t)}let mo=!1,eu=!1;const Bt=[];let qn=0;const lr=[];let Bi=null,ms=0;const ap=Promise.resolve();let Xu=null;function Cl(t){const e=Xu||ap;return t?e.then(this?t.bind(this):t):e}function ry(t){let e=qn+1,n=Bt.length;for(;e<n;){const i=e+n>>>1,s=Bt[i],r=vo(s);r<t||r===t&&s.pre?e=i+1:n=i}return e}function Vu(t){(!Bt.length||!Bt.includes(t,mo&&t.allowRecurse?qn+1:qn))&&(t.id==null?Bt.push(t):Bt.splice(ry(t.id),0,t),lp())}function lp(){!mo&&!eu&&(eu=!0,Xu=ap.then(up))}function oy(t){const e=Bt.indexOf(t);e>qn&&Bt.splice(e,1)}function ay(t){Ae(t)?lr.push(...t):(!Bi||!Bi.includes(t,t.allowRecurse?ms+1:ms))&&lr.push(t),lp()}function pd(t,e,n=mo?qn+1:0){for(;n<Bt.length;n++){const i=Bt[n];if(i&&i.pre){if(t&&i.id!==t.uid)continue;Bt.splice(n,1),n--,i()}}}function cp(t){if(lr.length){const e=[...new Set(lr)].sort((n,i)=>vo(n)-vo(i));if(lr.length=0,Bi){Bi.push(...e);return}for(Bi=e,ms=0;ms<Bi.length;ms++){const n=Bi[ms];n.active!==!1&&n()}Bi=null,ms=0}}const vo=t=>t.id==null?1/0:t.id,ly=(t,e)=>{const n=vo(t)-vo(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function up(t){eu=!1,mo=!0,Bt.sort(ly);try{for(qn=0;qn<Bt.length;qn++){const e=Bt[qn];e&&e.active!==!1&&Qi(e,e.i,e.i?15:14)}}finally{qn=0,Bt.length=0,cp(),mo=!1,Xu=null,(Bt.length||lr.length)&&up()}}let rn=null,Sl=null;function Ya(t){const e=rn;return rn=t,Sl=t&&t.type.__scopeId||null,e}function At(t){Sl=t}function Pt(){Sl=null}function at(t,e=rn,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&Cd(-1);const r=Ya(e);let o;try{o=t(...s)}finally{Ya(r),i._d&&Cd(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Ze(t,e){if(rn===null)return t;const n=Pl(rn),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=ht]=e[s];r&&($e(r)&&(r={mounted:r,updated:r}),r.deep&&Xi(o),i.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function cs(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(rs(),Gn(l,n,8,[t.el,a,t,e]),os())}}function hp(t,e){t.shapeFlag&6&&t.component?hp(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Le(t,e){return $e(t)?jt({name:t.name},e,{setup:t}):t}const Pa=t=>!!t.type.__asyncLoader,dp=t=>t.type.__isKeepAlive;function cy(t,e){fp(t,"a",e)}function uy(t,e){fp(t,"da",e)}function fp(t,e,n=Mt){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Rl(e,i,n),n){let s=n.parent;for(;s&&s.parent;)dp(s.parent.vnode)&&hy(i,e,n,s),s=s.parent}}function hy(t,e,n,i){const s=Rl(e,t,i,!0);qu(()=>{$u(i[e],s)},n)}function Rl(t,e,n=Mt,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{rs();const a=Wo(n),l=Gn(e,n,t,o);return a(),os(),l});return i?s.unshift(r):s.push(r),r}}const Ii=t=>(e,n=Mt)=>{(!Al||t==="sp")&&Rl(t,(...i)=>e(...i),n)},dy=Ii("bm"),Hu=Ii("m"),fy=Ii("bu"),gy=Ii("u"),gp=Ii("bum"),qu=Ii("um"),py=Ii("sp"),_y=Ii("rtg"),my=Ii("rtc");function vy(t,e=Mt){Rl("ec",t,e)}const yy="components";function Tn(t,e){return Ey(yy,t,!0,e)||t}const by=Symbol.for("v-ndc");function Ey(t,e,n=!0,i=!1){const s=rn||Mt;if(s){const r=s.type;{const a=u0(r,!1);if(a&&(a===e||a===Wn(e)||a===El(Wn(e))))return r}const o=_d(s[t]||r[t],e)||_d(s.appContext[t],e);return!o&&i?r:o}}function _d(t,e){return t&&(t[e]||t[Wn(e)]||t[El(Wn(e))])}function Ye(t,e,n,i){let s;const r=n;if(Ae(t)||Tt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,r)}else if(ct(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,r));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];s[a]=e(t[u],u,a,r)}}else s=[];return s}const tu=t=>t?Lp(t)?Pl(t):tu(t.parent):null,so=jt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tu(t.parent),$root:t=>tu(t.root),$emit:t=>t.emit,$options:t=>Zu(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Vu(t.update)}),$nextTick:t=>t.n||(t.n=Cl.bind(t.proxy)),$watch:t=>Ky.bind(t)}),ac=(t,e)=>t!==ht&&!t.__isScriptSetup&&Ve(t,e),wy={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(ac(i,e))return o[e]=1,i[e];if(s!==ht&&Ve(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Ve(u,e))return o[e]=3,r[e];if(n!==ht&&Ve(n,e))return o[e]=4,n[e];nu&&(o[e]=0)}}const c=so[e];let h,d;if(c)return e==="$attrs"&&cn(t.attrs,"get",""),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==ht&&Ve(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Ve(d,e))return d[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return ac(s,e)?(s[e]=n,!0):i!==ht&&Ve(i,e)?(i[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||t!==ht&&Ve(t,o)||ac(e,o)||(a=r[0])&&Ve(a,o)||Ve(i,o)||Ve(so,o)||Ve(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function md(t){return Ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let nu=!0;function xy(t){const e=Zu(t),n=t.proxy,i=t.ctx;nu=!1,e.beforeCreate&&vd(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:w,beforeUnmount:v,destroyed:y,unmounted:E,render:b,renderTracked:I,renderTriggered:A,errorCaptured:O,serverPrefetch:D,expose:re,inheritAttrs:ee,components:Q,directives:ae,filters:Y}=e;if(u&&Cy(u,i,null),o)for(const J in o){const le=o[J];$e(le)&&(i[J]=le.bind(n))}if(s){const J=s.call(n,n);ct(J)&&(t.data=Go(J))}if(nu=!0,r)for(const J in r){const le=r[J],ye=$e(le)?le.bind(n,n):$e(le.get)?le.get.bind(n,n):Sn,oe=!$e(le)&&$e(le.set)?le.set.bind(n):Sn,ue=pn({get:ye,set:oe});Object.defineProperty(i,J,{enumerable:!0,configurable:!0,get:()=>ue.value,set:we=>ue.value=we})}if(a)for(const J in a)pp(a[J],i,n,J);if(l){const J=$e(l)?l.call(n):l;Reflect.ownKeys(J).forEach(le=>{Oa(le,J[le])})}c&&vd(c,t,"c");function F(J,le){Ae(le)?le.forEach(ye=>J(ye.bind(n))):le&&J(le.bind(n))}if(F(dy,h),F(Hu,d),F(fy,f),F(gy,g),F(cy,p),F(uy,m),F(vy,O),F(my,I),F(_y,A),F(gp,v),F(qu,E),F(py,D),Ae(re))if(re.length){const J=t.exposed||(t.exposed={});re.forEach(le=>{Object.defineProperty(J,le,{get:()=>n[le],set:ye=>n[le]=ye})})}else t.exposed||(t.exposed={});b&&t.render===Sn&&(t.render=b),ee!=null&&(t.inheritAttrs=ee),Q&&(t.components=Q),ae&&(t.directives=ae)}function Cy(t,e,n=Sn){Ae(t)&&(t=iu(t));for(const i in t){const s=t[i];let r;ct(s)?"default"in s?r=ni(s.from||i,s.default,!0):r=ni(s.from||i):r=ni(s),Rt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function vd(t,e,n){Gn(Ae(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function pp(t,e,n,i){const s=i.includes(".")?Ap(n,i):()=>n[i];if(Tt(t)){const r=e[t];$e(r)&&ii(s,r)}else if($e(t))ii(s,t.bind(n));else if(ct(t))if(Ae(t))t.forEach(r=>pp(r,e,n,i));else{const r=$e(t.handler)?t.handler.bind(n):e[t.handler];$e(r)&&ii(s,r,t)}}function Zu(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!n&&!i?l=e:(l={},s.length&&s.forEach(u=>Xa(l,u,o,!0)),Xa(l,e,o)),ct(e)&&r.set(e,l),l}function Xa(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Xa(t,r,n,!0),s&&s.forEach(o=>Xa(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=Sy[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Sy={data:yd,props:bd,emits:bd,methods:jr,computed:jr,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:jr,directives:jr,watch:Ty,provide:yd,inject:Ry};function yd(t,e){return e?t?function(){return jt($e(t)?t.call(this,this):t,$e(e)?e.call(this,this):e)}:e:t}function Ry(t,e){return jr(iu(t),iu(e))}function iu(t){if(Ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function jr(t,e){return t?jt(Object.create(null),t,e):e}function bd(t,e){return t?Ae(t)&&Ae(e)?[...new Set([...t,...e])]:jt(Object.create(null),md(t),md(e??{})):e}function Ty(t,e){if(!t)return e;if(!e)return t;const n=jt(Object.create(null),t);for(const i in e)n[i]=Xt(t[i],e[i]);return n}function _p(){return{app:null,config:{isNativeTag:pv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Iy=0;function Ay(t,e){return function(i,s=null){$e(i)||(i=jt({},i)),s!=null&&!ct(s)&&(s=null);const r=_p(),o=new WeakSet;let a=!1;const l=r.app={_uid:Iy++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:d0,get config(){return r.config},set config(u){},use(u,...c){return o.has(u)||(u&&$e(u.install)?(o.add(u),u.install(l,...c)):$e(u)&&(o.add(u),u(l,...c))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,c){return c?(r.components[u]=c,l):r.components[u]},directive(u,c){return c?(r.directives[u]=c,l):r.directives[u]},mount(u,c,h){if(!a){const d=N(i,s);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),c&&e?e(d,u):t(d,u,h),a=!0,l._container=u,u.__vue_app__=l,Pl(d.component)}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return r.provides[u]=c,l},runWithContext(u){const c=cr;cr=l;try{return u()}finally{cr=c}}};return l}}let cr=null;function Oa(t,e){if(Mt){let n=Mt.provides;const i=Mt.parent&&Mt.parent.provides;i===n&&(n=Mt.provides=Object.create(i)),n[t]=e}}function ni(t,e,n=!1){const i=Mt||rn;if(i||cr){const s=cr?cr._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&$e(e)?e.call(i&&i.proxy):e}}const mp={},vp=()=>Object.create(mp),yp=t=>Object.getPrototypeOf(t)===mp;function Py(t,e,n,i=!1){const s={},r=vp();t.propsDefaults=Object.create(null),bp(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:ep(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function Oy(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=tt(s),[l]=t.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(Tl(t.emitsOptions,d))continue;const f=e[d];if(l)if(Ve(r,d))f!==r[d]&&(r[d]=f,u=!0);else{const g=Wn(d);s[g]=su(l,a,g,f,t,!1)}else f!==r[d]&&(r[d]=f,u=!0)}}}else{bp(t,e,s,r)&&(u=!0);let c;for(const h in a)(!e||!Ve(e,h)&&((c=Ls(h))===h||!Ve(e,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(s[h]=su(l,a,h,void 0,t,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!Ve(e,h))&&(delete r[h],u=!0)}u&&yi(t.attrs,"set","")}function bp(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(no(l))continue;const u=e[l];let c;s&&Ve(s,c=Wn(l))?!r||!r.includes(c)?n[c]=u:(a||(a={}))[c]=u:Tl(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(r){const l=tt(n),u=a||ht;for(let c=0;c<r.length;c++){const h=r[c];n[h]=su(s,l,h,u[h],t,!Ve(u,h))}}return o}function su(t,e,n,i,s,r){const o=t[n];if(o!=null){const a=Ve(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&$e(l)){const{propsDefaults:u}=s;if(n in u)i=u[n];else{const c=Wo(s);i=u[n]=l.call(null,e),c()}}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Ls(n))&&(i=!0))}return i}const ky=new WeakMap;function Ep(t,e,n=!1){const i=n?ky:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!$e(t)){const c=h=>{l=!0;const[d,f]=Ep(h,e,!0);jt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return ct(t)&&i.set(t,or),or;if(Ae(r))for(let c=0;c<r.length;c++){const h=Wn(r[c]);Ed(h)&&(o[h]=ht)}else if(r)for(const c in r){const h=Wn(c);if(Ed(h)){const d=r[c],f=o[h]=Ae(d)||$e(d)?{type:d}:jt({},d),g=f.type;let p=!1,m=!0;if(Ae(g))for(let w=0;w<g.length;++w){const v=g[w],y=$e(v)&&v.name;if(y==="Boolean"){p=!0;break}else y==="String"&&(m=!1)}else p=$e(g)&&g.name==="Boolean";f[0]=p,f[1]=m,(p||Ve(f,"default"))&&a.push(h)}}const u=[o,a];return ct(t)&&i.set(t,u),u}function Ed(t){return t[0]!=="$"&&!no(t)}const wp=t=>t[0]==="_"||t==="$stable",Ju=t=>Ae(t)?t.map(Hn):[Hn(t)],Ly=(t,e,n)=>{if(e._n)return e;const i=at((...s)=>Ju(e(...s)),n);return i._c=!1,i},xp=(t,e,n)=>{const i=t._ctx;for(const s in t){if(wp(s))continue;const r=t[s];if($e(r))e[s]=Ly(s,r,i);else if(r!=null){const o=Ju(r);e[s]=()=>o}}},Cp=(t,e)=>{const n=Ju(e);t.slots.default=()=>n},Sp=(t,e,n)=>{for(const i in e)(n||i!=="_")&&(t[i]=e[i])},My=(t,e,n)=>{const i=t.slots=vp();if(t.vnode.shapeFlag&32){const s=e._;s?(Sp(i,e,n),n&&$g(i,"_",s,!0)):xp(e,i)}else e&&Cp(t,e)},Dy=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=ht;if(i.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:Sp(s,e,n):(r=!e.$stable,xp(e,s)),o=e}else e&&(Cp(t,e),o={default:1});if(r)for(const a in s)!wp(a)&&o[a]==null&&delete s[a]};function ru(t,e,n,i,s=!1){if(Ae(t)){t.forEach((d,f)=>ru(d,e&&(Ae(e)?e[f]:e),n,i,s));return}if(Pa(i)&&!s)return;const r=i.shapeFlag&4?Pl(i.component):i.el,o=s?null:r,{i:a,r:l}=t,u=e&&e.r,c=a.refs===ht?a.refs={}:a.refs,h=a.setupState;if(u!=null&&u!==l&&(Tt(u)?(c[u]=null,Ve(h,u)&&(h[u]=null)):Rt(u)&&(u.value=null)),$e(l))Qi(l,a,12,[o,c]);else{const d=Tt(l),f=Rt(l);if(d||f){const g=()=>{if(t.f){const p=d?Ve(h,l)?h[l]:c[l]:l.value;s?Ae(p)&&$u(p,r):Ae(p)?p.includes(r)||p.push(r):d?(c[l]=[r],Ve(h,l)&&(h[l]=c[l])):(l.value=[r],t.k&&(c[t.k]=l.value))}else d?(c[l]=o,Ve(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(c[t.k]=o))};o?(g.id=-1,Jt(g,n)):g()}}}const Fy=Symbol("_vte"),Ny=t=>t.__isTeleport,Jt=Jy;function $y(t){return Gy(t)}function Gy(t,e){const n=Gg();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:f=Sn,insertStaticContent:g}=t,p=(x,R,P,q=null,K=null,se=null,ge=void 0,fe=null,he=!!R.dynamicChildren)=>{if(x===R)return;x&&!Nr(x,R)&&(q=M(x),we(x,K,se,!0),x=null),R.patchFlag===-2&&(he=!1,R.dynamicChildren=null);const{type:ie,ref:me,shapeFlag:Z}=R;switch(ie){case Il:m(x,R,P,q);break;case As:w(x,R,P,q);break;case ka:x==null&&v(R,P,q,ge);break;case Se:Q(x,R,P,q,K,se,ge,fe,he);break;default:Z&1?b(x,R,P,q,K,se,ge,fe,he):Z&6?ae(x,R,P,q,K,se,ge,fe,he):(Z&64||Z&128)&&ie.process(x,R,P,q,K,se,ge,fe,he,W)}me!=null&&K&&ru(me,x&&x.ref,se,R||x,!R)},m=(x,R,P,q)=>{if(x==null)i(R.el=a(R.children),P,q);else{const K=R.el=x.el;R.children!==x.children&&u(K,R.children)}},w=(x,R,P,q)=>{x==null?i(R.el=l(R.children||""),P,q):R.el=x.el},v=(x,R,P,q)=>{[x.el,x.anchor]=g(x.children,R,P,q,x.el,x.anchor)},y=({el:x,anchor:R},P,q)=>{let K;for(;x&&x!==R;)K=d(x),i(x,P,q),x=K;i(R,P,q)},E=({el:x,anchor:R})=>{let P;for(;x&&x!==R;)P=d(x),s(x),x=P;s(R)},b=(x,R,P,q,K,se,ge,fe,he)=>{R.type==="svg"?ge="svg":R.type==="math"&&(ge="mathml"),x==null?I(R,P,q,K,se,ge,fe,he):D(x,R,K,se,ge,fe,he)},I=(x,R,P,q,K,se,ge,fe)=>{let he,ie;const{props:me,shapeFlag:Z,transition:z,dirs:ce}=x;if(he=x.el=o(x.type,se,me&&me.is,me),Z&8?c(he,x.children):Z&16&&O(x.children,he,null,q,K,lc(x,se),ge,fe),ce&&cs(x,null,q,"created"),A(he,x,x.scopeId,ge,q),me){for(const j in me)j!=="value"&&!no(j)&&r(he,j,null,me[j],se,q);"value"in me&&r(he,"value",null,me.value,se),(ie=me.onVnodeBeforeMount)&&Vn(ie,q,x)}ce&&cs(x,null,q,"beforeMount");const Ce=zy(K,z);Ce&&z.beforeEnter(he),i(he,R,P),((ie=me&&me.onVnodeMounted)||Ce||ce)&&Jt(()=>{ie&&Vn(ie,q,x),Ce&&z.enter(he),ce&&cs(x,null,q,"mounted")},K)},A=(x,R,P,q,K)=>{if(P&&f(x,P),q)for(let se=0;se<q.length;se++)f(x,q[se]);if(K){let se=K.subTree;if(R===se){const ge=K.vnode;A(x,ge,ge.scopeId,ge.slotScopeIds,K.parent)}}},O=(x,R,P,q,K,se,ge,fe,he=0)=>{for(let ie=he;ie<x.length;ie++){const me=x[ie]=fe?Ui(x[ie]):Hn(x[ie]);p(null,me,R,P,q,K,se,ge,fe)}},D=(x,R,P,q,K,se,ge)=>{const fe=R.el=x.el;let{patchFlag:he,dynamicChildren:ie,dirs:me}=R;he|=x.patchFlag&16;const Z=x.props||ht,z=R.props||ht;let ce;if(P&&us(P,!1),(ce=z.onVnodeBeforeUpdate)&&Vn(ce,P,R,x),me&&cs(R,x,P,"beforeUpdate"),P&&us(P,!0),(Z.innerHTML&&z.innerHTML==null||Z.textContent&&z.textContent==null)&&c(fe,""),ie?re(x.dynamicChildren,ie,fe,P,q,lc(R,K),se):ge||le(x,R,fe,null,P,q,lc(R,K),se,!1),he>0){if(he&16)ee(fe,Z,z,P,K);else if(he&2&&Z.class!==z.class&&r(fe,"class",null,z.class,K),he&4&&r(fe,"style",Z.style,z.style,K),he&8){const Ce=R.dynamicProps;for(let j=0;j<Ce.length;j++){const $=Ce[j],pe=Z[$],Me=z[$];(Me!==pe||$==="value")&&r(fe,$,pe,Me,K,P)}}he&1&&x.children!==R.children&&c(fe,R.children)}else!ge&&ie==null&&ee(fe,Z,z,P,K);((ce=z.onVnodeUpdated)||me)&&Jt(()=>{ce&&Vn(ce,P,R,x),me&&cs(R,x,P,"updated")},q)},re=(x,R,P,q,K,se,ge)=>{for(let fe=0;fe<R.length;fe++){const he=x[fe],ie=R[fe],me=he.el&&(he.type===Se||!Nr(he,ie)||he.shapeFlag&70)?h(he.el):P;p(he,ie,me,null,q,K,se,ge,!0)}},ee=(x,R,P,q,K)=>{if(R!==P){if(R!==ht)for(const se in R)!no(se)&&!(se in P)&&r(x,se,R[se],null,K,q);for(const se in P){if(no(se))continue;const ge=P[se],fe=R[se];ge!==fe&&se!=="value"&&r(x,se,fe,ge,K,q)}"value"in P&&r(x,"value",R.value,P.value,K)}},Q=(x,R,P,q,K,se,ge,fe,he)=>{const ie=R.el=x?x.el:a(""),me=R.anchor=x?x.anchor:a("");let{patchFlag:Z,dynamicChildren:z,slotScopeIds:ce}=R;ce&&(fe=fe?fe.concat(ce):ce),x==null?(i(ie,P,q),i(me,P,q),O(R.children||[],P,me,K,se,ge,fe,he)):Z>0&&Z&64&&z&&x.dynamicChildren?(re(x.dynamicChildren,z,P,K,se,ge,fe),(R.key!=null||K&&R===K.subTree)&&Rp(x,R,!0)):le(x,R,P,me,K,se,ge,fe,he)},ae=(x,R,P,q,K,se,ge,fe,he)=>{R.slotScopeIds=fe,x==null?R.shapeFlag&512?K.ctx.activate(R,P,q,ge,he):Y(R,P,q,K,se,ge,he):H(x,R,he)},Y=(x,R,P,q,K,se,ge)=>{const fe=x.component=r0(x,q,K);if(dp(x)&&(fe.ctx.renderer=W),o0(fe,!1,ge),fe.asyncDep){if(K&&K.registerDep(fe,F,ge),!x.el){const he=fe.subTree=N(As);w(null,he,R,P)}}else F(fe,x,R,P,K,se,ge)},H=(x,R,P)=>{const q=R.component=x.component;if(Hy(x,R,P))if(q.asyncDep&&!q.asyncResolved){J(q,R,P);return}else q.next=R,oy(q.update),q.effect.dirty=!0,q.update();else R.el=x.el,q.vnode=R},F=(x,R,P,q,K,se,ge)=>{const fe=()=>{if(x.isMounted){let{next:me,bu:Z,u:z,parent:ce,vnode:Ce}=x;{const Re=Tp(x);if(Re){me&&(me.el=Ce.el,J(x,me,ge)),Re.asyncDep.then(()=>{x.isUnmounted||fe()});return}}let j=me,$;us(x,!1),me?(me.el=Ce.el,J(x,me,ge)):me=Ce,Z&&Ia(Z),($=me.props&&me.props.onVnodeBeforeUpdate)&&Vn($,ce,me,Ce),us(x,!0);const pe=cc(x),Me=x.subTree;x.subTree=pe,p(Me,pe,h(Me.el),M(Me),x,K,se),me.el=pe.el,j===null&&qy(x,pe.el),z&&Jt(z,K),($=me.props&&me.props.onVnodeUpdated)&&Jt(()=>Vn($,ce,me,Ce),K)}else{let me;const{el:Z,props:z}=R,{bm:ce,m:Ce,parent:j}=x,$=Pa(R);if(us(x,!1),ce&&Ia(ce),!$&&(me=z&&z.onVnodeBeforeMount)&&Vn(me,j,R),us(x,!0),Z&&de){const pe=()=>{x.subTree=cc(x),de(Z,x.subTree,x,K,null)};$?R.type.__asyncLoader().then(()=>!x.isUnmounted&&pe()):pe()}else{const pe=x.subTree=cc(x);p(null,pe,P,q,x,K,se),R.el=pe.el}if(Ce&&Jt(Ce,K),!$&&(me=z&&z.onVnodeMounted)){const pe=R;Jt(()=>Vn(me,j,pe),K)}(R.shapeFlag&256||j&&Pa(j.vnode)&&j.vnode.shapeFlag&256)&&x.a&&Jt(x.a,K),x.isMounted=!0,R=P=q=null}},he=x.effect=new zu(fe,Sn,()=>Vu(ie),x.scope),ie=x.update=()=>{he.dirty&&he.run()};ie.i=x,ie.id=x.uid,us(x,!0),ie()},J=(x,R,P)=>{R.component=x;const q=x.vnode.props;x.vnode=R,x.next=null,Oy(x,R.props,q,P),Dy(x,R.children,P),rs(),pd(x),os()},le=(x,R,P,q,K,se,ge,fe,he=!1)=>{const ie=x&&x.children,me=x?x.shapeFlag:0,Z=R.children,{patchFlag:z,shapeFlag:ce}=R;if(z>0){if(z&128){oe(ie,Z,P,q,K,se,ge,fe,he);return}else if(z&256){ye(ie,Z,P,q,K,se,ge,fe,he);return}}ce&8?(me&16&&ve(ie,K,se),Z!==ie&&c(P,Z)):me&16?ce&16?oe(ie,Z,P,q,K,se,ge,fe,he):ve(ie,K,se,!0):(me&8&&c(P,""),ce&16&&O(Z,P,q,K,se,ge,fe,he))},ye=(x,R,P,q,K,se,ge,fe,he)=>{x=x||or,R=R||or;const ie=x.length,me=R.length,Z=Math.min(ie,me);let z;for(z=0;z<Z;z++){const ce=R[z]=he?Ui(R[z]):Hn(R[z]);p(x[z],ce,P,null,K,se,ge,fe,he)}ie>me?ve(x,K,se,!0,!1,Z):O(R,P,q,K,se,ge,fe,he,Z)},oe=(x,R,P,q,K,se,ge,fe,he)=>{let ie=0;const me=R.length;let Z=x.length-1,z=me-1;for(;ie<=Z&&ie<=z;){const ce=x[ie],Ce=R[ie]=he?Ui(R[ie]):Hn(R[ie]);if(Nr(ce,Ce))p(ce,Ce,P,null,K,se,ge,fe,he);else break;ie++}for(;ie<=Z&&ie<=z;){const ce=x[Z],Ce=R[z]=he?Ui(R[z]):Hn(R[z]);if(Nr(ce,Ce))p(ce,Ce,P,null,K,se,ge,fe,he);else break;Z--,z--}if(ie>Z){if(ie<=z){const ce=z+1,Ce=ce<me?R[ce].el:q;for(;ie<=z;)p(null,R[ie]=he?Ui(R[ie]):Hn(R[ie]),P,Ce,K,se,ge,fe,he),ie++}}else if(ie>z)for(;ie<=Z;)we(x[ie],K,se,!0),ie++;else{const ce=ie,Ce=ie,j=new Map;for(ie=Ce;ie<=z;ie++){const vt=R[ie]=he?Ui(R[ie]):Hn(R[ie]);vt.key!=null&&j.set(vt.key,ie)}let $,pe=0;const Me=z-Ce+1;let Re=!1,Ue=0;const Ct=new Array(Me);for(ie=0;ie<Me;ie++)Ct[ie]=0;for(ie=ce;ie<=Z;ie++){const vt=x[ie];if(pe>=Me){we(vt,K,se,!0);continue}let ot;if(vt.key!=null)ot=j.get(vt.key);else for($=Ce;$<=z;$++)if(Ct[$-Ce]===0&&Nr(vt,R[$])){ot=$;break}ot===void 0?we(vt,K,se,!0):(Ct[ot-Ce]=ie+1,ot>=Ue?Ue=ot:Re=!0,p(vt,R[ot],P,null,K,se,ge,fe,he),pe++)}const On=Re?Wy(Ct):or;for($=On.length-1,ie=Me-1;ie>=0;ie--){const vt=Ce+ie,ot=R[vt],hn=vt+1<me?R[vt+1].el:q;Ct[ie]===0?p(null,ot,P,hn,K,se,ge,fe,he):Re&&($<0||ie!==On[$]?ue(ot,P,hn,2):$--)}}},ue=(x,R,P,q,K=null)=>{const{el:se,type:ge,transition:fe,children:he,shapeFlag:ie}=x;if(ie&6){ue(x.component.subTree,R,P,q);return}if(ie&128){x.suspense.move(R,P,q);return}if(ie&64){ge.move(x,R,P,W);return}if(ge===Se){i(se,R,P);for(let Z=0;Z<he.length;Z++)ue(he[Z],R,P,q);i(x.anchor,R,P);return}if(ge===ka){y(x,R,P);return}if(q!==2&&ie&1&&fe)if(q===0)fe.beforeEnter(se),i(se,R,P),Jt(()=>fe.enter(se),K);else{const{leave:Z,delayLeave:z,afterLeave:ce}=fe,Ce=()=>i(se,R,P),j=()=>{Z(se,()=>{Ce(),ce&&ce()})};z?z(se,Ce,j):j()}else i(se,R,P)},we=(x,R,P,q=!1,K=!1)=>{const{type:se,props:ge,ref:fe,children:he,dynamicChildren:ie,shapeFlag:me,patchFlag:Z,dirs:z,cacheIndex:ce}=x;if(Z===-2&&(K=!1),fe!=null&&ru(fe,null,P,x,!0),ce!=null&&(R.renderCache[ce]=void 0),me&256){R.ctx.deactivate(x);return}const Ce=me&1&&z,j=!Pa(x);let $;if(j&&($=ge&&ge.onVnodeBeforeUnmount)&&Vn($,R,x),me&6)xe(x.component,P,q);else{if(me&128){x.suspense.unmount(P,q);return}Ce&&cs(x,null,R,"beforeUnmount"),me&64?x.type.remove(x,R,P,W,q):ie&&!ie.hasOnce&&(se!==Se||Z>0&&Z&64)?ve(ie,R,P,!1,!0):(se===Se&&Z&384||!K&&me&16)&&ve(he,R,P),q&&te(x)}(j&&($=ge&&ge.onVnodeUnmounted)||Ce)&&Jt(()=>{$&&Vn($,R,x),Ce&&cs(x,null,R,"unmounted")},P)},te=x=>{const{type:R,el:P,anchor:q,transition:K}=x;if(R===Se){B(P,q);return}if(R===ka){E(x);return}const se=()=>{s(P),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(x.shapeFlag&1&&K&&!K.persisted){const{leave:ge,delayLeave:fe}=K,he=()=>ge(P,se);fe?fe(x.el,se,he):he()}else se()},B=(x,R)=>{let P;for(;x!==R;)P=d(x),s(x),x=P;s(R)},xe=(x,R,P)=>{const{bum:q,scope:K,update:se,subTree:ge,um:fe,m:he,a:ie}=x;wd(he),wd(ie),q&&Ia(q),K.stop(),se&&(se.active=!1,we(ge,x,R,P)),fe&&Jt(fe,R),Jt(()=>{x.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},ve=(x,R,P,q=!1,K=!1,se=0)=>{for(let ge=se;ge<x.length;ge++)we(x[ge],R,P,q,K)},M=x=>{if(x.shapeFlag&6)return M(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const R=d(x.anchor||x.el),P=R&&R[Fy];return P?d(P):R};let G=!1;const k=(x,R,P)=>{x==null?R._vnode&&we(R._vnode,null,null,!0):p(R._vnode||null,x,R,null,null,null,P),R._vnode=x,G||(G=!0,pd(),cp(),G=!1)},W={p,um:we,m:ue,r:te,mt:Y,mc:O,pc:le,pbc:re,n:M,o:t};let ne,de;return{render:k,hydrate:ne,createApp:Ay(k,ne)}}function lc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function us({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function zy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Rp(t,e,n=!1){const i=t.children,s=e.children;if(Ae(i)&&Ae(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Ui(s[r]),a.el=o.el),!n&&a.patchFlag!==-2&&Rp(o,a)),a.type===Il&&(a.el=o.el)}}function Wy(t){const e=t.slice(),n=[0];let i,s,r,o,a;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(s=n[n.length-1],t[s]<u){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<u?r=a+1:o=a;u<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function Tp(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Tp(e)}function wd(t){if(t)for(let e=0;e<t.length;e++)t[e].active=!1}const By=Symbol.for("v-scx"),Uy=()=>ni(By),la={};function ii(t,e,n){return Ip(t,e,n)}function Ip(t,e,{immediate:n,deep:i,flush:s,once:r,onTrack:o,onTrigger:a}=ht){if(e&&r){const I=e;e=(...A)=>{I(...A),b()}}const l=Mt,u=I=>i===!0?I:Xi(I,i===!1?1:void 0);let c,h=!1,d=!1;if(Rt(t)?(c=()=>t.value,h=pr(t)):io(t)?(c=()=>u(t),h=!0):Ae(t)?(d=!0,h=t.some(I=>io(I)||pr(I)),c=()=>t.map(I=>{if(Rt(I))return I.value;if(io(I))return u(I);if($e(I))return Qi(I,l,2)})):$e(t)?e?c=()=>Qi(t,l,2):c=()=>(f&&f(),Gn(t,l,3,[g])):c=Sn,e&&i){const I=c;c=()=>Xi(I())}let f,g=I=>{f=y.onStop=()=>{Qi(I,l,4),f=y.onStop=void 0}},p;if(Al)if(g=Sn,e?n&&Gn(e,l,3,[c(),d?[]:void 0,g]):c(),s==="sync"){const I=Uy();p=I.__watcherHandles||(I.__watcherHandles=[])}else return Sn;let m=d?new Array(t.length).fill(la):la;const w=()=>{if(!(!y.active||!y.dirty))if(e){const I=y.run();(i||h||(d?I.some((A,O)=>ts(A,m[O])):ts(I,m)))&&(f&&f(),Gn(e,l,3,[I,m===la?void 0:d&&m[0]===la?[]:m,g]),m=I)}else y.run()};w.allowRecurse=!!e;let v;s==="sync"?v=w:s==="post"?v=()=>Jt(w,l&&l.suspense):(w.pre=!0,l&&(w.id=l.uid),v=()=>Vu(w));const y=new zu(c,Sn,v),E=Av(),b=()=>{y.stop(),E&&$u(E.effects,y)};return e?n?w():m=y.run():s==="post"?Jt(y.run.bind(y),l&&l.suspense):y.run(),p&&p.push(b),b}function Ky(t,e,n){const i=this.proxy,s=Tt(t)?t.includes(".")?Ap(i,t):()=>i[t]:t.bind(i,i);let r;$e(e)?r=e:(r=e.handler,n=e);const o=Wo(this),a=Ip(s,r.bind(i),n);return o(),a}function Ap(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function Xi(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Rt(t))Xi(t.value,e,n);else if(Ae(t))for(let i=0;i<t.length;i++)Xi(t[i],e,n);else if(Mg(t)||ar(t))t.forEach(i=>{Xi(i,e,n)});else if(Ng(t)){for(const i in t)Xi(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Xi(t[i],e,n)}return t}const jy=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Wn(e)}Modifiers`]||t[`${Ls(e)}Modifiers`];function Yy(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||ht;let s=n;const r=e.startsWith("update:"),o=r&&jy(i,e.slice(7));o&&(o.trim&&(s=n.map(c=>Tt(c)?c.trim():c)),o.number&&(s=n.map(qc)));let a,l=i[a=rc(e)]||i[a=rc(Wn(e))];!l&&r&&(l=i[a=rc(Ls(e))]),l&&Gn(l,t,6,s);const u=i[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Gn(u,t,6,s)}}function Pp(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!$e(t)){const l=u=>{const c=Pp(u,e,!0);c&&(a=!0,jt(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(ct(t)&&i.set(t,null),null):(Ae(r)?r.forEach(l=>o[l]=null):jt(o,r),ct(t)&&i.set(t,o),o)}function Tl(t,e){return!t||!yl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,Ls(e))||Ve(t,e))}function cc(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=t,m=Ya(t);let w,v;try{if(n.shapeFlag&4){const E=s||i,b=E;w=Hn(u.call(b,E,c,h,f,d,g)),v=a}else{const E=e;w=Hn(E.length>1?E(h,{attrs:a,slots:o,emit:l}):E(h,null)),v=e.props?a:Xy(a)}}catch(E){ro.length=0,xl(E,t,1),w=N(As)}let y=w;if(v&&p!==!1){const E=Object.keys(v),{shapeFlag:b}=y;E.length&&b&7&&(r&&E.some(Nu)&&(v=Vy(v,r)),y=_r(y,v,!1,!0))}return n.dirs&&(y=_r(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),w=y,Ya(m),w}const Xy=t=>{let e;for(const n in t)(n==="class"||n==="style"||yl(n))&&((e||(e={}))[n]=t[n]);return e},Vy=(t,e)=>{const n={};for(const i in t)(!Nu(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function Hy(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?xd(i,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==i[d]&&!Tl(u,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?xd(i,o,u):!0:!!o;return!1}function xd(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!Tl(n,r))return!0}return!1}function qy({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zy=t=>t.__isSuspense;function Jy(t,e){e&&e.pendingBranch?Ae(t)?e.effects.push(...t):e.effects.push(t):ay(t)}const Se=Symbol.for("v-fgt"),Il=Symbol.for("v-txt"),As=Symbol.for("v-cmt"),ka=Symbol.for("v-stc"),ro=[];let mn=null;function C(t=!1){ro.push(mn=t?null:[])}function Qy(){ro.pop(),mn=ro[ro.length-1]||null}let yo=1;function Cd(t){yo+=t,t<0&&mn&&(mn.hasOnce=!0)}function Op(t){return t.dynamicChildren=yo>0?mn||or:null,Qy(),yo>0&&mn&&mn.push(t),t}function S(t,e,n,i,s,r){return Op(_(t,e,n,i,s,r,!0))}function Pn(t,e,n,i,s){return Op(N(t,e,n,i,s,!0))}function ou(t){return t?t.__v_isVNode===!0:!1}function Nr(t,e){return t.type===e.type&&t.key===e.key}const kp=({key:t})=>t??null,La=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Tt(t)||Rt(t)||$e(t)?{i:rn,r:t,k:e,f:!!n}:t:null);function _(t,e=null,n=null,i=0,s=null,r=t===Se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&kp(e),ref:e&&La(e),scopeId:Sl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:rn};return a?(Qu(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=Tt(n)?8:16),yo>0&&!o&&mn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&mn.push(l),l}const N=e0;function e0(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===by)&&(t=As),ou(t)){const a=_r(t,e,!0);return n&&Qu(a,n),yo>0&&!r&&mn&&(a.shapeFlag&6?mn[mn.indexOf(t)]=a:mn.push(a)),a.patchFlag=-2,a}if(h0(t)&&(t=t.__vccOpts),e){e=t0(e);let{class:a,style:l}=e;a&&!Tt(a)&&(e.class=nt(a)),ct(l)&&(np(l)&&!Ae(l)&&(l=jt({},l)),e.style=Et(l))}const o=Tt(t)?1:Zy(t)?128:Ny(t)?64:ct(t)?4:$e(t)?2:0;return _(t,e,n,i,s,o,r,!0)}function t0(t){return t?np(t)||yp(t)?jt({},t):t:null}function _r(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=t,u=e?n0(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&kp(u),ref:e&&e.ref?n&&r?Ae(r)?r.concat(La(e)):[r,La(e)]:La(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Se?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_r(t.ssContent),ssFallback:t.ssFallback&&_r(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&hp(c,l.clone(c)),c}function Ie(t=" ",e=0){return N(Il,null,t,e)}function zo(t,e){const n=N(ka,null,t);return n.staticCount=e,n}function Ee(t="",e=!1){return e?(C(),Pn(As,null,t)):N(As,null,t)}function Hn(t){return t==null||typeof t=="boolean"?N(As):Ae(t)?N(Se,null,t.slice()):typeof t=="object"?Ui(t):N(Il,null,String(t))}function Ui(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_r(t)}function Qu(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Ae(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),Qu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!yp(e)?e._ctx=rn:s===3&&rn&&(rn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else $e(e)?(e={default:e,_ctx:rn},n=32):(e=String(e),i&64?(n=16,e=[Ie(e)]):n=8);t.children=e,t.shapeFlag|=n}function n0(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=nt([e.class,i.class]));else if(s==="style")e.style=Et([e.style,i.style]);else if(yl(s)){const r=e[s],o=i[s];o&&r!==o&&!(Ae(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function Vn(t,e,n,i=null){Gn(t,e,7,[n,i])}const i0=_p();let s0=0;function r0(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||i0,r={uid:s0++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Tv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ep(i,s),emitsOptions:Pp(i,s),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:i.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Yy.bind(null,r),t.ce&&t.ce(r),r}let Mt=null;const eh=()=>Mt||rn;let Va,au;{const t=Gg(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Va=e("__VUE_INSTANCE_SETTERS__",n=>Mt=n),au=e("__VUE_SSR_SETTERS__",n=>Al=n)}const Wo=t=>{const e=Mt;return Va(t),t.scope.on(),()=>{t.scope.off(),Va(e)}},Sd=()=>{Mt&&Mt.scope.off(),Va(null)};function Lp(t){return t.vnode.shapeFlag&4}let Al=!1;function o0(t,e=!1,n=!1){e&&au(e);const{props:i,children:s}=t.vnode,r=Lp(t);Py(t,i,r,e),My(t,s,n);const o=r?a0(t,e):void 0;return e&&au(!1),o}function a0(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wy);const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?c0(t):null,r=Wo(t);rs();const o=Qi(i,t,0,[t.props,s]);if(os(),r(),Dg(o)){if(o.then(Sd,Sd),e)return o.then(a=>{Rd(t,a,e)}).catch(a=>{xl(a,t,0)});t.asyncDep=o}else Rd(t,o,e)}else Mp(t,e)}function Rd(t,e,n){$e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=op(e)),Mp(t,n)}let Td;function Mp(t,e,n){const i=t.type;if(!t.render){if(!e&&Td&&!i.render){const s=i.template||Zu(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,u=jt(jt({isCustomElement:r,delimiters:a},o),l);i.render=Td(s,u)}}t.render=i.render||Sn}{const s=Wo(t);rs();try{xy(t)}finally{os(),s()}}}const l0={get(t,e){return cn(t,"get",""),t[e]}};function c0(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,l0),slots:t.slots,emit:t.emit,expose:e}}function Pl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(op(qv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in so)return so[n](t)},has(e,n){return n in e||n in so}})):t.proxy}function u0(t,e=!0){return $e(t)?t.displayName||t.name:t.name||e&&t.__name}function h0(t){return $e(t)&&"__vccOpts"in t}const pn=(t,e)=>Zv(t,e,Al);function th(t,e,n){const i=arguments.length;return i===2?ct(e)&&!Ae(e)?ou(e)?N(t,null,[e]):N(t,e):N(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ou(n)&&(n=[n]),N(t,e,n))}const d0="3.4.38";/**
* @vue/runtime-dom v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const f0="http://www.w3.org/2000/svg",g0="http://www.w3.org/1998/Math/MathML",_i=typeof document<"u"?document:null,Id=_i&&_i.createElement("template"),p0={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?_i.createElementNS(f0,t):e==="mathml"?_i.createElementNS(g0,t):n?_i.createElement(t,{is:n}):_i.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>_i.createTextNode(t),createComment:t=>_i.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_i.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Id.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const a=Id.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_0=Symbol("_vtc");function m0(t,e,n){const i=t[_0];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ad=Symbol("_vod"),v0=Symbol("_vsh"),y0=Symbol(""),b0=/(^|;)\s*display\s*:/;function E0(t,e,n){const i=t.style,s=Tt(n);let r=!1;if(n&&!s){if(e)if(Tt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ma(i,a,"")}else for(const o in e)n[o]==null&&Ma(i,o,"");for(const o in n)o==="display"&&(r=!0),Ma(i,o,n[o])}else if(s){if(e!==n){const o=i[y0];o&&(n+=";"+o),i.cssText=n,r=b0.test(n)}}else e&&t.removeAttribute("style");Ad in t&&(t[Ad]=r?i.display:"",t[v0]&&(i.display="none"))}const Pd=/\s*!important$/;function Ma(t,e,n){if(Ae(n))n.forEach(i=>Ma(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=w0(t,e);Pd.test(n)?t.setProperty(Ls(i),n.replace(Pd,""),"important"):t[i]=n}}const Od=["Webkit","Moz","ms"],uc={};function w0(t,e){const n=uc[e];if(n)return n;let i=Wn(e);if(i!=="filter"&&i in t)return uc[e]=i;i=El(i);for(let s=0;s<Od.length;s++){const r=Od[s]+i;if(r in t)return uc[e]=r}return e}const kd="http://www.w3.org/1999/xlink";function Ld(t,e,n,i,s,r=Sv(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kd,e.slice(6,e.length)):t.setAttributeNS(kd,e,n):n==null||r&&!zg(n)?t.removeAttribute(e):t.setAttribute(e,r?"":ri(n)?String(n):n)}function x0(t,e,n,i){if(e==="innerHTML"||e==="textContent"){if(n==null)return;t[e]=n;return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?"":String(n);(o!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let r=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=zg(n):n==null&&o==="string"?(n="",r=!0):o==="number"&&(n=0,r=!0)}try{t[e]=n}catch{}r&&t.removeAttribute(e)}function vs(t,e,n,i){t.addEventListener(e,n,i)}function C0(t,e,n,i){t.removeEventListener(e,n,i)}const Md=Symbol("_vei");function S0(t,e,n,i,s=null){const r=t[Md]||(t[Md]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=R0(e);if(i){const u=r[e]=A0(i,s);vs(t,a,u,l)}else o&&(C0(t,a,o,l),r[e]=void 0)}}const Dd=/(?:Once|Passive|Capture)$/;function R0(t){let e;if(Dd.test(t)){e={};let i;for(;i=t.match(Dd);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ls(t.slice(2)),e]}let hc=0;const T0=Promise.resolve(),I0=()=>hc||(T0.then(()=>hc=0),hc=Date.now());function A0(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Gn(P0(i,n.value),e,5,[i])};return n.value=t,n.attached=I0(),n}function P0(t,e){if(Ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Fd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,O0=(t,e,n,i,s,r)=>{const o=s==="svg";e==="class"?m0(t,i,o):e==="style"?E0(t,n,i):yl(e)?Nu(e)||S0(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):k0(t,e,i,o))?(x0(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ld(t,e,i,o,r,e!=="value")):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Ld(t,e,i,o))};function k0(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Fd(e)&&$e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Fd(e)&&Tt(n)?!1:e in t}const Ha=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ae(e)?n=>Ia(e,n):e};function L0(t){t.target.composing=!0}function Nd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ur=Symbol("_assign"),Cn={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[ur]=Ha(s);const r=i||s.props&&s.props.type==="number";vs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=qc(a)),t[ur](a)}),n&&vs(t,"change",()=>{t.value=t.value.trim()}),e||(vs(t,"compositionstart",L0),vs(t,"compositionend",Nd),vs(t,"change",Nd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},o){if(t[ur]=Ha(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?qc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===l)||(t.value=l))}},wt={created(t,{value:e},n){t.checked=Ka(e,n.props.value),t[ur]=Ha(n),vs(t,"change",()=>{t[ur](M0(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t[ur]=Ha(i),e!==n&&(t.checked=Ka(e,i.props.value))}};function M0(t){return"_value"in t?t._value:t.value}const D0=["ctrl","shift","alt","meta"],F0={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>D0.some(n=>t[`${n}Key`]&&!e.includes(n))},Tr=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const a=F0[e[o]];if(a&&a(s,e))return}return t(s,...r)})},N0=jt({patchProp:O0},p0);let $d;function $0(){return $d||($d=$y(N0))}const G0=(...t)=>{const e=$0().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=W0(i);if(!s)return;const r=e._component;!$e(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,z0(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function z0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function W0(t){return Tt(t)?document.querySelector(t):t}const Be=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},B0={},U0={id:"page-view"};function K0(t,e){const n=Tn("router-view");return C(),S("div",U0,[N(n,{id:"router-view"})])}const j0=Be(B0,[["render",K0]]);/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const qs=typeof document<"u";function Y0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const rt=Object.assign;function dc(t,e){const n={};for(const i in e){const s=e[i];n[i]=Bn(s)?s.map(t):t(s)}return n}const oo=()=>{},Bn=Array.isArray,Dp=/#/g,X0=/&/g,V0=/\//g,H0=/=/g,q0=/\?/g,Fp=/\+/g,Z0=/%5B/g,J0=/%5D/g,Np=/%5E/g,Q0=/%60/g,$p=/%7B/g,e1=/%7C/g,Gp=/%7D/g,t1=/%20/g;function nh(t){return encodeURI(""+t).replace(e1,"|").replace(Z0,"[").replace(J0,"]")}function n1(t){return nh(t).replace($p,"{").replace(Gp,"}").replace(Np,"^")}function lu(t){return nh(t).replace(Fp,"%2B").replace(t1,"+").replace(Dp,"%23").replace(X0,"%26").replace(Q0,"`").replace($p,"{").replace(Gp,"}").replace(Np,"^")}function i1(t){return lu(t).replace(H0,"%3D")}function s1(t){return nh(t).replace(Dp,"%23").replace(q0,"%3F")}function r1(t){return t==null?"":s1(t).replace(V0,"%2F")}function bo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const o1=/\/$/,a1=t=>t.replace(o1,"");function fc(t,e,n="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=t(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=h1(i??e,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:bo(o)}}function l1(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Gd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function c1(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&mr(e.matched[i],n.matched[s])&&zp(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function mr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function zp(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!u1(t[n],e[n]))return!1;return!0}function u1(t,e){return Bn(t)?zd(t,e):Bn(e)?zd(e,t):t===e}function zd(t,e){return Bn(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function h1(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const Mi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Eo;(function(t){t.pop="pop",t.push="push"})(Eo||(Eo={}));var ao;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ao||(ao={}));function d1(t){if(!t)if(qs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),a1(t)}const f1=/^[^#]+#/;function g1(t,e){return t.replace(f1,"#")+e}function p1(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const Ol=()=>({left:window.scrollX,top:window.scrollY});function _1(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=p1(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Wd(t,e){return(history.state?history.state.position-e:-1)+t}const cu=new Map;function m1(t,e){cu.set(t,e)}function v1(t){const e=cu.get(t);return cu.delete(t),e}let y1=()=>location.protocol+"//"+location.host;function Wp(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let a=s.includes(t.slice(r))?t.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Gd(l,"")}return Gd(n,t)+i+s}function b1(t,e,n,i){let s=[],r=[],o=null;const a=({state:d})=>{const f=Wp(t,location),g=n.value,p=e.value;let m=0;if(d){if(n.value=f,e.value=d,o&&o===g){o=null;return}m=p?d.position-p.position:0}else i(f);s.forEach(w=>{w(n.value,g,{delta:m,type:Eo.pop,direction:m?m>0?ao.forward:ao.back:ao.unknown})})};function l(){o=n.value}function u(d){s.push(d);const f=()=>{const g=s.indexOf(d);g>-1&&s.splice(g,1)};return r.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(rt({},d.state,{scroll:Ol()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:h}}function Bd(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?Ol():null}}function E1(t){const{history:e,location:n}=window,i={value:Wp(t,n)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:y1()+t+l;try{e[c?"replaceState":"pushState"](u,"",d),s.value=u}catch(f){console.error(f),n[c?"replace":"assign"](d)}}function o(l,u){const c=rt({},e.state,Bd(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});r(l,c,!0),i.value=l}function a(l,u){const c=rt({},s.value,e.state,{forward:l,scroll:Ol()});r(c.current,c,!0);const h=rt({},Bd(i.value,l,null),{position:c.position+1},u);r(l,h,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function w1(t){t=d1(t);const e=E1(t),n=b1(t,e.state,e.location,e.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=rt({location:"",base:t,go:i,createHref:g1.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function x1(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),w1(t)}function C1(t){return typeof t=="string"||t&&typeof t=="object"}function Bp(t){return typeof t=="string"||typeof t=="symbol"}const Up=Symbol("");var Ud;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Ud||(Ud={}));function vr(t,e){return rt(new Error,{type:t,[Up]:!0},e)}function hi(t,e){return t instanceof Error&&Up in t&&(e==null||!!(t.type&e))}const Kd="[^/]+?",S1={sensitive:!1,strict:!1,start:!0,end:!0},R1=/[.+*?^${}()[\]/\\]/g;function T1(t,e){const n=rt({},S1,e),i=[];let s=n.start?"^":"";const r=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let h=0;h<u.length;h++){const d=u[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(R1,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:p,optional:m,regexp:w}=d;r.push({name:g,repeatable:p,optional:m});const v=w||Kd;if(v!==Kd){f+=10;try{new RegExp(`(${v})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${g}" (${v}): `+E.message)}}let y=p?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;h||(y=m&&u.length<2?`(?:/${y})`:"/"+y),m&&(y+="?"),s+=y,f+=20,m&&(f+=-8),p&&(f+=-20),v===".*"&&(f+=-50)}c.push(f)}i.push(c)}if(n.strict&&n.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const c=u.match(o),h={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",g=r[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(u){let c="",h=!1;for(const d of t){(!h||!c.endsWith("/"))&&(c+="/"),h=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:g,repeatable:p,optional:m}=f,w=g in u?u[g]:"";if(Bn(w)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const v=Bn(w)?w.join("/"):w;if(!v)if(m)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);c+=v}}return c||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function I1(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Kp(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const r=I1(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(jd(i))return 1;if(jd(s))return-1}return s.length-i.length}function jd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const A1={type:0,value:""},P1=/[a-zA-Z0-9_]/;function O1(t){if(!t)return[[]];if(t==="/")return[[A1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,u="",c="";function h(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(u&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:l==="("?n=2:P1.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),o(),s}function k1(t,e,n){const i=T1(O1(t.path),n),s=rt(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function L1(t,e){const n=[],i=new Map;e=Vd({strict:!1,end:!0,sensitive:!1},e);function s(h){return i.get(h)}function r(h,d,f){const g=!f,p=M1(h);p.aliasOf=f&&f.record;const m=Vd(e,h),w=[p];if("alias"in h){const E=typeof h.alias=="string"?[h.alias]:h.alias;for(const b of E)w.push(rt({},p,{components:f?f.record.components:p.components,path:b,aliasOf:f?f.record:p}))}let v,y;for(const E of w){const{path:b}=E;if(d&&b[0]!=="/"){const I=d.record.path,A=I[I.length-1]==="/"?"":"/";E.path=d.record.path+(b&&A+b)}if(v=k1(E,d,m),f?f.alias.push(v):(y=y||v,y!==v&&y.alias.push(v),g&&h.name&&!Xd(v)&&o(h.name)),jp(v)&&l(v),p.children){const I=p.children;for(let A=0;A<I.length;A++)r(I[A],v,f&&f.children[A])}f=f||v}return y?()=>{o(y)}:oo}function o(h){if(Bp(h)){const d=i.get(h);d&&(i.delete(h),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(h);d>-1&&(n.splice(d,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const d=N1(h,n);n.splice(d,0,h),h.record.name&&!Xd(h)&&i.set(h.record.name,h)}function u(h,d){let f,g={},p,m;if("name"in h&&h.name){if(f=i.get(h.name),!f)throw vr(1,{location:h});m=f.record.name,g=rt(Yd(d.params,f.keys.filter(y=>!y.optional).concat(f.parent?f.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),h.params&&Yd(h.params,f.keys.map(y=>y.name))),p=f.stringify(g)}else if(h.path!=null)p=h.path,f=n.find(y=>y.re.test(p)),f&&(g=f.parse(p),m=f.record.name);else{if(f=d.name?i.get(d.name):n.find(y=>y.re.test(d.path)),!f)throw vr(1,{location:h,currentLocation:d});m=f.record.name,g=rt({},d.params,h.params),p=f.stringify(g)}const w=[];let v=f;for(;v;)w.unshift(v.record),v=v.parent;return{name:m,path:p,params:g,matched:w,meta:F1(w)}}t.forEach(h=>r(h));function c(){n.length=0,i.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:s}}function Yd(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function M1(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:D1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function D1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function Xd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function F1(t){return t.reduce((e,n)=>rt(e,n.meta),{})}function Vd(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function N1(t,e){let n=0,i=e.length;for(;n!==i;){const r=n+i>>1;Kp(t,e[r])<0?i=r:n=r+1}const s=$1(t);return s&&(i=e.lastIndexOf(s,i-1)),i}function $1(t){let e=t;for(;e=e.parent;)if(jp(e)&&Kp(t,e)===0)return e}function jp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function G1(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(Fp," "),o=r.indexOf("="),a=bo(o<0?r:r.slice(0,o)),l=o<0?null:bo(r.slice(o+1));if(a in e){let u=e[a];Bn(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Hd(t){let e="";for(let n in t){const i=t[n];if(n=i1(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Bn(i)?i.map(r=>r&&lu(r)):[i&&lu(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function z1(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Bn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const W1=Symbol(""),qd=Symbol(""),kl=Symbol(""),Yp=Symbol(""),uu=Symbol("");function $r(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ki(t,e,n,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=d=>{d===!1?l(vr(4,{from:n,to:e})):d instanceof Error?l(d):C1(d)?l(vr(2,{from:e,to:d})):(o&&i.enterCallbacks[s]===o&&typeof d=="function"&&o.push(d),a())},c=r(()=>t.call(i&&i.instances[s],e,n,u));let h=Promise.resolve(c);t.length<3&&(h=h.then(u)),h.catch(d=>l(d))})}function gc(t,e,n,i,s=r=>r()){const r=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(B1(l)){const c=(l.__vccOpts||l)[e];c&&r.push(Ki(c,n,i,o,a,s))}else{let u=l();r.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Y0(c)?c.default:c;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Ki(f,n,i,o,a,s)()}))}}return r}function B1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Zd(t){const e=ni(kl),n=ni(Yp),i=pn(()=>{const l=L(t.to);return e.resolve(l)}),s=pn(()=>{const{matched:l}=i.value,{length:u}=l,c=l[u-1],h=n.matched;if(!c||!h.length)return-1;const d=h.findIndex(mr.bind(null,c));if(d>-1)return d;const f=Jd(l[u-2]);return u>1&&Jd(c)===f&&h[h.length-1].path!==f?h.findIndex(mr.bind(null,l[u-2])):d}),r=pn(()=>s.value>-1&&Y1(n.params,i.value.params)),o=pn(()=>s.value>-1&&s.value===n.matched.length-1&&zp(n.params,i.value.params));function a(l={}){return j1(l)?e[L(t.replace)?"replace":"push"](L(t.to)).catch(oo):Promise.resolve()}return{route:i,href:pn(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const U1=Le({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Zd,setup(t,{slots:e}){const n=Go(Zd(t)),{options:i}=ni(kl),s=pn(()=>({[Qd(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Qd(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:th("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),K1=U1;function j1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Y1(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!Bn(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Jd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qd=(t,e,n)=>t??e??n,X1=Le({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=ni(uu),s=pn(()=>t.route||i.value),r=ni(qd,0),o=pn(()=>{let u=L(r);const{matched:c}=s.value;let h;for(;(h=c[u])&&!h.components;)u++;return u}),a=pn(()=>s.value.matched[o.value]);Oa(qd,pn(()=>o.value+1)),Oa(W1,a),Oa(uu,s);const l=T();return ii(()=>[l.value,a.value,t.name],([u,c,h],[d,f,g])=>{c&&(c.instances[h]=u,f&&f!==c&&u&&u===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),u&&c&&(!f||!mr(c,f)||!d)&&(c.enterCallbacks[h]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,h=a.value,d=h&&h.components[c];if(!d)return ef(n.default,{Component:d,route:u});const f=h.props[c],g=f?f===!0?u.params:typeof f=="function"?f(u):f:null,m=th(d,rt({},g,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[c]=null)},ref:l}));return ef(n.default,{Component:m,route:u})||m}}});function ef(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const V1=X1;function H1(t){const e=L1(t.routes,t),n=t.parseQuery||G1,i=t.stringifyQuery||Hd,s=t.history,r=$r(),o=$r(),a=$r(),l=Jv(Mi);let u=Mi;qs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=dc.bind(null,M=>""+M),h=dc.bind(null,r1),d=dc.bind(null,bo);function f(M,G){let k,W;return Bp(M)?(k=e.getRecordMatcher(M),W=G):W=M,e.addRoute(W,k)}function g(M){const G=e.getRecordMatcher(M);G&&e.removeRoute(G)}function p(){return e.getRoutes().map(M=>M.record)}function m(M){return!!e.getRecordMatcher(M)}function w(M,G){if(G=rt({},G||l.value),typeof M=="string"){const R=fc(n,M,G.path),P=e.resolve({path:R.path},G),q=s.createHref(R.fullPath);return rt(R,P,{params:d(P.params),hash:bo(R.hash),redirectedFrom:void 0,href:q})}let k;if(M.path!=null)k=rt({},M,{path:fc(n,M.path,G.path).path});else{const R=rt({},M.params);for(const P in R)R[P]==null&&delete R[P];k=rt({},M,{params:h(R)}),G.params=h(G.params)}const W=e.resolve(k,G),ne=M.hash||"";W.params=c(d(W.params));const de=l1(i,rt({},M,{hash:n1(ne),path:W.path})),x=s.createHref(de);return rt({fullPath:de,hash:ne,query:i===Hd?z1(M.query):M.query||{}},W,{redirectedFrom:void 0,href:x})}function v(M){return typeof M=="string"?fc(n,M,l.value.path):rt({},M)}function y(M,G){if(u!==M)return vr(8,{from:G,to:M})}function E(M){return A(M)}function b(M){return E(rt(v(M),{replace:!0}))}function I(M){const G=M.matched[M.matched.length-1];if(G&&G.redirect){const{redirect:k}=G;let W=typeof k=="function"?k(M):k;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=v(W):{path:W},W.params={}),rt({query:M.query,hash:M.hash,params:W.path!=null?{}:M.params},W)}}function A(M,G){const k=u=w(M),W=l.value,ne=M.state,de=M.force,x=M.replace===!0,R=I(k);if(R)return A(rt(v(R),{state:typeof R=="object"?rt({},ne,R.state):ne,force:de,replace:x}),G||k);const P=k;P.redirectedFrom=G;let q;return!de&&c1(i,W,k)&&(q=vr(16,{to:P,from:W}),ue(W,W,!0,!1)),(q?Promise.resolve(q):re(P,W)).catch(K=>hi(K)?hi(K,2)?K:oe(K):le(K,P,W)).then(K=>{if(K){if(hi(K,2))return A(rt({replace:x},v(K.to),{state:typeof K.to=="object"?rt({},ne,K.to.state):ne,force:de}),G||P)}else K=Q(P,W,!0,x,ne);return ee(P,W,K),K})}function O(M,G){const k=y(M,G);return k?Promise.reject(k):Promise.resolve()}function D(M){const G=B.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(M):M()}function re(M,G){let k;const[W,ne,de]=q1(M,G);k=gc(W.reverse(),"beforeRouteLeave",M,G);for(const R of W)R.leaveGuards.forEach(P=>{k.push(Ki(P,M,G))});const x=O.bind(null,M,G);return k.push(x),ve(k).then(()=>{k=[];for(const R of r.list())k.push(Ki(R,M,G));return k.push(x),ve(k)}).then(()=>{k=gc(ne,"beforeRouteUpdate",M,G);for(const R of ne)R.updateGuards.forEach(P=>{k.push(Ki(P,M,G))});return k.push(x),ve(k)}).then(()=>{k=[];for(const R of de)if(R.beforeEnter)if(Bn(R.beforeEnter))for(const P of R.beforeEnter)k.push(Ki(P,M,G));else k.push(Ki(R.beforeEnter,M,G));return k.push(x),ve(k)}).then(()=>(M.matched.forEach(R=>R.enterCallbacks={}),k=gc(de,"beforeRouteEnter",M,G,D),k.push(x),ve(k))).then(()=>{k=[];for(const R of o.list())k.push(Ki(R,M,G));return k.push(x),ve(k)}).catch(R=>hi(R,8)?R:Promise.reject(R))}function ee(M,G,k){a.list().forEach(W=>D(()=>W(M,G,k)))}function Q(M,G,k,W,ne){const de=y(M,G);if(de)return de;const x=G===Mi,R=qs?history.state:{};k&&(W||x?s.replace(M.fullPath,rt({scroll:x&&R&&R.scroll},ne)):s.push(M.fullPath,ne)),l.value=M,ue(M,G,k,x),oe()}let ae;function Y(){ae||(ae=s.listen((M,G,k)=>{if(!xe.listening)return;const W=w(M),ne=I(W);if(ne){A(rt(ne,{replace:!0}),W).catch(oo);return}u=W;const de=l.value;qs&&m1(Wd(de.fullPath,k.delta),Ol()),re(W,de).catch(x=>hi(x,12)?x:hi(x,2)?(A(x.to,W).then(R=>{hi(R,20)&&!k.delta&&k.type===Eo.pop&&s.go(-1,!1)}).catch(oo),Promise.reject()):(k.delta&&s.go(-k.delta,!1),le(x,W,de))).then(x=>{x=x||Q(W,de,!1),x&&(k.delta&&!hi(x,8)?s.go(-k.delta,!1):k.type===Eo.pop&&hi(x,20)&&s.go(-1,!1)),ee(W,de,x)}).catch(oo)}))}let H=$r(),F=$r(),J;function le(M,G,k){oe(M);const W=F.list();return W.length?W.forEach(ne=>ne(M,G,k)):console.error(M),Promise.reject(M)}function ye(){return J&&l.value!==Mi?Promise.resolve():new Promise((M,G)=>{H.add([M,G])})}function oe(M){return J||(J=!M,Y(),H.list().forEach(([G,k])=>M?k(M):G()),H.reset()),M}function ue(M,G,k,W){const{scrollBehavior:ne}=t;if(!qs||!ne)return Promise.resolve();const de=!k&&v1(Wd(M.fullPath,0))||(W||!k)&&history.state&&history.state.scroll||null;return Cl().then(()=>ne(M,G,de)).then(x=>x&&_1(x)).catch(x=>le(x,M,G))}const we=M=>s.go(M);let te;const B=new Set,xe={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:p,resolve:w,options:t,push:E,replace:b,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:F.add,isReady:ye,install(M){const G=this;M.component("RouterLink",K1),M.component("RouterView",V1),M.config.globalProperties.$router=G,Object.defineProperty(M.config.globalProperties,"$route",{enumerable:!0,get:()=>L(l)}),qs&&!te&&l.value===Mi&&(te=!0,E(s.location).catch(ne=>{}));const k={};for(const ne in Mi)Object.defineProperty(k,ne,{get:()=>l.value[ne],enumerable:!0});M.provide(kl,G),M.provide(Yp,ep(k)),M.provide(uu,l);const W=M.unmount;B.add(M),M.unmount=function(){B.delete(M),B.size<1&&(u=Mi,ae&&ae(),ae=null,l.value=Mi,te=!1,J=!1),W()}}};function ve(M){return M.reduce((G,k)=>G.then(()=>D(k)),Promise.resolve())}return xe}function q1(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(u=>mr(u,a))?i.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>mr(u,l))||s.push(l))}return[n,i,s]}function Ai(){return ni(kl)}function Xp(t,e){return function(){return t.apply(e,arguments)}}const{toString:Z1}=Object.prototype,{getPrototypeOf:ih}=Object,Ll=(t=>e=>{const n=Z1.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Kn=t=>(t=t.toLowerCase(),e=>Ll(e)===t),Ml=t=>e=>typeof e===t,{isArray:Ir}=Array,wo=Ml("undefined");function J1(t){return t!==null&&!wo(t)&&t.constructor!==null&&!wo(t.constructor)&&vn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vp=Kn("ArrayBuffer");function Q1(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Vp(t.buffer),e}const eb=Ml("string"),vn=Ml("function"),Hp=Ml("number"),Dl=t=>t!==null&&typeof t=="object",tb=t=>t===!0||t===!1,Da=t=>{if(Ll(t)!=="object")return!1;const e=ih(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nb=Kn("Date"),ib=Kn("File"),sb=Kn("Blob"),rb=Kn("FileList"),ob=t=>Dl(t)&&vn(t.pipe),ab=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||vn(t.append)&&((e=Ll(t))==="formdata"||e==="object"&&vn(t.toString)&&t.toString()==="[object FormData]"))},lb=Kn("URLSearchParams"),[cb,ub,hb,db]=["ReadableStream","Request","Response","Headers"].map(Kn),fb=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bo(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),Ir(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(i=0;i<o;i++)a=r[i],e.call(null,t[a],a,t)}}function qp(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const ys=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Zp=t=>!wo(t)&&t!==ys;function hu(){const{caseless:t}=Zp(this)&&this||{},e={},n=(i,s)=>{const r=t&&qp(e,s)||s;Da(e[r])&&Da(i)?e[r]=hu(e[r],i):Da(i)?e[r]=hu({},i):Ir(i)?e[r]=i.slice():e[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Bo(arguments[i],n);return e}const gb=(t,e,n,{allOwnKeys:i}={})=>(Bo(e,(s,r)=>{n&&vn(s)?t[r]=Xp(s,n):t[r]=s},{allOwnKeys:i}),t),pb=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_b=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},mb=(t,e,n,i)=>{let s,r,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)o=s[r],(!i||i(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&ih(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},vb=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},yb=t=>{if(!t)return null;if(Ir(t))return t;let e=t.length;if(!Hp(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},bb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ih(Uint8Array)),Eb=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const r=s.value;e.call(t,r[0],r[1])}},wb=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},xb=Kn("HTMLFormElement"),Cb=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),tf=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Sb=Kn("RegExp"),Jp=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Bo(n,(s,r)=>{let o;(o=e(s,r,t))!==!1&&(i[r]=o||s)}),Object.defineProperties(t,i)},Rb=t=>{Jp(t,(e,n)=>{if(vn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(vn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Tb=(t,e)=>{const n={},i=s=>{s.forEach(r=>{n[r]=!0})};return Ir(t)?i(t):i(String(t).split(e)),n},Ib=()=>{},Ab=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,pc="abcdefghijklmnopqrstuvwxyz",nf="0123456789",Qp={DIGIT:nf,ALPHA:pc,ALPHA_DIGIT:pc+pc.toUpperCase()+nf},Pb=(t=16,e=Qp.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function Ob(t){return!!(t&&vn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const kb=t=>{const e=new Array(10),n=(i,s)=>{if(Dl(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const r=Ir(i)?[]:{};return Bo(i,(o,a)=>{const l=n(o,s+1);!wo(l)&&(r[a]=l)}),e[s]=void 0,r}}return i};return n(t,0)},Lb=Kn("AsyncFunction"),Mb=t=>t&&(Dl(t)||vn(t))&&vn(t.then)&&vn(t.catch),e_=((t,e)=>t?setImmediate:e?((n,i)=>(ys.addEventListener("message",({source:s,data:r})=>{s===ys&&r===n&&i.length&&i.shift()()},!1),s=>{i.push(s),ys.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vn(ys.postMessage)),Db=typeof queueMicrotask<"u"?queueMicrotask.bind(ys):typeof process<"u"&&process.nextTick||e_,U={isArray:Ir,isArrayBuffer:Vp,isBuffer:J1,isFormData:ab,isArrayBufferView:Q1,isString:eb,isNumber:Hp,isBoolean:tb,isObject:Dl,isPlainObject:Da,isReadableStream:cb,isRequest:ub,isResponse:hb,isHeaders:db,isUndefined:wo,isDate:nb,isFile:ib,isBlob:sb,isRegExp:Sb,isFunction:vn,isStream:ob,isURLSearchParams:lb,isTypedArray:bb,isFileList:rb,forEach:Bo,merge:hu,extend:gb,trim:fb,stripBOM:pb,inherits:_b,toFlatObject:mb,kindOf:Ll,kindOfTest:Kn,endsWith:vb,toArray:yb,forEachEntry:Eb,matchAll:wb,isHTMLForm:xb,hasOwnProperty:tf,hasOwnProp:tf,reduceDescriptors:Jp,freezeMethods:Rb,toObjectSet:Tb,toCamelCase:Cb,noop:Ib,toFiniteNumber:Ab,findKey:qp,global:ys,isContextDefined:Zp,ALPHABET:Qp,generateString:Pb,isSpecCompliantForm:Ob,toJSONObject:kb,isAsyncFn:Lb,isThenable:Mb,setImmediate:e_,asap:Db};function Ge(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}U.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const t_=Ge.prototype,n_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{n_[t]={value:t}});Object.defineProperties(Ge,n_);Object.defineProperty(t_,"isAxiosError",{value:!0});Ge.from=(t,e,n,i,s,r)=>{const o=Object.create(t_);return U.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ge.call(o,t.message,e,n,i,s),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};const Fb=null;function du(t){return U.isPlainObject(t)||U.isArray(t)}function i_(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function sf(t,e,n){return t?t.concat(e).map(function(s,r){return s=i_(s),!n&&r?"["+s+"]":s}).join(n?".":""):e}function Nb(t){return U.isArray(t)&&!t.some(du)}const $b=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function Fl(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!U.isUndefined(m[p])});const i=n.metaTokens,s=n.visitor||c,r=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(U.isDate(g))return g.toISOString();if(!l&&U.isBlob(g))throw new Ge("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(g)||U.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,p,m){let w=g;if(g&&!m&&typeof g=="object"){if(U.endsWith(p,"{}"))p=i?p:p.slice(0,-2),g=JSON.stringify(g);else if(U.isArray(g)&&Nb(g)||(U.isFileList(g)||U.endsWith(p,"[]"))&&(w=U.toArray(g)))return p=i_(p),w.forEach(function(y,E){!(U.isUndefined(y)||y===null)&&e.append(o===!0?sf([p],E,r):o===null?p:p+"[]",u(y))}),!1}return du(g)?!0:(e.append(sf(m,p,r),u(g)),!1)}const h=[],d=Object.assign($b,{defaultVisitor:c,convertValue:u,isVisitable:du});function f(g,p){if(!U.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(g),U.forEach(g,function(w,v){(!(U.isUndefined(w)||w===null)&&s.call(e,w,U.isString(v)?v.trim():v,p,d))===!0&&f(w,p?p.concat(v):[v])}),h.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return f(t),e}function rf(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function sh(t,e){this._pairs=[],t&&Fl(t,this,e)}const s_=sh.prototype;s_.append=function(e,n){this._pairs.push([e,n])};s_.toString=function(e){const n=e?function(i){return e.call(this,i,rf)}:rf;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Gb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function r_(t,e,n){if(!e)return t;const i=n&&n.encode||Gb,s=n&&n.serialize;let r;if(s?r=s(e,n):r=U.isURLSearchParams(e)?e.toString():new sh(e,n).toString(i),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class of{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(i){i!==null&&e(i)})}}const o_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zb=typeof URLSearchParams<"u"?URLSearchParams:sh,Wb=typeof FormData<"u"?FormData:null,Bb=typeof Blob<"u"?Blob:null,Ub={isBrowser:!0,classes:{URLSearchParams:zb,FormData:Wb,Blob:Bb},protocols:["http","https","file","blob","url","data"]},rh=typeof window<"u"&&typeof document<"u",fu=typeof navigator=="object"&&navigator||void 0,Kb=rh&&(!fu||["ReactNative","NativeScript","NS"].indexOf(fu.product)<0),jb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yb=rh&&window.location.href||"http://localhost",Xb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rh,hasStandardBrowserEnv:Kb,hasStandardBrowserWebWorkerEnv:jb,navigator:fu,origin:Yb},Symbol.toStringTag,{value:"Module"})),an={...Xb,...Ub};function Vb(t,e){return Fl(t,new an.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,r){return an.isNode&&U.isBuffer(n)?(this.append(i,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function Hb(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function qb(t){const e={},n=Object.keys(t);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],e[r]=t[r];return e}function a_(t){function e(n,i,s,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=n.length;return o=!o&&U.isArray(s)?s.length:o,l?(U.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!a):((!s[o]||!U.isObject(s[o]))&&(s[o]=[]),e(n,i,s[o],r)&&U.isArray(s[o])&&(s[o]=qb(s[o])),!a)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(i,s)=>{e(Hb(i),s,n,0)}),n}return null}function Zb(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(t)}const Uo={transitional:o_,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,r=U.isObject(e);if(r&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return s?JSON.stringify(a_(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Vb(e,this.formSerializer).toString();if((a=U.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Fl(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(n.setContentType("application/json",!1),Zb(e)):e}],transformResponse:[function(e){const n=this.transitional||Uo.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(i&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Ge.from(a,Ge.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{Uo.headers[t]={}});const Jb=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qb=t=>{const e={};let n,i,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),i=o.substring(s+1).trim(),!(!n||e[n]&&Jb[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},af=Symbol("internals");function Gr(t){return t&&String(t).trim().toLowerCase()}function Fa(t){return t===!1||t==null?t:U.isArray(t)?t.map(Fa):String(t)}function eE(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const tE=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _c(t,e,n,i,s){if(U.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!U.isString(e)){if(U.isString(i))return e.indexOf(i)!==-1;if(U.isRegExp(i))return i.test(e)}}function nE(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function iE(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(s,r,o){return this[i].call(this,e,s,r,o)},configurable:!0})})}class ln{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function r(a,l,u){const c=Gr(l);if(!c)throw new Error("header name must be a non-empty string");const h=U.findKey(s,c);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=Fa(a))}const o=(a,l)=>U.forEach(a,(u,c)=>r(u,c,l));if(U.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(U.isString(e)&&(e=e.trim())&&!tE(e))o(Qb(e),n);else if(U.isHeaders(e))for(const[a,l]of e.entries())r(l,a,i);else e!=null&&r(n,e,i);return this}get(e,n){if(e=Gr(e),e){const i=U.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return eE(s);if(U.isFunction(n))return n.call(this,s,i);if(U.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Gr(e),e){const i=U.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||_c(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function r(o){if(o=Gr(o),o){const a=U.findKey(i,o);a&&(!n||_c(i,i[a],a,n))&&(delete i[a],s=!0)}}return U.isArray(e)?e.forEach(r):r(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const r=n[i];(!e||_c(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const n=this,i={};return U.forEach(this,(s,r)=>{const o=U.findKey(i,r);if(o){n[o]=Fa(s),delete n[r];return}const a=e?nE(r):String(r).trim();a!==r&&delete n[r],n[a]=Fa(s),i[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&U.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[af]=this[af]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Gr(o);i[a]||(iE(s,o),i[a]=!0)}return U.isArray(e)?e.forEach(r):r(e),this}}ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(ln.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});U.freezeMethods(ln);function mc(t,e){const n=this||Uo,i=e||n,s=ln.from(i.headers);let r=i.data;return U.forEach(t,function(a){r=a.call(n,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function l_(t){return!!(t&&t.__CANCEL__)}function Ar(t,e,n){Ge.call(this,t??"canceled",Ge.ERR_CANCELED,e,n),this.name="CanceledError"}U.inherits(Ar,Ge,{__CANCEL__:!0});function c_(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Ge("Request failed with status code "+n.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function sE(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function rE(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=i[r];o||(o=u),n[s]=l,i[s]=u;let h=r,d=0;for(;h!==s;)d+=n[h++],h=h%t;if(s=(s+1)%t,s===r&&(r=(r+1)%t),u-o<e)return;const f=c&&u-c;return f?Math.round(d*1e3/f):void 0}}function oE(t,e){let n=0,i=1e3/e,s,r;const o=(u,c=Date.now())=>{n=c,s=null,r&&(clearTimeout(r),r=null),t.apply(null,u)};return[(...u)=>{const c=Date.now(),h=c-n;h>=i?o(u,c):(s=u,r||(r=setTimeout(()=>{r=null,o(s)},i-h)))},()=>s&&o(s)]}const qa=(t,e,n=3)=>{let i=0;const s=rE(50,250);return oE(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-i,u=s(l),c=o<=a;i=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},lf=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},cf=t=>(...e)=>U.asap(()=>t(...e)),aE=an.hasStandardBrowserEnv?function(){const e=an.navigator&&/(msie|trident)/i.test(an.navigator.userAgent),n=document.createElement("a");let i;function s(r){let o=r;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(o){const a=U.isString(o)?s(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),lE=an.hasStandardBrowserEnv?{write(t,e,n,i,s,r){const o=[t+"="+encodeURIComponent(e)];U.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),U.isString(i)&&o.push("path="+i),U.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cE(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function uE(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function u_(t,e){return t&&!cE(e)?uE(t,e):e}const uf=t=>t instanceof ln?{...t}:t;function Ps(t,e){e=e||{};const n={};function i(u,c,h){return U.isPlainObject(u)&&U.isPlainObject(c)?U.merge.call({caseless:h},u,c):U.isPlainObject(c)?U.merge({},c):U.isArray(c)?c.slice():c}function s(u,c,h){if(U.isUndefined(c)){if(!U.isUndefined(u))return i(void 0,u,h)}else return i(u,c,h)}function r(u,c){if(!U.isUndefined(c))return i(void 0,c)}function o(u,c){if(U.isUndefined(c)){if(!U.isUndefined(u))return i(void 0,u)}else return i(void 0,c)}function a(u,c,h){if(h in e)return i(u,c);if(h in t)return i(void 0,u)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>s(uf(u),uf(c),!0)};return U.forEach(Object.keys(Object.assign({},t,e)),function(c){const h=l[c]||s,d=h(t[c],e[c],c);U.isUndefined(d)&&h!==a||(n[c]=d)}),n}const h_=t=>{const e=Ps({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=ln.from(o),e.url=r_(u_(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(U.isFormData(n)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...c]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...c].join("; "))}}if(an.hasStandardBrowserEnv&&(i&&U.isFunction(i)&&(i=i(e)),i||i!==!1&&aE(e.url))){const u=s&&r&&lE.read(r);u&&o.set(s,u)}return e},hE=typeof XMLHttpRequest<"u",dE=hE&&function(t){return new Promise(function(n,i){const s=h_(t);let r=s.data;const o=ln.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,c,h,d,f,g;function p(){f&&f(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function w(){if(!m)return;const y=ln.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:y,config:t,request:m};c_(function(A){n(A),p()},function(A){i(A),p()},b),m=null}"onloadend"in m?m.onloadend=w:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(w)},m.onabort=function(){m&&(i(new Ge("Request aborted",Ge.ECONNABORTED,t,m)),m=null)},m.onerror=function(){i(new Ge("Network Error",Ge.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||o_;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),i(new Ge(E,b.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,t,m)),m=null},r===void 0&&o.setContentType(null),"setRequestHeader"in m&&U.forEach(o.toJSON(),function(E,b){m.setRequestHeader(b,E)}),U.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),a&&a!=="json"&&(m.responseType=s.responseType),u&&([d,g]=qa(u,!0),m.addEventListener("progress",d)),l&&m.upload&&([h,f]=qa(l),m.upload.addEventListener("progress",h),m.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(c=y=>{m&&(i(!y||y.type?new Ar(null,t,m):y),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const v=sE(s.url);if(v&&an.protocols.indexOf(v)===-1){i(new Ge("Unsupported protocol "+v+":",Ge.ERR_BAD_REQUEST,t));return}m.send(r||null)})},fE=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,s;const r=function(u){if(!s){s=!0,a();const c=u instanceof Error?u:this.reason;i.abort(c instanceof Ge?c:new Ar(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,r(new Ge(`timeout ${e} of ms exceeded`,Ge.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(r):u.removeEventListener("abort",r)}),t=null)};t.forEach(u=>u.addEventListener("abort",r));const{signal:l}=i;return l.unsubscribe=()=>U.asap(a),l}},gE=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,s;for(;i<n;)s=i+e,yield t.slice(i,s),i=s},pE=async function*(t,e){for await(const n of _E(t))yield*gE(n,e)},_E=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},hf=(t,e,n,i)=>{const s=pE(t,e);let r=0,o,a=l=>{o||(o=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await s.next();if(u){a(),l.close();return}let h=c.byteLength;if(n){let d=r+=h;n(d)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Nl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",d_=Nl&&typeof ReadableStream=="function",mE=Nl&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),f_=(t,...e)=>{try{return!!t(...e)}catch{return!1}},vE=d_&&f_(()=>{let t=!1;const e=new Request(an.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),df=64*1024,gu=d_&&f_(()=>U.isReadableStream(new Response("").body)),Za={stream:gu&&(t=>t.body)};Nl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Za[e]&&(Za[e]=U.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new Ge(`Response type '${e}' is not supported`,Ge.ERR_NOT_SUPPORT,i)})})})(new Response);const yE=async t=>{if(t==null)return 0;if(U.isBlob(t))return t.size;if(U.isSpecCompliantForm(t))return(await new Request(an.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(U.isArrayBufferView(t)||U.isArrayBuffer(t))return t.byteLength;if(U.isURLSearchParams(t)&&(t=t+""),U.isString(t))return(await mE(t)).byteLength},bE=async(t,e)=>{const n=U.toFiniteNumber(t.getContentLength());return n??yE(e)},EE=Nl&&(async t=>{let{url:e,method:n,data:i,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:d}=h_(t);u=u?(u+"").toLowerCase():"text";let f=fE([s,r&&r.toAbortSignal()],o),g;const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&vE&&n!=="get"&&n!=="head"&&(m=await bE(c,i))!==0){let b=new Request(e,{method:"POST",body:i,duplex:"half"}),I;if(U.isFormData(i)&&(I=b.headers.get("content-type"))&&c.setContentType(I),b.body){const[A,O]=lf(m,qa(cf(l)));i=hf(b.body,df,A,O)}}U.isString(h)||(h=h?"include":"omit");const w="credentials"in Request.prototype;g=new Request(e,{...d,signal:f,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:w?h:void 0});let v=await fetch(g);const y=gu&&(u==="stream"||u==="response");if(gu&&(a||y&&p)){const b={};["status","statusText","headers"].forEach(D=>{b[D]=v[D]});const I=U.toFiniteNumber(v.headers.get("content-length")),[A,O]=a&&lf(I,qa(cf(a),!0))||[];v=new Response(hf(v.body,df,A,()=>{O&&O(),p&&p()}),b)}u=u||"text";let E=await Za[U.findKey(Za,u)||"text"](v,t);return!y&&p&&p(),await new Promise((b,I)=>{c_(b,I,{data:E,headers:ln.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:g})})}catch(w){throw p&&p(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,t,g),{cause:w.cause||w}):Ge.from(w,w&&w.code,t,g)}}),pu={http:Fb,xhr:dE,fetch:EE};U.forEach(pu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ff=t=>`- ${t}`,wE=t=>U.isFunction(t)||t===null||t===!1,g_={getAdapter:t=>{t=U.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let r=0;r<e;r++){n=t[r];let o;if(i=n,!wE(n)&&(i=pu[(o=String(n)).toLowerCase()],i===void 0))throw new Ge(`Unknown adapter '${o}'`);if(i)break;s[o||"#"+r]=i}if(!i){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(ff).join(`
`):" "+ff(r[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:pu};function vc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ar(null,t)}function gf(t){return vc(t),t.headers=ln.from(t.headers),t.data=mc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),g_.getAdapter(t.adapter||Uo.adapter)(t).then(function(i){return vc(t),i.data=mc.call(t,t.transformResponse,i),i.headers=ln.from(i.headers),i},function(i){return l_(i)||(vc(t),i&&i.response&&(i.response.data=mc.call(t,t.transformResponse,i.response),i.response.headers=ln.from(i.response.headers))),Promise.reject(i)})}const p_="1.7.7",oh={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{oh[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const pf={};oh.transitional=function(e,n,i){function s(r,o){return"[Axios v"+p_+"] Transitional option '"+r+"'"+o+(i?". "+i:"")}return(r,o,a)=>{if(e===!1)throw new Ge(s(o," has been removed"+(n?" in "+n:"")),Ge.ERR_DEPRECATED);return n&&!pf[o]&&(pf[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(r,o,a):!0}};function xE(t,e,n){if(typeof t!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const r=i[s],o=e[r];if(o){const a=t[r],l=a===void 0||o(a,r,t);if(l!==!0)throw new Ge("option "+r+" must be "+l,Ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ge("Unknown option "+r,Ge.ERR_BAD_OPTION)}}const _u={assertOptions:xE,validators:oh},Di=_u.validators;class Ts{constructor(e){this.defaults=e,this.interceptors={request:new of,response:new of}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ps(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:r}=n;i!==void 0&&_u.assertOptions(i,{silentJSONParsing:Di.transitional(Di.boolean),forcedJSONParsing:Di.transitional(Di.boolean),clarifyTimeoutError:Di.transitional(Di.boolean)},!1),s!=null&&(U.isFunction(s)?n.paramsSerializer={serialize:s}:_u.assertOptions(s,{encode:Di.function,serialize:Di.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&U.merge(r.common,r[n.method]);r&&U.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),n.headers=ln.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let c,h=0,d;if(!l){const g=[gf.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,u),d=g.length,c=Promise.resolve(n);h<d;)c=c.then(g[h++],g[h++]);return c}d=a.length;let f=n;for(h=0;h<d;){const g=a[h++],p=a[h++];try{f=g(f)}catch(m){p.call(this,m);break}}try{c=gf.call(this,f)}catch(g){return Promise.reject(g)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(e){e=Ps(this.defaults,e);const n=u_(e.baseURL,e.url);return r_(n,e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(e){Ts.prototype[e]=function(n,i){return this.request(Ps(i||{},{method:e,url:n,data:(i||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(i){return function(r,o,a){return this.request(Ps(a||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}Ts.prototype[e]=n(),Ts.prototype[e+"Form"]=n(!0)});class ah{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{i.subscribe(a),r=a}).then(s);return o.cancel=function(){i.unsubscribe(r)},o},e(function(r,o,a){i.reason||(i.reason=new Ar(r,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new ah(function(s){e=s}),cancel:e}}}function CE(t){return function(n){return t.apply(null,n)}}function SE(t){return U.isObject(t)&&t.isAxiosError===!0}const mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mu).forEach(([t,e])=>{mu[e]=t});function __(t){const e=new Ts(t),n=Xp(Ts.prototype.request,e);return U.extend(n,Ts.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return __(Ps(t,s))},n}const De=__(Uo);De.Axios=Ts;De.CanceledError=Ar;De.CancelToken=ah;De.isCancel=l_;De.VERSION=p_;De.toFormData=Fl;De.AxiosError=Ge;De.Cancel=De.CanceledError;De.all=function(e){return Promise.all(e)};De.spread=CE;De.isAxiosError=SE;De.mergeConfig=Ps;De.AxiosHeaders=ln;De.formToJSON=t=>a_(U.isHTMLForm(t)?new FormData(t):t);De.getAdapter=g_.getAdapter;De.HttpStatusCode=mu;De.default=De;class Pi{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const yr={PROPERTYCHANGE:"propertychange"};class lh{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function RE(t,e,n){let i,s;n=n||bi;let r=0,o=t.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+n(t[i],e),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function bi(t,e){return t>e?1:t<e?-1:0}function ch(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let s=1;s<i;++s){const r=t[s];if(r===e)return s;if(r<e)return n(e,t[s-1],r)>0?s-1:s}return i-1}if(n>0){for(let s=1;s<i;++s)if(t[s]<e)return s-1;return i-1}if(n<0){for(let s=1;s<i;++s)if(t[s]<=e)return s;return i-1}for(let s=1;s<i;++s){if(t[s]==e)return s;if(t[s]<e)return t[s-1]-e<e-t[s]?s-1:s}return i-1}function TE(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function $l(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let s=0;s<i;s++)t[t.length]=n[s]}function as(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function IE(t,e,n){const i=e||bi;return t.every(function(s,r){if(r===0)return!0;const o=i(t[r-1],s);return!(o>0||o===0)})}function xo(){return!0}function Gl(){return!1}function br(){}function m_(t){let e,n,i;return function(){const s=Array.prototype.slice.call(arguments);return(!n||this!==i||!as(s,n))&&(i=this,n=s,e=t.apply(this,arguments)),e}}function AE(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function Ko(t){for(const e in t)delete t[e]}function Er(t){let e;for(e in t)return!1;return!e}class zl extends lh{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(n)||s.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=n?new Pi(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let u=0,c=s.length;u<c;++u)if("handleEvent"in s[u]?l=s[u].handleEvent(r):l=s[u].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,br);delete o[i]}return l}disposeInternal(){this.listeners_&&Ko(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const s=i.indexOf(n);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=br,++this.pendingRemovals_[e]):(i.splice(s,1),i.length===0&&delete this.listeners_[e]))}}const Ne={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function je(t,e,n,i,s){if(s){const o=n;n=function(){t.removeEventListener(e,n),o.apply(i??this,arguments)}}else i&&i!==t&&(n=n.bind(i));const r={target:t,type:e,listener:n};return t.addEventListener(e,n),r}function Ja(t,e,n,i){return je(t,e,n,i,!0)}function lt(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Ko(t))}class jo extends zl{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ne.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=je(this,e[r],n);return s}return je(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=Ja(this,e[r],n)}else i=Ja(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)PE(i);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],n);else this.removeEventListener(e,n)}}jo.prototype.on;jo.prototype.once;jo.prototype.un;function PE(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)lt(t[e]);else lt(t)}function qe(){throw new Error("Unimplemented abstract method.")}let OE=0;function it(t){return t.ol_uid||(t.ol_uid=String(++OE))}class _f extends Pi{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class jn extends jo{constructor(e){super(),this.on,this.once,this.un,it(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new _f(i,e,n)),i=yr.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new _f(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const s=this.values_||(this.values_={});if(i)s[e]=n;else{const r=s[e];s[e]=n,r!==n&&this.notify(e,r)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Er(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}const Qt={ADD:"add",REMOVE:"remove"},mf={LENGTH:"length"};class ca extends Pi{constructor(e,n,i){super(e),this.element=n,this.index=i}}class Qn extends jn{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,s=n.length;i<s;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(mf.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new ca(Qt.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,s=n.length;i<s;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ca(Qt.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const s=this.array_[e];this.array_[e]=n,this.dispatchEvent(new ca(Qt.REMOVE,s,e)),this.dispatchEvent(new ca(Qt.ADD,n,e))}updateLength_(){this.set(mf.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function He(t,e){if(!t)throw new Error(e)}class lo extends jn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new lo(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(lt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=je(e,Ne.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?kE(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function kE(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(He(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}new Array(6);function zn(){return[1,0,0,1,0,0]}function LE(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Lt(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Ri(t,e,n,i,s,r,o,a){const l=Math.sin(r),u=Math.cos(r);return t[0]=i*u,t[1]=s*l,t[2]=-i*l,t[3]=s*u,t[4]=o*i*u-a*i*l+e,t[5]=o*s*l+a*s*u+n,t}function v_(t,e){const n=ME(e);He(n!==0,"Transformation matrix cannot be inverted");const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-s/n,t[2]=-r/n,t[3]=i/n,t[4]=(r*l-o*a)/n,t[5]=-(i*l-s*a)/n,t}function ME(t){return t[0]*t[3]-t[1]*t[2]}const vf=[1e6,1e6,1e6,1e6,2,2];function DE(t){return"matrix("+t.map((n,i)=>Math.round(n*vf[i])/vf[i]).join(", ")+")"}const Ot={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function yf(t){const e=In();for(let n=0,i=t.length;n<i;++n)co(e,t[n]);return e}function uh(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function y_(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function hh(t,e,n){let i,s;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?s=t[1]-n:t[3]<n?s=n-t[3]:s=0,i*i+s*s}function wr(t,e){return b_(t,e[0],e[1])}function bs(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function b_(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function vu(t,e){const n=t[0],i=t[1],s=t[2],r=t[3],o=e[0],a=e[1];let l=Ot.UNKNOWN;return o<n?l=l|Ot.LEFT:o>s&&(l=l|Ot.RIGHT),a<i?l=l|Ot.BELOW:a>r&&(l=l|Ot.ABOVE),l===Ot.UNKNOWN&&(l=Ot.INTERSECTING),l}function In(){return[1/0,1/0,-1/0,-1/0]}function ns(t,e,n,i,s){return s?(s[0]=t,s[1]=e,s[2]=n,s[3]=i,s):[t,e,n,i]}function Wl(t){return ns(1/0,1/0,-1/0,-1/0,t)}function E_(t,e){const n=t[0],i=t[1];return ns(n,i,n,i,e)}function dh(t,e,n,i,s){const r=Wl(s);return w_(r,t,e,n,i)}function Co(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function FE(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function co(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function w_(t,e,n,i,s){for(;n<i;n+=s)NE(t,e[n],e[n+1]);return t}function NE(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function x_(t,e){let n;return n=e(Bl(t)),n||(n=e(Ul(t)),n)||(n=e(Kl(t)),n)||(n=e(Ms(t)),n)?n:!1}function So(t){let e=0;return jl(t)||(e=et(t)*Ut(t)),e}function Bl(t){return[t[0],t[1]]}function Ul(t){return[t[2],t[1]]}function Os(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function $E(t,e){let n;if(e==="bottom-left")n=Bl(t);else if(e==="bottom-right")n=Ul(t);else if(e==="top-left")n=Ms(t);else if(e==="top-right")n=Kl(t);else throw new Error("Invalid corner");return n}function yu(t,e,n,i,s){const[r,o,a,l,u,c,h,d]=GE(t,e,n,i);return ns(Math.min(r,a,u,h),Math.min(o,l,c,d),Math.max(r,a,u,h),Math.max(o,l,c,d),s)}function GE(t,e,n,i){const s=e*i[0]/2,r=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=s*o,u=s*a,c=r*o,h=r*a,d=t[0],f=t[1];return[d-l+h,f-u-c,d-l-h,f-u+c,d+l-h,f+u+c,d+l+h,f+u-c,d-l+h,f-u-c]}function Ut(t){return t[3]-t[1]}function $n(t,e,n){const i=n||In();return nn(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Wl(i),i}function Ms(t){return[t[0],t[3]]}function Kl(t){return[t[2],t[3]]}function et(t){return t[2]-t[0]}function nn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function jl(t){return t[2]<t[0]||t[3]<t[1]}function zE(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function WE(t,e,n){let i=!1;const s=vu(t,e),r=vu(t,n);if(s===Ot.INTERSECTING||r===Ot.INTERSECTING)i=!0;else{const o=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],d=n[0],f=n[1],g=(f-h)/(d-c);let p,m;r&Ot.ABOVE&&!(s&Ot.ABOVE)&&(p=d-(f-u)/g,i=p>=o&&p<=l),!i&&r&Ot.RIGHT&&!(s&Ot.RIGHT)&&(m=f-(d-l)*g,i=m>=a&&m<=u),!i&&r&Ot.BELOW&&!(s&Ot.BELOW)&&(p=d-(f-a)/g,i=p>=o&&p<=l),!i&&r&Ot.LEFT&&!(s&Ot.LEFT)&&(m=f-(d-o)*g,i=m>=a&&m<=u)}return i}function C_(t,e){const n=e.getExtent(),i=Os(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const s=et(n),o=Math.floor((i[0]-n[0])/s)*s;t[0]-=o,t[2]-=o}return t}function fh(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];C_(t,e);const s=et(i);if(et(t)>s&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+s,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-s,t[3]]]}return[t]}const gh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class S_{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||gh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Yo=6378137,nr=Math.PI*Yo,BE=[-nr,-nr,nr,nr],UE=[-180,-85,180,85],ua=Yo*Math.log(Math.tan(Math.PI/2));class zs extends S_{constructor(e){super({code:e,units:"m",extent:BE,global:!0,worldExtent:UE,getPointResolution:function(n,i){return n/Math.cosh(i[1]/Yo)}})}}const bf=[new zs("EPSG:3857"),new zs("EPSG:102100"),new zs("EPSG:102113"),new zs("EPSG:900913"),new zs("http://www.opengis.net/def/crs/EPSG/0/3857"),new zs("http://www.opengis.net/gml/srs/epsg.xml#3857")];function KE(t,e,n,i){const s=t.length;n=n>1?n:2,i=i??n,e===void 0&&(n>2?e=t.slice():e=new Array(s));for(let r=0;r<s;r+=i){e[r]=nr*t[r]/180;let o=Yo*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));o>ua?o=ua:o<-ua&&(o=-ua),e[r+1]=o}return e}function jE(t,e,n,i){const s=t.length;n=n>1?n:2,i=i??n,e===void 0&&(n>2?e=t.slice():e=new Array(s));for(let r=0;r<s;r+=i)e[r]=180*t[r]/nr,e[r+1]=360*Math.atan(Math.exp(t[r+1]/Yo))/Math.PI-90;return e}const YE=6378137,Ef=[-180,-90,180,90],XE=Math.PI*YE/180;class hs extends S_{constructor(e,n){super({code:e,units:"degrees",extent:Ef,axisOrientation:n,global:!0,metersPerUnit:XE,worldExtent:Ef})}}const wf=[new hs("CRS:84"),new hs("EPSG:4326","neu"),new hs("urn:ogc:def:crs:OGC:1.3:CRS84"),new hs("urn:ogc:def:crs:OGC:2:84"),new hs("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new hs("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new hs("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let bu={};function VE(t){return bu[t]||bu[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function HE(t,e){bu[t]=e}let hr={};function Qa(t,e,n){const i=t.getCode(),s=e.getCode();i in hr||(hr[i]={}),hr[i][s]=n}function qE(t,e){let n;return t in hr&&e in hr[t]&&(n=hr[t][e]),n}function _t(t,e,n){return Math.min(Math.max(t,e),n)}function ZE(t,e,n,i,s,r){const o=s-n,a=r-i;if(o!==0||a!==0){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=s,i=r):l>0&&(n+=o*l,i+=a*l)}return dr(t,e,n,i)}function dr(t,e,n,i){const s=n-t,r=i-e;return s*s+r*r}function JE(t){const e=t.length;for(let i=0;i<e;i++){let s=i,r=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(t[a][i]);l>r&&(r=l,s=a)}if(r===0)return null;const o=t[s];t[s]=t[i],t[i]=o;for(let a=i+1;a<e;a++){const l=-t[a][i]/t[i][i];for(let u=i;u<e+1;u++)i==u?t[a][u]=0:t[a][u]+=l*t[i][u]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let s=i-1;s>=0;s--)t[s][e]-=t[s][i]*n[i]}return n}function Na(t){return t*Math.PI/180}function fr(t,e){const n=t%e;return n*e<0?n+e:n}function gn(t,e,n){return t+n*(e-t)}function ph(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function ha(t,e){return Math.floor(ph(t,e))}function da(t,e){return Math.ceil(ph(t,e))}function QE(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function el(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function _h(t,e){const n=Math.cos(e),i=Math.sin(e),s=t[0]*n-t[1]*i,r=t[1]*n+t[0]*i;return t[0]=s,t[1]=r,t}function ew(t,e){return t[0]*=e,t[1]*=e,t}function R_(t,e){if(e.canWrapX()){const n=et(e.getExtent()),i=tw(t,e,n);i&&(t[0]-=i*n)}return t}function tw(t,e,n){const i=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||et(i),s=Math.floor((t[0]-i[0])/n)),s}const nw=63710088e-1;function xf(t,e,n){n=n||nw;const i=Na(t[1]),s=Na(e[1]),r=(s-i)/2,o=Na(e[0]-t[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function T_(...t){console.warn(...t)}let Eu=!0;function iw(t){Eu=!1}function mh(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function I_(t,e){if(e!==void 0&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function sw(t){HE(t.getCode(),t),Qa(t,t,mh)}function rw(t){t.forEach(sw)}function An(t){return typeof t=="string"?VE(t):t||null}function Cf(t,e,n,i){t=An(t);let s;const r=t.getPointResolutionFunc();if(r)s=r(e,n);else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")s=e;else{const a=yh(t,An("EPSG:4326"));if(a===I_&&o!=="degrees")s=e*t.getMetersPerUnit();else{let u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];u=a(u,u,2);const c=xf(u.slice(0,2),u.slice(2,4)),h=xf(u.slice(4,6),u.slice(6,8));s=(c+h)/2}const l=t.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function Sf(t){rw(t),t.forEach(function(e){t.forEach(function(n){e!==n&&Qa(e,n,mh)})})}function ow(t,e,n,i){t.forEach(function(s){e.forEach(function(r){Qa(s,r,n),Qa(r,s,i)})})}function vh(t,e){return t?typeof t=="string"?An(t):t:An(e)}function Yr(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||yh(t,e)===mh)&&n}function yh(t,e){const n=t.getCode(),i=e.getCode();let s=qE(n,i);return s||(s=I_),s}function tl(t,e){const n=An(t),i=An(e);return yh(n,i)}function $a(t,e,n){return tl(e,n)(t,void 0,t.length)}function wu(t,e){return t}function gi(t,e){return Eu&&!el(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Eu=!1,T_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function A_(t,e){return t}function Hi(t,e){return t}function aw(){Sf(bf),Sf(wf),ow(wf,bf,KE,jE)}aw();function es(t,e,n,i,s,r,o){r=r||[],o=o||2;let a=0;for(let l=e;l<n;l+=i){const u=t[l],c=t[l+1];r[a++]=s[0]*u+s[2]*c+s[4],r[a++]=s[1]*u+s[3]*c+s[5];for(let h=2;h<o;h++)r[a++]=t[l+h]}return r&&r.length!=a&&(r.length=a),r}function P_(t,e,n,i,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),u=r[0],c=r[1];let h=0;for(let d=e;d<n;d+=i){const f=t[d]-u,g=t[d+1]-c;o[h++]=u+f*a-g*l,o[h++]=c+f*l+g*a;for(let p=d+2;p<d+i;++p)o[h++]=t[p]}return o&&o.length!=h&&(o.length=h),o}function lw(t,e,n,i,s,r,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<n;h+=i){const d=t[h]-l,f=t[h+1]-u;a[c++]=l+s*d,a[c++]=u+r*f;for(let g=h+2;g<h+i;++g)a[c++]=t[g]}return a&&a.length!=c&&(a.length=c),a}function cw(t,e,n,i,s,r,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+s,o[a++]=t[l+1]+r;for(let u=l+2;u<l+i;++u)o[a++]=t[u]}return o&&o.length!=a&&(o.length=a),o}const Rf=zn();class uw extends jn{constructor(){super(),this.extent_=In(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=m_((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return qe()}closestPointXY(e,n,i,s){return qe()}containsXY(e,n){const i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return qe()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Wl(n),this.extentRevision_=this.getRevision()}return zE(this.extent_,e)}rotate(e,n){qe()}scale(e,n,i){qe()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return qe()}getType(){return qe()}applyTransform(e){qe()}intersectsExtent(e){return qe()}translate(e,n){qe()}transform(e,n){const i=An(e),s=i.getUnits()=="tile-pixels"?function(r,o,a){const l=i.getExtent(),u=i.getWorldExtent(),c=Ut(u)/Ut(l);return Ri(Rf,u[0],u[3],c,-c,0,0,0),es(r,0,r.length,a,Rf,o),tl(i,n)(r,o,a)}:tl(i,n);return this.applyTransform(s),this}}class Yl extends uw{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return dh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return qe()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=Tf(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){qe()}setLayout(e,n,i){let s;if(e)s=Tf(e);else{for(let r=0;r<i;++r){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}s=n.length,e=hw(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();P_(i,0,i.length,s,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=Os(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();lw(s,0,s.length,r,e,n,i,s),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();cw(i,0,i.length,s,e,n,i),this.changed()}}}function hw(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function Tf(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function dw(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const s=t.getStride();return es(i,0,i.length,s,e,n)}function If(t,e,n,i,s,r,o){const a=t[e],l=t[e+1],u=t[n]-a,c=t[n+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((s-a)*u+(r-l)*c)/(u*u+c*c);if(d>1)h=n;else if(d>0){for(let f=0;f<i;++f)o[f]=gn(t[e+f],t[n+f],d);o.length=i;return}else h=e}for(let d=0;d<i;++d)o[d]=t[h+d];o.length=i}function bh(t,e,n,i,s){let r=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const a=t[e],l=t[e+1],u=dr(r,o,a,l);u>s&&(s=u),r=a,o=l}return s}function fw(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=bh(t,e,a,i,s),e=a}return s}function Eh(t,e,n,i,s,r,o,a,l,u,c){if(e==n)return u;let h,d;if(s===0){if(d=dr(o,a,t[e],t[e+1]),d<u){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,d}return u}c=c||[NaN,NaN];let f=e+i;for(;f<n;)if(If(t,f-i,f,i,o,a,c),d=dr(o,a,c[0],c[1]),d<u){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/s|0,1);if(r&&(If(t,n-i,e,i,o,a,c),d=dr(o,a,c[0],c[1]),d<u)){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i}return u}function gw(t,e,n,i,s,r,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const f=n[h];u=Eh(t,e,f,i,s,r,o,a,l,u,c),e=f}return u}function pw(t,e,n,i){for(let s=0,r=n.length;s<r;++s)t[e++]=n[s];return e}function wh(t,e,n,i){for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0;a<i;++a)t[e++]=o[a]}return e}function _w(t,e,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=wh(t,e,n[o],i);s[r++]=l,e=l}return s.length=r,s}function Xl(t,e,n,i,s,r,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)r[o++]=t[e],r[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,n-i];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let f=0;const g=t[d],p=t[d+1],m=t[h],w=t[h+1];for(let v=d+i;v<h;v+=i){const y=t[v],E=t[v+1],b=ZE(y,E,g,p,m,w);b>f&&(c=v,f=b)}f>s&&(l[(c-e)/i]=1,d+i<c&&u.push(d,c),c+i<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(r[o++]=t[e+h*i],r[o++]=t[e+h*i+1]);return o}function mw(t,e,n,i,s,r,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l];o=Xl(t,e,c,i,s,r,o),a.push(o),e=c}return o}function ps(t,e){return e*Math.round(t/e)}function vw(t,e,n,i,s,r,o){if(e==n)return o;let a=ps(t[e],s),l=ps(t[e+1],s);e+=i,r[o++]=a,r[o++]=l;let u,c;do if(u=ps(t[e],s),c=ps(t[e+1],s),e+=i,e==n)return r[o++]=u,r[o++]=c,o;while(u==a&&c==l);for(;e<n;){const h=ps(t[e],s),d=ps(t[e+1],s);if(e+=i,h==u&&d==c)continue;const f=u-a,g=c-l,p=h-a,m=d-l;if(f*m==g*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(g<0&&m<g||g==m||g>0&&m>g)){u=h,c=d;continue}r[o++]=u,r[o++]=c,a=u,l=c,u=h,c=d}return r[o++]=u,r[o++]=c,o}function O_(t,e,n,i,s,r,o,a){for(let l=0,u=n.length;l<u;++l){const c=n[l];o=vw(t,e,c,i,s,r,o),a.push(o),e=c}return o}function Es(t,e,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<n;o+=i)s[r++]=t.slice(o,o+i);return s.length=r,s}function nl(t,e,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[r++]=Es(t,e,l,i,s[r]),e=l}return s.length=r,s}function Af(t,e,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[r++]=l.length===1&&l[0]===e?[]:nl(t,e,l,i,s[r]),e=l[l.length-1]}return s.length=r,s}function k_(t,e,n,i){let s=0;const r=t[n-i],o=t[n-i+1];let a=0,l=0;for(;e<n;e+=i){const u=t[e]-r,c=t[e+1]-o;s+=l*u-a*c,a=u,l=c}return s/2}function yw(t,e,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=k_(t,e,a,i),e=a}return s}class Ro extends Yl{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new Ro(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,s){return s<hh(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Eh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,s))}getArea(){return k_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=Xl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Ro(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wh(this.flatCoordinates,0,e,this.stride),this.changed()}}class To extends Yl{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new To(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,s){const r=this.flatCoordinates,o=dr(e,n,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)i[l]=r[l];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return E_(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return b_(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=pw(this.flatCoordinates,0,e,this.stride),this.changed()}}function bw(t,e,n,i,s){return!x_(s,function(o){return!ws(t,e,n,i,o[0],o[1])})}function ws(t,e,n,i,s,r){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const u=t[e],c=t[e+1];l<=r?c>r&&(u-a)*(r-l)-(s-a)*(c-l)>0&&o++:c<=r&&(u-a)*(r-l)-(s-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function L_(t,e,n,i,s,r){if(n.length===0||!ws(t,e,n[0],i,s,r))return!1;for(let o=1,a=n.length;o<a;++o)if(ws(t,n[o-1],n[o],i,s,r))return!1;return!0}function xh(t,e,n,i,s,r,o){let a,l,u,c,h,d,f;const g=s[r+1],p=[];for(let v=0,y=n.length;v<y;++v){const E=n[v];for(c=t[E-i],d=t[E-i+1],a=e;a<E;a+=i)h=t[a],f=t[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(u=(g-d)/(f-d)*(h-c)+c,p.push(u)),c=h,d=f}let m=NaN,w=-1/0;for(p.sort(bi),c=p[0],a=1,l=p.length;a<l;++a){h=p[a];const v=Math.abs(h-c);v>w&&(u=(c+h)/2,L_(t,e,n,i,u,g)&&(m=u,w=v)),c=h}return isNaN(m)&&(m=s[r]),o?(o.push(m,g,w),o):[m,g,w]}function Ew(t,e,n,i,s){let r=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];r=xh(t,e,l,i,s,2*o,r),e=l[l.length-1]}return r}function M_(t,e,n,i,s){let r;for(e+=i;e<n;e+=i)if(r=s(t.slice(e-i,e),t.slice(e,e+i)),r)return r;return!1}function Ch(t,e,n,i,s){const r=w_(In(),t,e,n,i);return nn(s,r)?bs(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:M_(t,e,n,i,function(o,a){return WE(s,o,a)}):!1}function D_(t,e,n,i,s){return!!(Ch(t,e,n,i,s)||ws(t,e,n,i,s[0],s[1])||ws(t,e,n,i,s[0],s[3])||ws(t,e,n,i,s[2],s[1])||ws(t,e,n,i,s[2],s[3]))}function ww(t,e,n,i,s){if(!D_(t,e,n[0],i,s))return!1;if(n.length===1)return!0;for(let r=1,o=n.length;r<o;++r)if(bw(t,n[r-1],n[r],i,s)&&!Ch(t,n[r-1],n[r],i,s))return!1;return!0}function xw(t,e,n,i){for(;e<n-i;){for(let s=0;s<i;++s){const r=t[e+s];t[e+s]=t[n-i+s],t[n-i+s]=r}e+=i,n-=i}}function Sh(t,e,n,i){let s=0,r=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],l=t[e+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Cw(t,e,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=Sh(t,e,a,i);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function Pf(t,e,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=Sh(t,e,a,i);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&xw(t,e,a,i),e=a}return e}function Sw(t,e){const n=[];let i=0,s=0,r;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=Sh(t,i,l,2);if(r===void 0&&(r=u),u===r)n.push(e.slice(s,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[s])}s=o+1,i=l}return n}class Io extends Yl{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?$l(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Io(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,s){return s<hh(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(fw(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gw(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,s))}containsXY(e,n){return L_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return yw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Pf(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,nl(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Os(this.getExtent());this.flatInteriorPoint_=xh(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new To(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Ro(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],u=new Ro(n.slice(r,l),e);s.push(u),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Cw(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Pf(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=O_(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new Io(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return ww(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=_w(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Of(t){if(jl(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],s=t[3],r=[e,n,e,s,i,s,i,n,e,n];return new Io(r,"XY",[r.length])}const Rn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},We={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Ao={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Dt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Dt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Dt.max=Dt.whitepoint[2].D65;Dt.rgb=function(t,e){e=e||Dt.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],s=t[2]/e[2],r,o,a;return r=n*3.240969941904521+i*-1.537383177570093+s*-.498610760293,o=n*-.96924363628087+i*1.87596750150772+s*.041555057407175,a=n*.055630079696993+i*-.20397695888897+s*1.056971514242878,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[r*255,o*255,a*255]};Ao.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,s=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var r=n*.41239079926595+i*.35758433938387+s*.18048078840183,o=n*.21263900587151+i*.71516867876775+s*.072192315360733,a=n*.019330818715591+i*.11919477979462+s*.95053215224966;return e=e||Dt.whitepoint[2].E,[r*e[0],o*e[1],a*e[2]]};const Rh={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,s,r,o,a,l,u,c,h,d,f,g,p;if(r=t[0],o=t[1],a=t[2],r===0)return[0,0,0];var m=.0011070564598794539;return e=e||"D65",n=n||2,h=Dt.whitepoint[n][e][0],d=Dt.whitepoint[n][e][1],f=Dt.whitepoint[n][e][2],g=4*h/(h+15*d+3*f),p=9*d/(h+15*d+3*f),i=o/(13*r)+g||0,s=a/(13*r)+p||0,u=r>8?d*Math.pow((r+16)/116,3):d*r*m,l=u*9*i/(4*s)||0,c=u*(12-3*i-20*s)/(4*s)||0,[l,u,c]}};Dt.luv=function(t,e,n){var i,s,r,o,a,l,u,c,h,d,f,g,p,m=.008856451679035631,w=903.2962962962961;e=e||"D65",n=n||2,h=Dt.whitepoint[n][e][0],d=Dt.whitepoint[n][e][1],f=Dt.whitepoint[n][e][2],g=4*h/(h+15*d+3*f),p=9*d/(h+15*d+3*f),l=t[0],u=t[1],c=t[2],i=4*l/(l+15*u+3*c)||0,s=9*u/(l+15*u+3*c)||0;var v=u/d;return r=v<=m?w*v:116*Math.pow(v,1/3)-16,o=13*r*(i-g),a=13*r*(s-p),[r,o,a]};var F_={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],s,r,o;return o=i/360*2*Math.PI,s=n*Math.cos(o),r=n*Math.sin(o),[e,s,r]},xyz:function(t){return Rh.xyz(F_.luv(t))}};Rh.lchuv=function(t){var e=t[0],n=t[1],i=t[2],s=Math.sqrt(n*n+i*i),r=Math.atan2(i,n),o=r*360/2/Math.PI;return o<0&&(o+=360),[e,s,o]};Dt.lchuv=function(t){return Rh.lchuv(Dt.luv(t))};const kf={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Lf={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Rw(t){var c,h;var e,n=[],i=1,s;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),kf[t])n=kf[t].slice(),s="rgb";else if(t==="transparent")i=0,s="rgb",n=[0,0,0];else if(t[0]==="#"){var r=t.slice(1),o=r.length,a=o<=4;i=1,a?(n=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(i=parseInt(r[3]+r[3],16)/255)):(n=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(i=parseInt(r[6]+r[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];s=l.replace(/a$/,"");var u=s==="cmyk"?4:s==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=n.shift()),n=n.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:s==="rgb"?d*255:s[0]==="h"||s[0]==="l"&&!f?d*100:s==="lab"?d*125:s==="lch"?f<2?d*150:d*360:s[0]==="o"&&!f?d:s==="oklab"?d*.4:s==="oklch"?f<2?d*.4:d*360:d;if(s[f]==="h"||f===2&&s[s.length-1]==="h"){if(Lf[d]!==void 0)return Lf[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),i=n.length>u?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),s=((h=(c=t.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:s,values:n,alpha:i}}const yc={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,s,r,o,a,l,u=0;if(n===0)return l=i*255,[l,l,l];for(r=i<.5?i*(1+n):i+n-i*n,s=2*i-r,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?s+(r-s)*6*o:2*o<1?r:3*o<2?s+(r-s)*(2/3-o)*6:s,a[u++]=l*255;return a}};Ao.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,s=Math.min(e,n,i),r=Math.max(e,n,i),o=r-s,a,l,u;return r===s?a=0:e===r?a=(n-i)/o:n===r?a=2+(i-e)/o:i===r&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(s+r)/2,r===s?l=0:u<=.5?l=o/(r+s):l=o/(2-r-s),[a,l*100,u*100]};function Tw(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=Rw(t);if(!n.space)return[];const i=n.space[0]==="h"?yc.min:Ao.min,s=n.space[0]==="h"?yc.max:Ao.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),s[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),s[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),s[2]),n.space[0]==="h"&&(e=yc.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}const Th=[NaN,NaN,NaN,0];function Iw(t){return typeof t=="string"?t:Ah(t)}const Aw=1024,zr={};let bc=0;function Pw(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function Mf(t){const e=Dt.lchuv(Ao.xyz(t));return e[3]=t[3],e}function Ow(t){const e=Dt.rgb(F_.xyz(t));return e[3]=t[3],e}function Ih(t){if(t==="none")return Th;if(zr.hasOwnProperty(t))return zr[t];if(bc>=Aw){let n=0;for(const i in zr)n++&3||(delete zr[i],--bc)}const e=Tw(t);if(e.length!==4)throw new Error('failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('failed to parse "'+t+'" as color');return N_(e),zr[t]=e,++bc,e}function Po(t){return Array.isArray(t)?t:Ih(t)}function N_(t){return t[0]=_t(t[0]+.5|0,0,255),t[1]=_t(t[1]+.5|0,0,255),t[2]=_t(t[2]+.5|0,0,255),t[3]=_t(t[3],0,1),t}function Ah(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const s=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+i+","+s+")"}const is=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",kw=is.includes("firefox"),Lw=is.includes("safari")&&!is.includes("chrom");Lw&&(is.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(is));const Mw=is.includes("webkit")&&!is.includes("edge"),$_=is.includes("macintosh"),G_=typeof devicePixelRatio<"u"?devicePixelRatio:1,z_=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,W_=typeof Image<"u"&&Image.prototype.decode,B_=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function xt(t,e,n,i){let s;return n&&n.length?s=n.shift():z_?s=new OffscreenCanvas(t||300,e||300):s=document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",i)}let Ec;function il(){return Ec||(Ec=xt(1,1)),Ec}function xr(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Dw(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function Fw(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function Df(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function U_(t){for(;t.lastChild;)t.lastChild.remove()}function Nw(t,e){const n=t.childNodes;for(let i=0;;++i){const s=n[i],r=e[i];if(!s&&!r)break;if(s!==r){if(!s){t.appendChild(r);continue}if(!r){t.removeChild(s),--i;continue}t.insertBefore(r,s)}}}function $w(t,e,n){const i=t;let s=!0,r=!1,o=!1;const a=[Ja(i,Ne.LOAD,function(){o=!0,r||e()})];return i.src&&W_?(r=!0,i.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():n())})):a.push(Ja(i,Ne.ERROR,n)),function(){s=!1,a.forEach(lt)}}function Gw(t,e){return new Promise((n,i)=>{function s(){o(),n(t)}function r(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",s),t.removeEventListener("error",r)}t.addEventListener("load",s),t.addEventListener("error",r)})}function zw(t,e){return e&&(t.src=e),t.src&&W_?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(s=>t.complete&&t.width?n(t):i(s))):Gw(t)}class Ww{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,i){const s=wc(e,n,i);return s in this.cache_?this.cache_[s]:null}getPattern(e,n,i){const s=wc(e,n,i);return s in this.patternCache_?this.patternCache_[s]:null}set(e,n,i,s,r){const o=wc(e,n,i),a=o in this.cache_;this.cache_[o]=s,r&&(s.getImageState()===We.IDLE&&s.load(),s.getImageState()===We.LOADING?s.ready().then(()=>{this.patternCache_[o]=il().createPattern(s.getImage(1),"repeat")}):this.patternCache_[o]=il().createPattern(s.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function wc(t,e,n){const i=n?Po(n):"null";return e+":"+t+":"+i}const ei=new Ww;let Wr=null;class Bw extends zl{constructor(e,n,i,s,r){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?We.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===We.LOADED){Wr||(Wr=xt(1,1,void 0,{willReadFrequently:!0})),Wr.drawImage(this.image_,0,0);try{Wr.getImageData(0,0,1,1),this.tainted_=!1}catch{Wr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ne.CHANGE)}handleImageError_(){this.imageState_=We.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=We.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=xt(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===We.IDLE){this.image_||this.initializeImage_(),this.imageState_=We.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&zw(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==We.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*e),i.height=Math.ceil(n.height*e);const s=i.getContext("2d");s.scale(e,e),s.drawImage(n,0,0),s.globalCompositeOperation="multiply",s.fillStyle=Iw(this.color_),s.fillRect(0,0,i.width/e,i.height/e),s.globalCompositeOperation="destination-in",s.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===We.LOADED||this.imageState_===We.ERROR)e();else{const n=()=>{(this.imageState_===We.LOADED||this.imageState_===We.ERROR)&&(this.removeEventListener(Ne.CHANGE,n),e())};this.addEventListener(Ne.CHANGE,n)}})),this.ready_}}function Ph(t,e,n,i,s,r){let o=e===void 0?void 0:ei.get(e,n,s);return o||(o=new Bw(t,t&&"src"in t?t.src||void 0:e,n,i,s),ei.set(e,n,s,o,r)),r&&o&&!ei.getPattern(e,n,s)&&ei.set(e,n,s,o,r),o}class Xo{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Xo({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=Ph(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===We.IDLE&&n.load(),n.getImageState()===We.LOADING&&(this.patternImage_=n)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function xu(t,e,n,i,s,r,o){let a,l;const u=(n-e)/i;if(u===1)a=e;else if(u===2)a=e,l=s;else if(u!==0){let c=t[e],h=t[e+1],d=0;const f=[0];for(let m=e+i;m<n;m+=i){const w=t[m],v=t[m+1];d+=Math.sqrt((w-c)*(w-c)+(v-h)*(v-h)),f.push(d),c=w,h=v}const g=s*d,p=RE(f,g);p<0?(l=(g-f[-p-2])/(f[-p-1]-f[-p-2]),a=e+(-p-2)*i):a=e+p*i}o=o>1?o:2,r=r||new Array(o);for(let c=0;c<o;++c)r[c]=a===void 0?NaN:l===void 0?t[a+c]:gn(t[a+c],t[a+i+c],l);return r}function Uw(t,e,n,i,s,r){if(n==e)return null;let o;if(s<t[e+i-1])return r?(o=t.slice(e,e+i),o[i-1]=s,o):null;if(t[n-1]<s)return r?(o=t.slice(n-i,n),o[i-1]=s,o):null;if(s==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){const d=a+l>>1;s<t[(d+1)*i-1]?l=d:a=d+1}const u=t[a*i-1];if(s==u)return t.slice((a-1)*i,(a-1)*i+i);const c=t[(a+1)*i-1],h=(s-u)/(c-u);o=[];for(let d=0;d<i-1;++d)o.push(gn(t[(a-1)*i+d],t[a*i+d],h));return o.push(s),o}function K_(t,e,n,i){let s=t[e],r=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const l=t[a],u=t[a+1];o+=Math.sqrt((l-s)*(l-s)+(u-r)*(u-r)),s=l,r=u}return o}class sl extends Yl{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){$l(this.flatCoordinates,e),this.changed()}clone(){const e=new sl(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,s){return s<hh(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Eh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,i,s))}forEachSegment(e){return M_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,Uw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return Es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return xu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return K_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=Xl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new sl(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return Ch(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wh(this.flatCoordinates,0,e,this.stride),this.changed()}}class Vo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Vo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Ff(t){return t[0]>0&&t[1]>0}function Kw(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function on(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class Vl{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=on(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Vl({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return qe()}getImage(e){return qe()}getHitDetectionImage(){return qe()}getPixelRatio(e){return 1}getImageState(){return qe()}getImageSize(){return qe()}getOrigin(){return qe()}getSize(){return qe()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=on(e)}listenImageChange(e){qe()}load(){qe()}unlistenImageChange(e){qe()}ready(){return Promise.resolve()}}function ti(t){return t?Array.isArray(t)?Ah(t):typeof t=="object"&&"src"in t?jw(t):t:null}function jw(t){if(!t.offset||!t.size)return ei.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=ei.getPattern(e,void 0,t.color);if(n)return n;const i=ei.get(t.src,"anonymous",null);if(i.getImageState()!==We.LOADED)return null;const s=xt(t.size[0],t.size[1]);return s.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Ph(s.canvas,e,void 0,We.LOADED,t.color,!0),ei.getPattern(e,void 0,t.color)}const fa="ol-hidden",Yw="ol-selectable",Hl="ol-unselectable",Oh="ol-control",Nf="ol-collapsed",Xw=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),$f=["style","variant","weight","size","lineHeight","family"],j_=function(t){const e=t.match(Xw);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=$f.length;i<s;++i){const r=e[i+1];r!==void 0&&(n[$f[i]]=r)}return n.families=n.family.split(/,\s?/),n},Y_="10px sans-serif",en="#000",Cr="round",Ei=[],wi=0,Sr="round",Oo=10,ko="#000",Lo="center",rl="middle",xs=[0,0,0,0],Mo=1,pi=new jn;let Zs=null,Cu;const Su={},Vw=function(){const e="32px ",n=["monospace","serif"],i=n.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(u,c,h){let d=!0;for(let f=0;f<i;++f){const g=n[f];if(o=ol(u+" "+c+" "+e+g,s),h!=g){const p=ol(u+" "+c+" "+e+h+","+g,s);d=d&&p!=o}}return!!d}function l(){let u=!0;const c=pi.getKeys();for(let h=0,d=c.length;h<d;++h){const f=c[h];if(pi.get(f)<100){const[g,p,m]=f.split(`
`);a(g,p,m)?(Ko(Su),Zs=null,Cu=void 0,pi.set(f,100)):(pi.set(f,pi.get(f)+1,!0),u=!1)}}u&&(clearInterval(r),r=void 0)}return function(u){const c=j_(u);if(!c)return;const h=c.families;for(let d=0,f=h.length;d<f;++d){const g=h[d],p=c.style+`
`+c.weight+`
`+g;pi.get(p)===void 0&&(pi.set(p,100,!0),a(c.style,c.weight,g)||(pi.set(p,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),Hw=function(){let t;return function(e){let n=Su[e];if(n==null){if(z_){const i=j_(e),s=X_(e,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);Su[e]=n}return n}}();function X_(t,e){return Zs||(Zs=xt(1,1)),t!=Cu&&(Zs.font=t,Cu=Zs.font),Zs.measureText(e)}function ol(t,e){return X_(t,e).width}function Gf(t,e,n){if(e in n)return n[e];const i=e.split(`
`).reduce((s,r)=>Math.max(s,ol(t,r)),0);return n[e]=i,i}function qw(t,e){const n=[],i=[],s=[];let r=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){r=Math.max(r,o),s.push(o),o=0,a+=l,l=0;continue}const d=e[u+1]||t.font,f=ol(d,h);n.push(f),o+=f;const g=Hw(d);i.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:n,heights:i,lineWidths:s}}function Zw(t,e,n,i,s,r,o,a,l,u,c){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(c[0],c[1]),Jw(i,t)):c[0]<0||c[1]<0?(t.translate(l,u),t.scale(c[0],c[1]),t.drawImage(i,s,r,o,a,0,0,o,a)):t.drawImage(i,s,r,o,a,l,u,o*c[0],a*c[1]),t.restore()}function Jw(t,e){const n=t.contextInstructions;for(let i=0,s=n.length;i<s;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class ql extends Vl{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?We.LOADING:We.LOADED,this.imageState_===We.LOADING&&this.ready().then(()=>this.imageState_=We.LOADED),this.render()}clone(){const e=this.getScale(),n=new ql({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){const i=this.renderOptions_,s=xt(i.size*e,i.size*e);this.draw_(i,s,e),n=s.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let s=this.radius,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const I=s;s=r,r=I}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),u=Math.sqrt(r*r-l*l),c=s-u,h=Math.sqrt(l*l+c*c),d=h/l;if(e==="miter"&&d<=i)return d*n;const f=n/2/d,g=n/2*(c/h),m=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||e==="bevel")return m*2;const w=s*Math.sin(a),v=Math.sqrt(s*s-w*w),y=r-v,b=Math.sqrt(w*w+y*y)/w;if(b<=i){const I=b*n/2-r-s;return 2*Math.max(m,I)}return m*2}createRenderOptions(){let e=Cr,n=Sr,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=ti(this.stroke_.getColor()??ko),a=this.stroke_.getWidth()??Mo,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Sr,e=this.stroke_.getLineCap()??Cr,i=this.stroke_.getMiterLimit()??Oo);const l=this.calculateLineJoinSize_(n,a,i),u=Math.max(this.radius,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:s,lineDashOffset:r,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let s=this.fill_.getColor();s===null&&(s=en),n.fillStyle=ti(s),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),s=0;typeof i=="string"&&(i=Po(i)),i===null?s=1:Array.isArray(i)&&(s=i.length===4?i[3]:1),s===0&&(n=xt(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=r+a*o,u=a%2===0?i:s;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=en,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Zl extends ql{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new Zl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class xi{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=zf,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new xi({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=zf,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Qw(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(He(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let xc=null;function V_(t,e){if(!xc){const n=new Xo({color:"rgba(255,255,255,0.4)"}),i=new Vo({color:"#3399CC",width:1.25});xc=[new xi({image:new Zl({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return xc}function zf(t){return t.getGeometry()}const ex="#333";class kh{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=on(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Xo({color:ex}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new kh({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=on(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const st={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class H_ extends jn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[st.OPACITY]=e.opacity!==void 0?e.opacity:1,He(typeof n[st.OPACITY]=="number","Layer opacity must be a number"),n[st.VISIBLE]=e.visible!==void 0?e.visible:!0,n[st.Z_INDEX]=e.zIndex,n[st.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[st.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[st.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[st.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=_t(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return qe()}getLayerStatesArray(e){return qe()}getExtent(){return this.get(st.EXTENT)}getMaxResolution(){return this.get(st.MAX_RESOLUTION)}getMinResolution(){return this.get(st.MIN_RESOLUTION)}getMinZoom(){return this.get(st.MIN_ZOOM)}getMaxZoom(){return this.get(st.MAX_ZOOM)}getOpacity(){return this.get(st.OPACITY)}getSourceState(){return qe()}getVisible(){return this.get(st.VISIBLE)}getZIndex(){return this.get(st.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(st.EXTENT,e)}setMaxResolution(e){this.set(st.MAX_RESOLUTION,e)}setMinResolution(e){this.set(st.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(st.MAX_ZOOM,e)}setMinZoom(e){this.set(st.MIN_ZOOM,e)}setOpacity(e){He(typeof e=="number","Layer opacity must be a number"),this.set(st.OPACITY,e)}setVisible(e){this.set(st.VISIBLE,e)}setZIndex(e){this.set(st.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Wt={ANIMATING:0,INTERACTING:1},kn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},tx=42,Lh=256;function Wf(t,e,n){return function(i,s,r,o,a){if(!i)return;if(!s&&!e)return i;const l=e?0:r[0]*s,u=e?0:r[1]*s,c=a?a[0]:0,h=a?a[1]:0;let d=t[0]+l/2+c,f=t[2]-l/2+c,g=t[1]+u/2+h,p=t[3]-u/2+h;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let m=_t(i[0],d,f),w=_t(i[1],g,p);if(o&&n&&s){const v=30*s;m+=-v*Math.log(1+Math.max(0,d-i[0])/v)+v*Math.log(1+Math.max(0,i[0]-f)/v),w+=-v*Math.log(1+Math.max(0,g-i[1])/v)+v*Math.log(1+Math.max(0,i[1]-p)/v)}return[m,w]}}function nx(t){return t}function Mh(t,e,n,i){const s=et(e)/n[0],r=Ut(e)/n[1];return i?Math.min(t,Math.max(s,r)):Math.min(t,Math.min(s,r))}function Dh(t,e,n){let i=Math.min(t,e);const s=50;return i*=Math.log(1+s*Math.max(0,t/e-1))/s+1,n&&(i=Math.max(i,n),i/=Math.log(1+s*Math.max(0,n/t-1))/s+1),_t(i,n/2,e*2)}function ix(t,e,n,i){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const l=t[0],u=t[t.length-1],c=n?Mh(l,n,o,i):l;if(a)return e?Dh(s,c,u):_t(s,u,c);const h=Math.min(c,s),d=Math.floor(ch(t,h,r));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}function sx(t,e,n,i,s,r){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,l,u){if(o!==void 0){const c=s?Mh(e,s,l,r):e;if(u)return i?Dh(o,c,n):_t(o,n,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-h),f=-a*(.5-h)+.5,g=Math.min(c,o),p=Math.floor(Math.log(e/g)/Math.log(t)+f),m=Math.max(d,p),w=e/Math.pow(t,m);return _t(w,n,c)}}}function Bf(t,e,n,i,s){return n=n!==void 0?n:!0,function(r,o,a,l){if(r!==void 0){const u=i?Mh(t,i,a,s):t;return!n||!l?_t(r,e,u):Dh(r,u,e)}}}function Fh(t){if(t!==void 0)return 0}function Uf(t){if(t!==void 0)return t}function rx(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function ox(t){const e=Na(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}function q_(t){return Math.pow(t,3)}function Pr(t){return 1-q_(1-t)}function ax(t){return 3*t*t-2*t*t*t}function lx(t){return t}const Cc=0;class Zn extends jn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=vh(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&iw(),e.center&&(e.center=gi(e.center,this.projection_)),e.extent&&(e.extent=Hi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in kn)delete n[a];this.setProperties(n,!0);const i=ux(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=cx(e),r=i.constraint,o=hx(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const s=e||[0,0,0,0];n=n||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-n[3]+n[1]-s[1]),a=r/2*(s[0]-n[0]+n[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=gi(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=gi(s.anchor,this.getProjection())),n[i]=s}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let s=0;for(;s<n&&!this.isDef();++s){const c=arguments[s];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(s===n){i&&ga(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;s<n;++s){const c=arguments[s],h={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||ax,callback:i};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=fr(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}dx(h)?h.complete=!0:r+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(Wt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Wt.ANIMATING]>0}getInteracting(){return this.hints_[Wt.INTERACTING]>0}cancelAnimations(){this.setHint(Wt.ANIMATING,-this.hints_[Wt.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const s=this.animations_[n];if(s[0].callback&&ga(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):r=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+h*(g-d),w=f+h*(p-f);this.targetCenter_=[m,w]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?fr(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(r){this.animations_[i]=null,this.setHint(Wt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&ga(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-n[0],s[1]-n[1]],_h(i,e-this.getRotation()),QE(i,n)),i}calculateCenterZoom(e,n){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=n[0]-e*(n[0]-s[0])/r,a=n[1]-e*(n[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],s=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&wu(e,this.getProjection())}getCenterInternal(){return this.get(kn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return A_(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();He(n,"The view center is not defined");const i=this.getResolution();He(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return He(s!==void 0,"The view rotation is not defined"),yu(n,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(kn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(Hi(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=et(e)/n[0],s=Ut(e)/n[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/Math.log(e);return function(r){return n/Math.pow(e,r*s)}}getRotation(){return this.get(kn.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/n;return function(o){return Math.log(i/o)/n/r}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=Sc(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],n,i)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,s;if(this.resolutions_){const r=ch(this.resolutions_,e,1);n=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=_t(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,_t(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(He(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){He(!jl(e),"Cannot fit empty extent provided as `geometry`");const s=Hi(e,this.getProjection());i=Of(s)}else if(e.getType()==="Circle"){const s=Hi(e.getExtent(),this.getProjection());i=Of(s),i.rotate(this.getRotation(),Os(s))}else i=e;this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),s=Math.sin(-n),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=r.length;h<d;h+=o){const f=r[h]*i-r[h+1]*s,g=r[h]*s+r[h+1]*i;a=Math.min(a,f),l=Math.min(l,g),u=Math.max(u,f),c=Math.max(c,g)}return[a,l,u,c]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const s=n.padding!==void 0?n.padding:[0,0,0,0],r=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Os(a);d[0]+=(s[1]-s[3])/2*l,d[1]+=(s[0]-s[2])/2*l;const f=d[0]*h-d[1]*c,g=d[1]*h+d[0]*c,p=this.getConstrainedCenter([f,g],l),m=n.callback?n.callback:br;n.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:n.duration,easing:n.easing},m):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),ga(m,!0))}centerOn(e,n,i){this.centerOnInternal(gi(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(Sc(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=Sc(e,s,[a[0]/2+o[3],a[1]/2+o[0]],n,i);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=wu(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&gi(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,i);n&&(this.targetCenter_=this.calculateCenterZoom(r,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=gi(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(s,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&gi(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(kn.ROTATION)!==s&&this.set(kn.ROTATION,s),this.get(kn.RESOLUTION)!==o&&(this.set(kn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(kn.CENTER)||!el(this.get(kn.CENTER),a))&&this.set(kn.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const s=n||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!el(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:Pr,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Wt.INTERACTING,1)}endInteraction(e,n,i){i=i&&gi(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint(Wt.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function ga(t,e){setTimeout(function(){t(e)},0)}function cx(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Wf(t.extent,t.constrainOnlyCenter,n)}const e=vh(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Wf(n,!1,!1)}return nx}function ux(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:Cc,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,u=t.multiWorld!==void 0?t.multiWorld:!1,c=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,d=vh(t.projection,"EPSG:3857"),f=d.getExtent();let g=t.constrainOnlyCenter,p=t.extent;if(!u&&!p&&d.isGlobal()&&(g=!1,p=f),t.resolutions!==void 0){const m=t.resolutions;n=m[o],i=m[a]!==void 0?m[a]:m[m.length-1],t.constrainResolution?e=ix(m,c,!g&&p,h):e=Bf(n,i,c,!g&&p,h)}else{const w=(f?Math.max(et(f),Ut(f)):360*gh.degrees/d.getMetersPerUnit())/Lh/Math.pow(2,Cc),v=w/Math.pow(2,28-Cc);n=t.maxResolution,n!==void 0?o=0:n=w/Math.pow(l,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(l,a):i=w/Math.pow(l,a):i=v),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),t.constrainResolution?e=sx(l,n,i,c,!g&&p,h):e=Bf(n,i,c,!g&&p,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function hx(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?ox():n===!1?Uf:typeof n=="number"?rx(n):Uf}return Fh}function dx(t){return!(t.sourceCenter&&t.targetCenter&&!el(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function Sc(t,e,n,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=t[0]*r-t[1]*o,l=t[1]*r+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;const u=a*r-l*o,c=l*r+a*o;return[u,c]}class Jl extends H_{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(st.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(st.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(lt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=je(e,Ne.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Zn?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;n.layerStatesArray?s=n.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return Nh(s,n.viewState)&&(!r||nn(r,n.extent))}getAttributions(e){var r;if(!this.isVisible(e))return[];const n=(r=this.getSource())==null?void 0:r.getAttributions();if(!n)return[];const i=e instanceof Zn?e.getViewStateAndExtent():e;let s=n(i);return Array.isArray(s)||(s=[s]),s}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(st.MAP,e)}getMapInternal(){return this.get(st.MAP)}setMap(e){this.mapPrecomposeKey_&&(lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(lt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=je(e,Rn.PRECOMPOSE,n=>{const s=n.frameState.layerStatesArray,r=this.getLayerState(!1);He(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)}),this.mapRenderKey_=je(this,Ne.CHANGE,e.render,e),this.changed())}setSource(e){this.set(st.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Nh(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}function Z_(t,e,n=0,i=t.length-1,s=fx){for(;i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,c=Math.log(l),h=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1),f=Math.max(n,Math.floor(e-u*h/l+d)),g=Math.min(i,Math.floor(e+(l-u)*h/l+d));Z_(t,e,f,g,s)}const r=t[e];let o=n,a=i;for(Br(t,n,e),s(t[i],r)>0&&Br(t,n,i);o<a;){for(Br(t,o,a),o++,a--;s(t[o],r)<0;)o++;for(;s(t[a],r)>0;)a--}s(t[n],r)===0?Br(t,n,a):(a++,Br(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}}function Br(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function fx(t,e){return t<e?-1:t>e?1:0}let J_=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!_a(e,n))return i;const s=this.toBBox,r=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?s(a):a;_a(e,l)&&(n.leaf?i.push(a):Tc(e,l)?this._all(a,i):r.push(a))}n=r.pop()}return i}collides(e){let n=this.data;if(!_a(e,n))return!1;const i=[];for(;n;){for(let s=0;s<n.children.length;s++){const r=n.children[s],o=n.leaf?this.toBBox(r):r;if(_a(e,o)){if(n.leaf||Tc(e,o))return!0;i.push(r)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Js([]),this}remove(e,n){if(!e)return this;let i=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,u;for(;i||r.length;){if(i||(i=r.pop(),l=r[r.length-1],a=o.pop(),u=!0),i.leaf){const c=gx(e,i.children,n);if(c!==-1)return i.children.splice(c,1),r.push(i),this._condense(r),this}!u&&!i.leaf&&Tc(i,s)?(r.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,s){const r=i-n+1;let o=this._maxEntries,a;if(r<=o)return a=Js(e.slice(n,i+1)),Ws(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Js([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),u=l*Math.ceil(Math.sqrt(o));Kf(e,n,i,u,this.compareMinX);for(let c=n;c<=i;c+=u){const h=Math.min(c+u-1,i);Kf(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,s-1))}}return Ws(a,this.toBBox),a}_chooseSubtree(e,n,i,s){for(;s.push(n),!(n.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const u=n.children[l],c=Rc(u),h=mx(e,u)-c;h<o?(o=h,r=c<r?c:r,a=u):h===o&&c<r&&(r=c,a=u)}n=a||n.children[0]}return n}_insert(e,n,i){const s=i?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,n,r);for(o.children.push(e),Vr(o,s);n>=0&&r[n].children.length>this._maxEntries;)this._split(r,n),n--;this._adjustParentBBoxes(s,r,n)}_split(e,n){const i=e[n],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=Js(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Ws(i,this.toBBox),Ws(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,n){this.data=Js([e,n]),this.data.height=e.height+1,this.data.leaf=!1,Ws(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let s,r=1/0,o=1/0;for(let a=n;a<=i-n;a++){const l=Xr(e,0,a,this.toBBox),u=Xr(e,a,i,this.toBBox),c=vx(l,u),h=Rc(l)+Rc(u);c<r?(r=c,s=a,o=h<o?h:o):c===r&&h<o&&(o=h,s=a)}return s||i-n}_chooseSplitAxis(e,n,i){const s=e.leaf?this.compareMinX:px,r=e.leaf?this.compareMinY:_x,o=this._allDistMargin(e,n,i,s),a=this._allDistMargin(e,n,i,r);o<a&&e.children.sort(s)}_allDistMargin(e,n,i,s){e.children.sort(s);const r=this.toBBox,o=Xr(e,0,n,r),a=Xr(e,i-n,i,r);let l=pa(o)+pa(a);for(let u=n;u<i-n;u++){const c=e.children[u];Vr(o,e.leaf?r(c):c),l+=pa(o)}for(let u=i-n-1;u>=n;u--){const c=e.children[u];Vr(a,e.leaf?r(c):c),l+=pa(a)}return l}_adjustParentBBoxes(e,n,i){for(let s=i;s>=0;s--)Vr(n[s],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():Ws(e[n],this.toBBox)}};function gx(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Ws(t,e){Xr(t,0,t.children.length,e,t)}function Xr(t,e,n,i,s){s||(s=Js(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<n;r++){const o=t.children[r];Vr(s,t.leaf?i(o):o)}return s}function Vr(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function px(t,e){return t.minX-e.minX}function _x(t,e){return t.minY-e.minY}function Rc(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function pa(t){return t.maxX-t.minX+(t.maxY-t.minY)}function mx(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function vx(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,s-n)*Math.max(0,r-i)}function Tc(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function _a(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Js(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Kf(t,e,n,i,s){const r=[e,n];for(;r.length;){if(n=r.pop(),e=r.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;Z_(t,o,e,n,s),r.push(e,o,o,n)}}function jf(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class Ho extends Vl{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;He(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||it(o)),He(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),He(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=We.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?We.LOADED:We.IDLE:l=We.LOADING:l=We.LOADED),this.color_=e.color!==void 0?Po(e.color):null,this.iconImage_=Ph(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(jf(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(jf(u,c,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Ho({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==We.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==We.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ne.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ne.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Ds=0;const Ht=1<<Ds++,Ke=1<<Ds++,tn=1<<Ds++,Nn=1<<Ds++,ks=1<<Ds++,Hr=1<<Ds++,ma=Math.pow(2,Ds)-1,$h={[Ht]:"boolean",[Ke]:"number",[tn]:"string",[Nn]:"color",[ks]:"number[]",[Hr]:"size"},yx=Object.keys($h).map(Number).sort(bi);function bx(t){return t in $h}function qr(t){const e=[];for(const n of yx)Zr(t,n)&&e.push($h[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Zr(t,e){return(t&e)===e}function Fi(t,e){return t===e}class St{constructor(e,n){if(!bx(e))throw new Error(`literal expressions must have a specific type, got ${qr(e)}`);this.type=e,this.value=n}}class Ex{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function Q_(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Ft(t,e,n){switch(typeof t){case"boolean":{if(Fi(e,tn))return new St(tn,t?"true":"false");if(!Zr(e,Ht))throw new Error(`got a boolean, but expected ${qr(e)}`);return new St(Ht,t)}case"number":{if(Fi(e,Hr))return new St(Hr,on(t));if(Fi(e,Ht))return new St(Ht,!!t);if(Fi(e,tn))return new St(tn,t.toString());if(!Zr(e,Ke))throw new Error(`got a number, but expected ${qr(e)}`);return new St(Ke,t)}case"string":{if(Fi(e,Nn))return new St(Nn,Ih(t));if(Fi(e,Ht))return new St(Ht,!!t);if(!Zr(e,tn))throw new Error(`got a string, but expected ${qr(e)}`);return new St(tn,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return kx(t,e,n);for(const i of t)if(typeof i!="number")throw new Error("expected an array of numbers");if(Fi(e,Hr)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new St(Hr,t)}if(Fi(e,Nn)){if(t.length===3)return new St(Nn,[...t,1]);if(t.length===4)return new St(Nn,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Zr(e,ks))throw new Error(`got an array of numbers, but expected ${qr(e)}`);return new St(ks,t)}const V={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},wx={[V.Get]:ke(ze(1,1/0),Yf),[V.Var]:ke(ze(1,1),xx),[V.Has]:ke(ze(1,1/0),Yf),[V.Id]:ke(Cx,Bs),[V.Concat]:ke(ze(2,1/0),Je(tn)),[V.GeometryType]:ke(Sx,Bs),[V.LineMetric]:ke(Bs),[V.Resolution]:ke(Bs),[V.Zoom]:ke(Bs),[V.Time]:ke(Bs),[V.Any]:ke(ze(2,1/0),Je(Ht)),[V.All]:ke(ze(2,1/0),Je(Ht)),[V.Not]:ke(ze(1,1),Je(Ht)),[V.Equal]:ke(ze(2,2),Je(ma)),[V.NotEqual]:ke(ze(2,2),Je(ma)),[V.GreaterThan]:ke(ze(2,2),Je(Ke)),[V.GreaterThanOrEqualTo]:ke(ze(2,2),Je(Ke)),[V.LessThan]:ke(ze(2,2),Je(Ke)),[V.LessThanOrEqualTo]:ke(ze(2,2),Je(Ke)),[V.Multiply]:ke(ze(2,1/0),Xf),[V.Coalesce]:ke(ze(2,1/0),Xf),[V.Divide]:ke(ze(2,2),Je(Ke)),[V.Add]:ke(ze(2,1/0),Je(Ke)),[V.Subtract]:ke(ze(2,2),Je(Ke)),[V.Clamp]:ke(ze(3,3),Je(Ke)),[V.Mod]:ke(ze(2,2),Je(Ke)),[V.Pow]:ke(ze(2,2),Je(Ke)),[V.Abs]:ke(ze(1,1),Je(Ke)),[V.Floor]:ke(ze(1,1),Je(Ke)),[V.Ceil]:ke(ze(1,1),Je(Ke)),[V.Round]:ke(ze(1,1),Je(Ke)),[V.Sin]:ke(ze(1,1),Je(Ke)),[V.Cos]:ke(ze(1,1),Je(Ke)),[V.Atan]:ke(ze(1,2),Je(Ke)),[V.Sqrt]:ke(ze(1,1),Je(Ke)),[V.Match]:ke(ze(4,1/0),Vf,Tx),[V.Between]:ke(ze(3,3),Je(Ke)),[V.Interpolate]:ke(ze(6,1/0),Vf,Ix),[V.Case]:ke(ze(3,1/0),Rx,Ax),[V.In]:ke(ze(2,2),Px),[V.Number]:ke(ze(1,1/0),Je(ma)),[V.String]:ke(ze(1,1/0),Je(ma)),[V.Array]:ke(ze(1,1/0),Je(Ke)),[V.Color]:ke(ze(1,4),Je(Ke)),[V.Band]:ke(ze(1,3),Je(Ke)),[V.Palette]:ke(ze(2,2),Ox),[V.ToString]:ke(ze(1,1),Je(Ht|Ke|tn|Nn))};function Yf(t,e,n){const i=t.length-1,s=new Array(i);for(let r=0;r<i;++r){const o=t[r+1];switch(typeof o){case"number":{s[r]=new St(Ke,o);break}case"string":{s[r]=new St(tn,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}r===0&&n.properties.add(String(o))}return s}function xx(t,e,n){const i=t[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return n.variables.add(i),[new St(tn,i)]}function Cx(t,e,n){n.featureId=!0}function Sx(t,e,n){n.geometryType=!0}function Bs(t,e,n){const i=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ze(t,e){return function(n,i,s){const r=n[0],o=n.length-1;if(t===e){if(o!==t){const a=t===1?"":"s";throw new Error(`expected ${t} argument${a} for ${r}, got ${o}`)}}else if(o<t||o>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${a} arguments for ${r}, got ${o}`)}}}function Xf(t,e,n){const i=t.length-1,s=new Array(i);for(let r=0;r<i;++r){const o=Ft(t[r+1],e,n);s[r]=o}return s}function Je(t){return function(e,n,i){const s=e.length-1,r=new Array(s);for(let o=0;o<s;++o){const a=Ft(e[o+1],t,i);r[o]=a}return r}}function Rx(t,e,n){const i=t[0],s=t.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${s} instead`)}function Vf(t,e,n){const i=t[0],s=t.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${s} instead`)}function Tx(t,e,n){const i=t.length-1,s=tn|Ke|Ht,r=Ft(t[1],s,n),o=Ft(t[t.length-1],e,n),a=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const u=Ft(t[l+2],r.type,n);a[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=Ft(t[l+3],o.type,n);a[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[r,...a,o]}function Ix(t,e,n){const i=t[1];let s;switch(i[0]){case"linear":s=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);s=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const r=new St(Ke,s);let o;try{o=Ft(t[2],Ke,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const u=Ft(t[l+3],Ke,n);a[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=Ft(t[l+4],e,n);a[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[r,o,...a]}function Ax(t,e,n){const i=Ft(t[t.length-1],e,n),s=new Array(t.length-1);for(let r=0;r<s.length-1;r+=2){try{const o=Ft(t[r+1],Ht,n);s[r]=o}catch(o){throw new Error(`failed to parse argument ${r} of case expression: ${o.message}`)}try{const o=Ft(t[r+2],i.type,n);s[r+1]=o}catch(o){throw new Error(`failed to parse argument ${r+1} of case expression: ${o.message}`)}}return s[s.length-1]=i,s}function Px(t,e,n){let i=t[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],s=tn}else s=Ke;const r=new Array(i.length);for(let a=0;a<r.length;a++)try{const l=Ft(i[a],s,n);r[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Ft(t[1],s,n),...r]}function Ox(t,e,n){let i;try{i=Ft(t[1],Ke,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const s=t[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const r=new Array(s.length);for(let o=0;o<r.length;o++){let a;try{a=Ft(s[o],Nn,n)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof St))throw new Error(`the palette color at index ${o} must be a literal value`);r[o]=a}return[i,...r]}function ke(...t){return function(e,n,i){const s=e[0];let r;for(let o=0;o<t.length;o++){const a=t[o](e,n,i);if(o==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");r=a}}return new Ex(n,s,...r)}}function kx(t,e,n){const i=t[0],s=wx[i];if(!s)throw new Error(`unknown operator: ${i}`);return s(t,e,n)}function em(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return em(t.getGeometries()[0]);default:return""}}function tm(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Oi(t,e,n){const i=Ft(t,e,n);return Un(i)}function Un(t,e){if(t instanceof St){if(t.type===Nn&&typeof t.value=="string"){const i=Ih(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case V.Number:case V.String:case V.Coalesce:return Lx(t);case V.Get:case V.Var:case V.Has:return Mx(t);case V.Id:return i=>i.featureId;case V.GeometryType:return i=>i.geometryType;case V.Concat:{const i=t.args.map(s=>Un(s));return s=>"".concat(...i.map(r=>r(s).toString()))}case V.Resolution:return i=>i.resolution;case V.Any:case V.All:case V.Between:case V.In:case V.Not:return Fx(t);case V.Equal:case V.NotEqual:case V.LessThan:case V.LessThanOrEqualTo:case V.GreaterThan:case V.GreaterThanOrEqualTo:return Dx(t);case V.Multiply:case V.Divide:case V.Add:case V.Subtract:case V.Clamp:case V.Mod:case V.Pow:case V.Abs:case V.Floor:case V.Ceil:case V.Round:case V.Sin:case V.Cos:case V.Atan:case V.Sqrt:return Nx(t);case V.Case:return $x(t);case V.Match:return Gx(t);case V.Interpolate:return zx(t);case V.ToString:return Wx(t);default:throw new Error(`Unsupported operator ${n}`)}}function Lx(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Un(t.args[r]);switch(n){case V.Coalesce:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case V.Number:case V.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function Mx(t,e){const i=t.args[0].value;switch(t.operator){case V.Get:return s=>{const r=t.args;let o=s.properties[i];for(let a=1,l=r.length;a<l;++a){const c=r[a].value;o=o[c]}return o};case V.Var:return s=>s.variables[i];case V.Has:return s=>{const r=t.args;if(!(i in s.properties))return!1;let o=s.properties[i];for(let a=1,l=r.length;a<l;++a){const c=r[a].value;if(!o||!Object.hasOwn(o,c))return!1;o=o[c]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function Dx(t,e){const n=t.operator,i=Un(t.args[0]),s=Un(t.args[1]);switch(n){case V.Equal:return r=>i(r)===s(r);case V.NotEqual:return r=>i(r)!==s(r);case V.LessThan:return r=>i(r)<s(r);case V.LessThanOrEqualTo:return r=>i(r)<=s(r);case V.GreaterThan:return r=>i(r)>s(r);case V.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${n}`)}}function Fx(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Un(t.args[r]);switch(n){case V.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case V.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case V.Between:return r=>{const o=s[0](r),a=s[1](r),l=s[2](r);return o>=a&&o<=l};case V.In:return r=>{const o=s[0](r);for(let a=1;a<i;++a)if(o===s[a](r))return!0;return!1};case V.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${n}`)}}function Nx(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Un(t.args[r]);switch(n){case V.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case V.Divide:return r=>s[0](r)/s[1](r);case V.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case V.Subtract:return r=>s[0](r)-s[1](r);case V.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const l=s[2](r);return o>l?l:o};case V.Mod:return r=>s[0](r)%s[1](r);case V.Pow:return r=>Math.pow(s[0](r),s[1](r));case V.Abs:return r=>Math.abs(s[0](r));case V.Floor:return r=>Math.floor(s[0](r));case V.Ceil:return r=>Math.ceil(s[0](r));case V.Round:return r=>Math.round(s[0](r));case V.Sin:return r=>Math.sin(s[0](r));case V.Cos:return r=>Math.cos(s[0](r));case V.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case V.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${n}`)}}function $x(t,e){const n=t.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Un(t.args[s]);return s=>{for(let r=0;r<n-1;r+=2)if(i[r](s))return i[r+1](s);return i[n-1](s)}}function Gx(t,e){const n=t.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Un(t.args[s]);return s=>{const r=i[0](s);for(let o=1;o<n;o+=2)if(r===i[o](s))return i[o+1](s);return i[n-1](s)}}function zx(t,e){const n=t.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=Un(t.args[s]);return s=>{const r=i[0](s),o=i[1](s);let a,l;for(let u=2;u<n;u+=2){const c=i[u](s);let h=i[u+1](s);const d=Array.isArray(h);if(d&&(h=Pw(h)),c>=o)return u===2?h:d?Bx(r,o,a,l,c,h):Jr(r,o,a,l,c,h);a=c,l=h}return l}}function Wx(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=Un(t.args[r]);switch(n){case V.ToString:return r=>{const o=s[0](r);return t.args[0].type===Nn?Ah(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Jr(t,e,n,i,s,r){const o=s-n;if(o===0)return i;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+l*(r-i)}function Bx(t,e,n,i,s,r){if(s-n===0)return i;const a=Mf(i),l=Mf(r);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[Jr(t,e,n,a[0],s,l[0]),Jr(t,e,n,a[1],s,l[1]),a[2]+Jr(t,e,n,0,s,u),Jr(t,e,n,i[3],s,r[3])];return N_(Ow(c))}function Ux(t){return!0}function Kx(t){const e=Q_(),n=jx(t,e),i=tm();return function(s,r){if(i.properties=s.getPropertiesInternal(),i.resolution=r,e.featureId){const o=s.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=em(s.getGeometry())),n(i)}}function Hf(t){const e=Q_(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=Ru(t[o],e);const s=tm(),r=new Array(n);return function(o,a){if(s.properties=o.getPropertiesInternal(),s.resolution=a,e.featureId){const u=o.getId();u!==void 0?s.featureId=u:s.featureId=null}let l=0;for(let u=0;u<n;++u){const c=i[u](s);c&&(r[l]=c,l+=1)}return r.length=l,r}}function jx(t,e){const n=t.length,i=new Array(n);for(let s=0;s<n;++s){const r=t[s],o="filter"in r?Oi(r.filter,Ht,e):Ux;let a;if(Array.isArray(r.style)){const l=r.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=Ru(r.style[u],e)}else a=[Ru(r.style,e)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<n;++a){const l=i[a].filter;if(l(s)&&!(t[a].else&&o)){o=!0;for(const u of i[a].styles){const c=u(s);c&&r.push(c)}}}return r}}function Ru(t,e){const n=Do(t,"",e),i=Fo(t,"",e),s=Yx(t,e),r=Xx(t,e),o=sn(t,"z-index",e);if(!n&&!i&&!s&&!r&&!Er(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new xi;return function(l){let u=!0;if(n){const c=n(l);c&&(u=!1),a.setFill(c)}if(i){const c=i(l);c&&(u=!1),a.setStroke(c)}if(s){const c=s(l);c&&(u=!1),a.setText(c)}if(r){const c=r(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function Do(t,e,n){let i;if(e+"fill-pattern-src"in t)i=Zx(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return r=>null;i=Gh(t,e+"fill-color",n)}if(!i)return null;const s=new Xo;return function(r){const o=i(r);return o===Th?null:(s.setColor(o),s)}}function Fo(t,e,n){const i=sn(t,e+"stroke-width",n),s=Gh(t,e+"stroke-color",n);if(!i&&!s)return null;const r=vi(t,e+"stroke-line-cap",n),o=vi(t,e+"stroke-line-join",n),a=nm(t,e+"stroke-line-dash",n),l=sn(t,e+"stroke-line-dash-offset",n),u=sn(t,e+"stroke-miter-limit",n),c=new Vo;return function(h){if(s){const d=s(h);if(d===Th)return null;c.setColor(d)}if(i&&c.setWidth(i(h)),r){const d=r(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function Yx(t,e){const n="text-",i=vi(t,n+"value",e);if(!i)return null;const s=Do(t,n,e),r=Do(t,n+"background-",e),o=Fo(t,n,e),a=Fo(t,n+"background-",e),l=vi(t,n+"font",e),u=sn(t,n+"max-angle",e),c=sn(t,n+"offset-x",e),h=sn(t,n+"offset-y",e),d=No(t,n+"overflow",e),f=vi(t,n+"placement",e),g=sn(t,n+"repeat",e),p=Ql(t,n+"scale",e),m=No(t,n+"rotate-with-view",e),w=sn(t,n+"rotation",e),v=vi(t,n+"align",e),y=vi(t,n+"justify",e),E=vi(t,n+"baseline",e),b=nm(t,n+"padding",e),I=ec(t,n+"declutter-mode"),A=new kh({declutterMode:I});return function(O){if(A.setText(i(O)),s&&A.setFill(s(O)),r&&A.setBackgroundFill(r(O)),o&&A.setStroke(o(O)),a&&A.setBackgroundStroke(a(O)),l&&A.setFont(l(O)),u&&A.setMaxAngle(u(O)),c&&A.setOffsetX(c(O)),h&&A.setOffsetY(h(O)),d&&A.setOverflow(d(O)),f){const D=f(O);if(D!=="point"&&D!=="line")throw new Error("Expected point or line for text-placement");A.setPlacement(D)}if(g&&A.setRepeat(g(O)),p&&A.setScale(p(O)),m&&A.setRotateWithView(m(O)),w&&A.setRotation(w(O)),v){const D=v(O);if(D!=="left"&&D!=="center"&&D!=="right"&&D!=="end"&&D!=="start")throw new Error("Expected left, right, center, start, or end for text-align");A.setTextAlign(D)}if(y){const D=y(O);if(D!=="left"&&D!=="right"&&D!=="center")throw new Error("Expected left, right, or center for text-justify");A.setJustify(D)}if(E){const D=E(O);if(D!=="bottom"&&D!=="top"&&D!=="middle"&&D!=="alphabetic"&&D!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");A.setTextBaseline(D)}return b&&A.setPadding(b(O)),A}}function Xx(t,e){return"icon-src"in t?Vx(t,e):"shape-points"in t?Hx(t,e):"circle-radius"in t?qx(t,e):null}function Vx(t,e){const n="icon-",i=n+"src",s=im(t[i],i),r=al(t,n+"anchor",e),o=Ql(t,n+"scale",e),a=sn(t,n+"opacity",e),l=al(t,n+"displacement",e),u=sn(t,n+"rotation",e),c=No(t,n+"rotate-with-view",e),h=Zf(t,n+"anchor-origin"),d=Jf(t,n+"anchor-x-units"),f=Jf(t,n+"anchor-y-units"),g=tC(t,n+"color"),p=Qx(t,n+"cross-origin"),m=eC(t,n+"offset"),w=Zf(t,n+"offset-origin"),v=ll(t,n+"width"),y=ll(t,n+"height"),E=Jx(t,n+"size"),b=ec(t,n+"declutter-mode"),I=new Ho({src:s,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:m,offsetOrigin:w,height:y,width:v,size:E,declutterMode:b});return function(A){return a&&I.setOpacity(a(A)),l&&I.setDisplacement(l(A)),u&&I.setRotation(u(A)),c&&I.setRotateWithView(c(A)),o&&I.setScale(o(A)),r&&I.setAnchor(r(A)),I}}function Hx(t,e){const n="shape-",i=n+"points",s=n+"radius",r=Tu(t[i],i),o=Tu(t[s],s),a=Do(t,n,e),l=Fo(t,n,e),u=Ql(t,n+"scale",e),c=al(t,n+"displacement",e),h=sn(t,n+"rotation",e),d=No(t,n+"rotate-with-view",e),f=ll(t,n+"radius2"),g=ll(t,n+"angle"),p=ec(t,n+"declutter-mode"),m=new ql({points:r,radius:o,radius2:f,angle:g,declutterMode:p});return function(w){return a&&m.setFill(a(w)),l&&m.setStroke(l(w)),c&&m.setDisplacement(c(w)),h&&m.setRotation(h(w)),d&&m.setRotateWithView(d(w)),u&&m.setScale(u(w)),m}}function qx(t,e){const n="circle-",i=Do(t,n,e),s=Fo(t,n,e),r=sn(t,n+"radius",e),o=Ql(t,n+"scale",e),a=al(t,n+"displacement",e),l=sn(t,n+"rotation",e),u=No(t,n+"rotate-with-view",e),c=ec(t,n+"declutter-mode"),h=new Zl({radius:5,declutterMode:c});return function(d){return r&&h.setRadius(r(d)),i&&h.setFill(i(d)),s&&h.setStroke(s(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function sn(t,e,n){if(!(e in t))return;const i=Oi(t[e],Ke,n);return function(s){return Tu(i(s),e)}}function vi(t,e,n){if(!(e in t))return null;const i=Oi(t[e],tn,n);return function(s){return im(i(s),e)}}function Zx(t,e,n){const i=vi(t,e+"pattern-src",n),s=qf(t,e+"pattern-offset",n),r=qf(t,e+"pattern-size",n),o=Gh(t,e+"color",n);return function(a){return{src:i(a),offset:s&&s(a),size:r&&r(a),color:o&&o(a)}}}function No(t,e,n){if(!(e in t))return null;const i=Oi(t[e],Ht,n);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${e}`);return r}}function Gh(t,e,n){if(!(e in t))return null;const i=Oi(t[e],Nn,n);return function(s){return sm(i(s),e)}}function nm(t,e,n){if(!(e in t))return null;const i=Oi(t[e],ks,n);return function(s){return qo(i(s),e)}}function al(t,e,n){if(!(e in t))return null;const i=Oi(t[e],ks,n);return function(s){const r=qo(i(s),e);if(r.length!==2)throw new Error(`Expected two numbers for ${e}`);return r}}function qf(t,e,n){if(!(e in t))return null;const i=Oi(t[e],ks,n);return function(s){return rm(i(s),e)}}function Ql(t,e,n){if(!(e in t))return null;const i=Oi(t[e],ks|Ke,n);return function(s){return nC(i(s),e)}}function ll(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function Jx(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return on(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function Qx(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function Zf(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function Jf(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function eC(t,e){const n=t[e];if(n!==void 0)return qo(n,e)}function ec(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function tC(t,e){const n=t[e];if(n!==void 0)return sm(n,e)}function qo(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function im(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function Tu(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function sm(t,e){if(typeof t=="string")return t;const n=qo(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function rm(t,e){const n=qo(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function nC(t,e){return typeof t=="number"?t:rm(t,e)}const Qf={RENDER_ORDER:"renderOrder"};class om extends Jl{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Qf.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new J_(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(Qf.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?V_:e;const n=iC(e);this.styleFunction_=e===null?void 0:Qw(n),this.changed()}}function iC(t){if(t===void 0)return V_;if(!t)return null;if(typeof t=="function"||t instanceof xi)return t;if(!Array.isArray(t))return Hf([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof xi){const s=new Array(e);for(let r=0;r<e;++r){const o=t[r];if(!(o instanceof xi))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in n){const s=new Array(e);for(let r=0;r<e;++r){const o=t[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return Kx(s)}return Hf(t)}const Te={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},va=[Te.FILL],qi=[Te.STROKE],Cs=[Te.BEGIN_PATH],eg=[Te.CLOSE_PATH];class am{drawCustom(e,n,i,s,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,i){}drawFeature(e,n,i){}drawGeometryCollection(e,n,i){}drawLineString(e,n,i){}drawMultiLineString(e,n,i){}drawMultiPoint(e,n,i){}drawMultiPolygon(e,n,i){}drawPoint(e,n,i){}drawPolygon(e,n,i){}drawText(e,n,i){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}class Zo extends am{constructor(e,n,i,s){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=n)s[0]=e[a],s[1]=e[a+1],wr(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,n,i,s,r,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(n+=s);let c=e[n],h=e[n+1];const d=this.tmpCoordinate_;let f=!0,g,p,m;for(g=n+s;g<i;g+=s)d[0]=e[g],d[1]=e[g+1],m=vu(u,d),m!==p?(f&&(a[l++]=c,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):m===Ot.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,c=d[0],h=d[1],p=m;return(r&&f||g===n+s)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,n,i,s,r){for(let o=0,a=i.length;o<a;++o){const l=i[o],u=this.appendFlatLineCoordinates(e,n,l,s,!1,!1);r.push(u),n=l}return n}drawCustom(e,n,i,s,r){this.beginGeometry(e,n,r);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let u,c,h,d,f;switch(o){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),d=[];const g=e.getEndss();f=0;for(let p=0,m=g.length;p<m;++p){const w=[];f=this.drawCustomCoordinates_(u,f,g[p],a,w),d.push(w)}this.instructions.push([Te.CUSTOM,l,d,e,i,Af,r]),this.hitDetectionInstructions.push([Te.CUSTOM,l,d,e,s||i,Af,r]);break;case"Polygon":case"MultiLineString":h=[],u=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(u,0,e.getEnds(),a,h),this.instructions.push([Te.CUSTOM,l,h,e,i,nl,r]),this.hitDetectionInstructions.push([Te.CUSTOM,l,h,e,s||i,nl,r]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(u,0,u.length,a,!1,!1),this.instructions.push([Te.CUSTOM,l,c,e,i,Es,r]),this.hitDetectionInstructions.push([Te.CUSTOM,l,c,e,s||i,Es,r]);break;case"MultiPoint":u=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(u,a),c>l&&(this.instructions.push([Te.CUSTOM,l,c,e,i,Es,r]),this.hitDetectionInstructions.push([Te.CUSTOM,l,c,e,s||i,Es,r]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),c=this.coordinates.length,this.instructions.push([Te.CUSTOM,l,c,e,i,void 0,r]),this.hitDetectionInstructions.push([Te.CUSTOM,l,c,e,s||i,void 0,r]);break}this.endGeometry(n)}beginGeometry(e,n,i){this.beginGeometryInstruction1_=[Te.BEGIN_GEOMETRY,n,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Te.BEGIN_GEOMETRY,n,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const i=e.length;let s,r,o=-1;for(n=0;n<i;++n)s=e[n],r=s[0],r==Te.END_GEOMETRY?o=n:r==Te.BEGIN_GEOMETRY&&(s[2]=n,TE(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(e,n){const i=this.state;if(e){const s=e.getColor();i.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,i.fillStyle=ti(s||en)}else i.fillStyle=void 0;if(n){const s=n.getColor();i.strokeStyle=ti(s||ko);const r=n.getLineCap();i.lineCap=r!==void 0?r:Cr;const o=n.getLineDash();i.lineDash=o?o.slice():Ei;const a=n.getLineDashOffset();i.lineDashOffset=a||wi;const l=n.getLineJoin();i.lineJoin=l!==void 0?l:Sr;const u=n.getWidth();i.lineWidth=u!==void 0?u:Mo;const c=n.getMiterLimit();i.miterLimit=c!==void 0?c:Oo,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const n=e.fillStyle,i=[Te.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Te.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){const i=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||r!=e.currentLineDash&&!as(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[Te.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=y_(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;uh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class sC extends Zo{constructor(e,n,i,s){super(e,n,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,i){if(!this.image_||this.maxExtent&&!wr(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,i);const s=e.getFlatCoordinates(),r=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,r);this.instructions.push([Te.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Te.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,i){if(!this.image_)return;this.beginGeometry(e,n,i);const s=e.getFlatCoordinates(),r=[];for(let l=0,u=s.length;l<u;l+=e.getStride())(!this.maxExtent||wr(this.maxExtent,s.slice(l,l+2)))&&r.push(s[l],s[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,2);this.instructions.push([Te.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Te.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const i=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class rC extends Zo{constructor(e,n,i,s){super(e,n,i,s)}drawFlatCoordinates_(e,n,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,i,s,!1,!1),a=[Te.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,n,i){const s=this.state,r=s.strokeStyle,o=s.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Ei,wi],Cs);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(qi),this.endGeometry(n)}drawMultiLineString(e,n,i){const s=this.state,r=s.strokeStyle,o=s.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Ei,wi],Cs);const a=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinates_(l,c,a[h],u);this.hitDetectionInstructions.push(qi),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(qi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(qi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Cs)}}class tg extends Zo{constructor(e,n,i,s){super(e,n,i,s)}drawFlatCoordinatess_(e,n,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=i.length;this.instructions.push(Cs),this.hitDetectionInstructions.push(Cs);for(let u=0;u<l;++u){const c=i[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,n,c,s,!0,!a),f=[Te.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(eg),this.hitDetectionInstructions.push(eg)),n=c}return o&&(this.instructions.push(va),this.hitDetectionInstructions.push(va)),a&&(this.instructions.push(qi),this.hitDetectionInstructions.push(qi)),n}drawCircle(e,n,i){const s=this.state,r=s.fillStyle,o=s.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_FILL_STYLE,en]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Ei,wi]);const a=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const c=[Te.CIRCLE,u];this.instructions.push(Cs,c),this.hitDetectionInstructions.push(Cs,c),s.fillStyle!==void 0&&(this.instructions.push(va),this.hitDetectionInstructions.push(va)),s.strokeStyle!==void 0&&(this.instructions.push(qi),this.hitDetectionInstructions.push(qi)),this.endGeometry(n)}drawPolygon(e,n,i){const s=this.state,r=s.fillStyle,o=s.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_FILL_STYLE,en]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Ei,wi]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,a,u),this.endGeometry(n)}drawMultiPolygon(e,n,i){const s=this.state,r=s.fillStyle,o=s.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_FILL_STYLE,en]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Te.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Ei,wi]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let c=0;for(let h=0,d=a.length;h<d;++h)c=this.drawFlatCoordinatess_(l,c,a[h],u);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let i=0,s=n.length;i<s;++i)n[i]=ps(n[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function oC(t,e,n,i,s){const r=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+s<i;){const[u,c]=l.slice(-2),h=e[o+s],d=e[o+s+1],f=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=f,a>=t){const g=(t-a+f)/f,p=gn(u,h,g),m=gn(c,d,g);l.push(p,m),r.push(l),l=[p,m],a==t&&(o+=s),a=0}else if(a<t)l.push(e[o+s],e[o+s+1]),o+=s;else{const g=f-a,p=gn(u,h,g/f),m=gn(c,d,g/f);l.push(p,m),r.push(l),l=[p,m],a=0,o+=s}}return a>0&&r.push(l),r}function aC(t,e,n,i,s){let r=n,o=n,a=0,l=0,u=n,c,h,d,f,g,p,m,w,v,y;for(h=n;h<i;h+=s){const E=e[h],b=e[h+1];g!==void 0&&(v=E-g,y=b-p,f=Math.sqrt(v*v+y*y),m!==void 0&&(l+=d,c=Math.acos((m*v+w*y)/(d*f)),c>t&&(l>a&&(a=l,r=u,o=h),l=0,u=h-s)),d=f,m=v,w=y),g=E,p=b}return l+=f,l>a?[u,h]:[r,o]}const cl={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class lC extends Zo{constructor(e,n,i,s){super(e,n,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[en]={fillStyle:en},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,i){const s=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!s&&!r)return;const a=this.coordinates;let l=a.length;const u=e.getType();let c=null,h=e.getStride();if(o.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!nn(this.maxExtent,e.getExtent()))return;let d;if(c=e.getFlatCoordinates(),u=="LineString")d=[c.length];else if(u=="MultiLineString")d=e.getEnds();else if(u=="Polygon")d=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const m=e.getEndss();d=[];for(let w=0,v=m.length;w<v;++w)d.push(m[w][0])}this.beginGeometry(e,n,i);const f=o.repeat,g=f?void 0:o.textAlign;let p=0;for(let m=0,w=d.length;m<w;++m){let v;f?v=oC(f*this.resolution,c,p,d[m],h):v=[c.slice(p,d[m])];for(let y=0,E=v.length;y<E;++y){const b=v[y];let I=0,A=b.length;if(g==null){const D=aC(o.maxAngle,b,0,b.length,2);I=D[0],A=D[1]}for(let D=I;D<A;D+=h)a.push(b[D],b[D+1]);const O=a.length;p=d[m],this.drawChars_(l,O),l=O}}this.endGeometry(n)}else{let d=o.overflow?null:[];switch(u){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),h=2;break;case"Polygon":c=e.getFlatInteriorPoint(),o.overflow||d.push(c[2]/this.resolution),h=3;break;case"MultiPolygon":const v=e.getFlatInteriorPoints();c=[];for(let y=0,E=v.length;y<E;y+=3)o.overflow||d.push(v[y+2]/this.resolution),c.push(v[y],v[y+1]);if(c.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(c,h);if(f===l)return;if(d&&(f-l)/2!==c.length/h){let v=l/2;d=d.filter((y,E)=>{const b=a[(v+E)*2]===c[E*h]&&a[(v+E)*2+1]===c[E*h+1];return b||--v,b})}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n,i);let g=o.padding;if(g!=xs&&(o.scale[0]<0||o.scale[1]<0)){let v=o.padding[0],y=o.padding[1],E=o.padding[2],b=o.padding[3];o.scale[0]<0&&(y=-y,b=-b),o.scale[1]<0&&(v=-v,E=-E),g=[v,y,E,b]}const p=this.pixelRatio;this.instructions.push([Te.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==xs?xs:g.map(function(v){return v*p}),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const m=1/p,w=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=en,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Te.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,this.declutterMode_,this.declutterImageWithText_,g,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?en:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),o.backgroundFill&&(this.state.fillStyle=w,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:n.font,textAlign:n.textAlign||Lo,justify:n.justify,textBaseline:n.textBaseline||rl,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,n){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=cl[s.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Te.DRAW_CHARS,e,n,u,s.overflow,a,s.maxAngle,l,c,r,d*l,h,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([Te.DRAW_CHARS,e,n,u,s.overflow,a&&en,s.maxAngle,l,c,r,d*l,h,o,1/l,this.declutterMode_])}setTextStyle(e,n){let i,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=ti(o.getColor()||en)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),p=a.getLineDashOffset(),m=a.getWidth(),w=a.getMiterLimit();r.lineCap=a.getLineCap()||Cr,r.lineDash=g?g.slice():Ei,r.lineDashOffset=p===void 0?wi:p,r.lineJoin=a.getLineJoin()||Sr,r.lineWidth=m===void 0?Mo:m,r.miterLimit=w===void 0?Oo:w,r.strokeStyle=ti(a.getColor()||ko)}i=this.textState_;const l=e.getFont()||Y_;Vw(l);const u=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||rl,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||xs,i.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:it(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+it(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const cC={Circle:tg,Default:Zo,Image:sC,LineString:rC,Polygon:tg,Text:lC};class uC{constructor(e,n,i,s){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const i=this.buildersByZIndex_[n];for(const s in i){const r=i[s].finish();e[n][s]=r}}return e}getBuilder(e,n){const i=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[n];if(r===void 0){const o=cC[n];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[n]=r}return r}}const hC=5;class dC extends jo{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=hC}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return qe()}getData(e){return null}prepareFrame(e){return qe()}renderFrame(e,n){return qe()}forEachFeatureAtCoordinate(e,n,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===We.LOADED||n.getState()===We.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=We.LOADED&&n!=We.ERROR&&e.addEventListener(Ne.CHANGE,this.boundHandleImageChange_),n==We.IDLE&&(e.load(),n=e.getState()),n==We.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class lm extends Pi{constructor(e,n,i,s){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=s}}class cm{constructor(){rd(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(il(),{get:(e,n)=>{if(typeof il()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,i),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let i=0,s=n.length;i<s;++i){const r=n[i];if(typeof r=="function"){r(e);continue}const o=n[++i];if(typeof e[r]=="function")e[r](...o);else{if(typeof o=="function"){e[r]=o(e);continue}e[r]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ng=[];let Qs=null;function fC(){Qs=xt(1,1,void 0,{willReadFrequently:!0})}class um extends dC{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=zn(),this.pixelTransform=zn(),this.inversePixelTransform=zn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,i){Qs||fC(),Qs.clearRect(0,0,1,1);let s;try{Qs.drawImage(e,n,i,1,1,0,0,1,1),s=Qs.getImageData(0,0,1,1).data}catch{return Qs=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&as(Po(e.style.backgroundColor),Po(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=xt();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const s=Ms(i),r=Kl(i),o=Ul(i),a=Bl(i);Lt(n.coordinateToPixelTransform,s),Lt(n.coordinateToPixelTransform,r),Lt(n.coordinateToPixelTransform,o),Lt(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Lt(l,s),Lt(l,r),Lt(l,o),Lt(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const i=e.extent,s=e.viewState.resolution,r=e.viewState.rotation,o=e.pixelRatio,a=Math.round(et(i)/s*o),l=Math.round(Ut(i)/s*o);Ri(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,r,-a/2,-l/2),v_(this.inversePixelTransform,this.pixelTransform);const u=DE(this.pixelTransform);if(this.useContainer(n,u,this.getBackground(e)),!this.containerReused){const c=this.context.canvas;c.width!=a||c.height!=l?(c.width=a,c.height=l):this.context.clearRect(0,0,a,l),u!==c.style.transform&&(c.style.transform=u)}}dispatchRenderEvent_(e,n,i){const s=this.getLayer();if(s.hasListener(e)){const r=new lm(e,this.inversePixelTransform,i,n);s.dispatchEvent(r)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Rn.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(Rn.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new cm),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Rn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Rn.POSTRENDER,this.context,e))}getRenderTransform(e,n,i,s,r,o,a){const l=r/2,u=o/2,c=s/n,h=-c,d=-e[0]+a,f=-e[1];return Ri(this.tempTransform,l,u,c,h,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function gC(t,e,n,i,s,r,o,a,l,u,c,h){let d=t[e],f=t[e+1],g=0,p=0,m=0,w=0;function v(){g=d,p=f,e+=i,d=t[e],f=t[e+1],w+=m,m=Math.sqrt((d-g)*(d-g)+(f-p)*(f-p))}do v();while(e<n-i&&w+m<r);let y=m===0?0:(r-w)/m;const E=gn(g,d,y),b=gn(p,f,y),I=e-i,A=w,O=r+a*l(u,s,c);for(;e<n-i&&w+m<O;)v();y=m===0?0:(O-w)/m;const D=gn(g,d,y),re=gn(p,f,y);let ee;if(h){const F=[E,b,D,re];P_(F,0,4,2,h,F,F),ee=F[0]>F[2]}else ee=E>D;const Q=Math.PI,ae=[],Y=I+i===e;e=I,m=0,w=A,d=t[e],f=t[e+1];let H;if(Y){v(),H=Math.atan2(f-p,d-g),ee&&(H+=H>0?-Q:Q);const F=(D+E)/2,J=(re+b)/2;return ae[0]=[F,J,(O-r)/2,H,s],ae}s=s.replace(/\n/g," ");for(let F=0,J=s.length;F<J;){v();let le=Math.atan2(f-p,d-g);if(ee&&(le+=le>0?-Q:Q),H!==void 0){let B=le-H;if(B+=B>Q?-2*Q:B<-Q?2*Q:0,Math.abs(B)>o)return null}H=le;const ye=F;let oe=0;for(;F<J;++F){const B=ee?J-F-1:F,xe=a*l(u,s[B],c);if(e+i<n&&w+m<r+oe+xe/2)break;oe+=xe}if(F===ye)continue;const ue=ee?s.substring(J-ye,J-F):s.substring(ye,F);y=m===0?0:(r+oe/2-w)/m;const we=gn(g,d,y),te=gn(p,f,y);ae.push([we,te,oe/2,le,ue]),r+=oe}return ae}const Us=In(),Ni=[],di=[],fi=[],$i=[];function ig(t){return t[3].declutterBox}const sg=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Ic(t,e){return e==="start"?e=sg.test(t)?"right":"left":e==="end"&&(e=sg.test(t)?"left":"right"),cl[e]}function pC(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}class _C{constructor(e,n,i,s,r){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=zn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new cm:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,i,s){const r=e+n+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=l.justify?cl[l.justify]:Ic(Array.isArray(e)?e[0]:e,l.textAlign||Lo),d=s&&o.lineWidth?o.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(pC,[]),{width:g,height:p,widths:m,heights:w,lineWidths:v}=qw(l,f),y=g+d,E=[],b=(y+2)*c[0],I=(p+d)*c[1],A={width:b<0?Math.floor(b):Math.ceil(b),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:E};(c[0]!=1||c[1]!=1)&&E.push("scale",c),s&&(E.push("strokeStyle",o.strokeStyle),E.push("lineWidth",d),E.push("lineCap",o.lineCap),E.push("lineJoin",o.lineJoin),E.push("miterLimit",o.miterLimit),E.push("setLineDash",[o.lineDash]),E.push("lineDashOffset",o.lineDashOffset)),i&&E.push("fillStyle",a.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const O=.5-h;let D=h*y+O*d;const re=[],ee=[];let Q=0,ae=0,Y=0,H=0,F;for(let J=0,le=f.length;J<le;J+=2){const ye=f[J];if(ye===`
`){ae+=Q,Q=0,D=h*y+O*d,++H;continue}const oe=f[J+1]||l.font;oe!==F&&(s&&re.push("font",oe),i&&ee.push("font",oe),F=oe),Q=Math.max(Q,w[Y]);const ue=[ye,D+O*m[Y]+h*(m[Y]-v[H]),.5*(d+Q)+ae];D+=m[Y],s&&re.push("strokeText",ue),i&&ee.push("fillText",ue),++Y}return Array.prototype.push.apply(E,re),Array.prototype.push.apply(E,ee),this.labels_[r]=A,A}replayTextBackground_(e,n,i,s,r,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,s,r,o,a,l,u,c,h,d,f,g,p,m){a*=d[0],l*=d[1];let w=i-a,v=s-l;const y=r+u>e?e-u:r,E=o+c>n?n-c:o,b=g[3]+y*d[0]+g[1],I=g[0]+E*d[1]+g[2],A=w-g[3],O=v-g[0];(p||h!==0)&&(Ni[0]=A,$i[0]=A,Ni[1]=O,di[1]=O,di[0]=A+b,fi[0]=di[0],fi[1]=O+I,$i[1]=fi[1]);let D;return h!==0?(D=Ri(zn(),i,s,1,1,h,-i,-s),Lt(D,Ni),Lt(D,di),Lt(D,fi),Lt(D,$i),ns(Math.min(Ni[0],di[0],fi[0],$i[0]),Math.min(Ni[1],di[1],fi[1],$i[1]),Math.max(Ni[0],di[0],fi[0],$i[0]),Math.max(Ni[1],di[1],fi[1],$i[1]),Us)):ns(Math.min(A,A+b),Math.min(O,O+I),Math.max(A,A+b),Math.max(O,O+I),Us),f&&(w=Math.round(w),v=Math.round(v)),{drawImageX:w,drawImageY:v,drawImageW:y,drawImageH:E,originX:u,originY:c,declutterBox:{minX:Us[0],minY:Us[1],maxX:Us[2],maxY:Us[3],value:m},canvasTransform:D,scale:d}}replayImageOrLabel_(e,n,i,s,r,o,a){const l=!!(o||a),u=s.declutterBox,c=a?a[2]*s.scale[0]/2:0;return u.minX-c<=n[0]&&u.maxX+c>=0&&u.minY-c<=n[1]&&u.maxY+c>=0&&(l&&this.replayTextBackground_(e,Ni,di,fi,$i,o,a),Zw(e,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const i=Lt(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(i[0]%s,i[1]%s),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,s){const r=this.textStates[n],o=this.createLabel(e,n,s,i),a=this.strokeStates[i],l=this.pixelRatio,u=Ic(Array.isArray(e)?e[0]:e,r.textAlign||Lo),c=cl[r.textBaseline||rl],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*r.scale[0],f=u*d+2*(.5-u)*h,g=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:f,anchorY:g}}execute_(e,n,i,s,r,o,a,l){const u=this.zIndexContext_;let c;this.pixelCoordinates_&&as(i,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=es(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),LE(this.renderedTransform_,i));let h=0;const d=s.length;let f=0,g,p,m,w,v,y,E,b,I,A,O,D,re,ee=0,Q=0,ae=null,Y=null;const H=this.coordinateCache_,F=this.viewRotation_,J=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,le={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},ye=this.instructions!=s||this.overlaps?0:200;let oe,ue,we,te;for(;h<d;){const B=s[h];switch(B[0]){case Te.BEGIN_GEOMETRY:oe=B[1],te=B[3],oe.getGeometry()?a!==void 0&&!nn(a,te.getExtent())?h=B[2]+1:++h:h=B[2],u&&(u.zIndex=B[4]);break;case Te.BEGIN_PATH:ee>ye&&(this.fill_(e),ee=0),Q>ye&&(e.stroke(),Q=0),!ee&&!Q&&(e.beginPath(),v=NaN,y=NaN),++h;break;case Te.CIRCLE:f=B[1];const ve=c[f],M=c[f+1],G=c[f+2],k=c[f+3],W=G-ve,ne=k-M,de=Math.sqrt(W*W+ne*ne);e.moveTo(ve+de,M),e.arc(ve,M,de,0,2*Math.PI,!0),++h;break;case Te.CLOSE_PATH:e.closePath(),++h;break;case Te.CUSTOM:f=B[1],g=B[2];const x=B[3],R=B[4],P=B[5];le.geometry=x,le.feature=oe,h in H||(H[h]=[]);const q=H[h];P?P(c,f,g,2,q):(q[0]=c[f],q[1]=c[f+1],q.length=2),u&&(u.zIndex=B[6]),R(q,le),++h;break;case Te.DRAW_IMAGE:f=B[1],g=B[2],I=B[3],p=B[4],m=B[5];let K=B[6];const se=B[7],ge=B[8],fe=B[9],he=B[10];let ie=B[11];const me=B[12];let Z=B[13];w=B[14]||"declutter";const z=B[15];if(!I&&B.length>=20){A=B[19],O=B[20],D=B[21],re=B[22];const yn=this.drawLabelWithPointPlacement_(A,O,D,re);I=yn.label,B[3]=I;const ls=B[23];p=(yn.anchorX-ls)*this.pixelRatio,B[4]=p;const bn=B[24];m=(yn.anchorY-bn)*this.pixelRatio,B[5]=m,K=I.height,B[6]=K,Z=I.width,B[13]=Z}let ce;B.length>25&&(ce=B[25]);let Ce,j,$;B.length>17?(Ce=B[16],j=B[17],$=B[18]):(Ce=xs,j=!1,$=!1),he&&J?ie+=F:!he&&!J&&(ie-=F);let pe=0;for(;f<g;f+=2){if(ce&&ce[pe++]<Z/this.pixelRatio)continue;const yn=this.calculateImageOrLabelDimensions_(I.width,I.height,c[f],c[f+1],Z,K,p,m,ge,fe,ie,me,r,Ce,j||$,oe),ls=[e,n,I,yn,se,j?ae:null,$?Y:null];if(l){let bn,Xn,En;if(z){const ft=g-f;if(!z[ft]){z[ft]={args:ls,declutterMode:w};continue}const Yt=z[ft];bn=Yt.args,Xn=Yt.declutterMode,delete z[ft],En=ig(bn)}let li,ci;if(bn&&(Xn!=="declutter"||!l.collides(En))&&(li=!0),(w!=="declutter"||!l.collides(yn.declutterBox))&&(ci=!0),Xn==="declutter"&&w==="declutter"){const ft=li&&ci;li=ft,ci=ft}li&&(Xn!=="none"&&l.insert(En),this.replayImageOrLabel_.apply(this,bn)),ci&&(w!=="none"&&l.insert(yn.declutterBox),this.replayImageOrLabel_.apply(this,ls))}else this.replayImageOrLabel_.apply(this,ls)}++h;break;case Te.DRAW_CHARS:const Me=B[1],Re=B[2],Ue=B[3],Ct=B[4];re=B[5];const On=B[6],vt=B[7],ot=B[8];D=B[9];const hn=B[10];A=B[11],O=B[12];const nd=[B[13],B[13]];w=B[14]||"declutter";const sc=this.textStates[O],Mr=sc.font,Dr=[sc.scale[0]*vt,sc.scale[1]*vt];let Fr;Mr in this.widths_?Fr=this.widths_[Mr]:(Fr={},this.widths_[Mr]=Fr);const id=K_(c,Me,Re,2),sd=Math.abs(Dr[0])*Gf(Mr,A,Fr);if(Ct||sd<=id){const yn=this.textStates[O].textAlign,ls=(id-sd)*Ic(A,yn),bn=gC(c,Me,Re,2,A,ls,On,Math.abs(Dr[0]),Gf,Mr,Fr,J?0:this.viewRotation_);e:if(bn){const Xn=[];let En,li,ci,ft,Yt;if(D)for(En=0,li=bn.length;En<li;++En){Yt=bn[En],ci=Yt[4],ft=this.createLabel(ci,O,"",D),p=Yt[2]+(Dr[0]<0?-hn:hn),m=Ue*ft.height+(.5-Ue)*2*hn*Dr[1]/Dr[0]-ot;const ui=this.calculateImageOrLabelDimensions_(ft.width,ft.height,Yt[0],Yt[1],ft.width,ft.height,p,m,0,0,Yt[3],nd,!1,xs,!1,oe);if(l&&w==="declutter"&&l.collides(ui.declutterBox))break e;Xn.push([e,n,ft,ui,1,null,null])}if(re)for(En=0,li=bn.length;En<li;++En){Yt=bn[En],ci=Yt[4],ft=this.createLabel(ci,O,re,""),p=Yt[2],m=Ue*ft.height-ot;const ui=this.calculateImageOrLabelDimensions_(ft.width,ft.height,Yt[0],Yt[1],ft.width,ft.height,p,m,0,0,Yt[3],nd,!1,xs,!1,oe);if(l&&w==="declutter"&&l.collides(ui.declutterBox))break e;Xn.push([e,n,ft,ui,1,null,null])}l&&w!=="none"&&l.load(Xn.map(ig));for(let ui=0,dv=Xn.length;ui<dv;++ui)this.replayImageOrLabel_.apply(this,Xn[ui])}}++h;break;case Te.END_GEOMETRY:if(o!==void 0){oe=B[1];const yn=o(oe,te,w);if(yn)return yn}++h;break;case Te.FILL:ye?ee++:this.fill_(e),++h;break;case Te.MOVE_TO_LINE_TO:for(f=B[1],g=B[2],ue=c[f],we=c[f+1],e.moveTo(ue,we),v=ue+.5|0,y=we+.5|0,f+=2;f<g;f+=2)ue=c[f],we=c[f+1],E=ue+.5|0,b=we+.5|0,(f==g-2||E!==v||b!==y)&&(e.lineTo(ue,we),v=E,y=b);++h;break;case Te.SET_FILL_STYLE:ae=B,this.alignAndScaleFill_=B[2],ee&&(this.fill_(e),ee=0,Q&&(e.stroke(),Q=0)),e.fillStyle=B[1],++h;break;case Te.SET_STROKE_STYLE:Y=B,Q&&(e.stroke(),Q=0),this.setStrokeStyle_(e,B),++h;break;case Te.STROKE:ye?Q++:e.stroke(),++h;break;default:++h;break}}ee&&this.fill_(e),Q&&e.stroke()}execute(e,n,i,s,r,o){this.viewRotation_=s,this.execute_(e,n,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,n,i,s,r){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,s,r)}}const ir=["Polygon","Circle","LineString","Image","Text","Default"],hm=["Image","Text"],mC=ir.filter(t=>!hm.includes(t));class vC{constructor(e,n,i,s,r,o,a){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=zn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,a)}clip(e,n){const i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,n){for(const i in e){let s=this.executorsByZIndex_[i];s===void 0&&(s={},this.executorsByZIndex_[i]=s);const r=e[i];for(const o in r){const a=r[o];s[o]=new _C(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let s=0,r=e.length;s<r;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,s,r,o){s=Math.round(s);const a=s*2+1,l=Ri(this.hitDetectionTransform_,s+.5,s+.5,1/n,-1/n,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=xt(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=In(),co(h,e),uh(h,n*(this.renderBuffer_+s),h));const d=yC(s);let f;function g(b,I,A){const O=c.getImageData(0,0,a,a).data;for(let D=0,re=d.length;D<re;D++)if(O[d[D]]>0){if(!o||A==="none"||f!=="Image"&&f!=="Text"||o.includes(b)){const ee=(d[D]-3)/4,Q=s-ee%a,ae=s-(ee/a|0),Y=r(b,I,Q*Q+ae*ae);if(Y)return Y}c.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(bi);let m,w,v,y,E;for(m=p.length-1;m>=0;--m){const b=p[m].toString();for(v=this.executorsByZIndex_[b],w=ir.length-1;w>=0;--w)if(f=ir[w],y=v[f],y!==void 0&&(E=y.executeHitDetection(c,l,i,g,h),E))return E}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const i=n[0],s=n[1],r=n[2],o=n[3],a=[i,s,i,o,r,o,r,s];return es(a,0,8,2,e,a),a}isEmpty(){return Er(this.executorsByZIndex_)}execute(e,n,i,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(bi),o=o||ir;const u=ir.length;let c,h,d,f,g;for(a&&l.reverse(),c=0,h=l.length;c<h;++c){const p=l[c].toString();for(g=this.executorsByZIndex_[p],d=0,f=o.length;d<f;++d){const m=o[d],w=g[m];if(w!==void 0){const v=a===null?void 0:w.getZIndexContext(),y=v?v.getContext():e,E=this.maxExtent_&&m!=="Image"&&m!=="Text";if(E&&(y.save(),this.clip(y,i)),!v||m==="Text"||m==="Image"?w.execute(y,n,i,s,r,a):v.pushFunction(b=>w.execute(b,n,i,s,r,a)),E&&y.restore(),v){v.offset();const b=l[c]*u+d;this.deferredZIndexContexts_[b]||(this.deferredZIndexContexts_[b]=[]),this.deferredZIndexContexts_[b].push(v)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(bi);for(let i=0,s=n.length;i<s;++i)e[n[i]].forEach(r=>{r.draw(this.renderedContext_),r.clear()}),e[n[i]].length=0}}const Ac={};function yC(t){if(Ac[t]!==void 0)return Ac[t];const e=t*2+1,n=t*t,i=new Array(n+1);for(let r=0;r<=t;++r)for(let o=0;o<=t;++o){const a=r*r+o*o;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((t+r)*e+(t+o))*4+3),r>0&&l.push(((t-r)*e+(t+o))*4+3),o>0&&(l.push(((t+r)*e+(t-o))*4+3),r>0&&l.push(((t-r)*e+(t-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return Ac[t]=s,s}class bC extends am{constructor(e,n,i,s,r,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=s,this.transformRotation_=s?ph(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=zn()}drawImages_(e,n,i,s){if(!this.image_)return;const r=es(e,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=r.length;c<h;c+=2){const d=r[c]-this.imageAnchorX_,f=r[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,p=f+this.imageAnchorY_;Ri(a,g,p,1,1,u,-g,-p),o.save(),o.transform.apply(o,a),o.translate(g,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=es(e,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=s){const l=r[n]+this.textOffsetX_,u=r[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,n,i,s,r){const o=this.context_,a=es(e,n,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return r&&o.closePath(),i}drawRings_(e,n,i,s){for(let r=0,o=i.length;r<o;++r)n=this.moveToLineTo_(e,n,i[r],s,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!nn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=dw(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],s=n[3]-n[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(n[0],n[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let i=0,s=n.length;i<s;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!nn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(nn(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,u=o.length;l<u;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!nn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!nn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=r.length;a<l;++a){const u=r[a];s=this.drawRings_(i,s,u,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),as(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:Lo;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=s&&(i.textAlign=s,n.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=s,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:ti(i||en)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),s=n.getLineCap(),r=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),u=n.getMiterLimit(),c=r||Ei;this.strokeState_={lineCap:s!==void 0?s:Cr,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||wi)*this.pixelRatio_,lineJoin:a!==void 0?a:Sr,lineWidth:(l!==void 0?l:Mo)*this.pixelRatio_,miterLimit:u!==void 0?u:Oo,strokeStyle:ti(i||ko)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const f=n.getColor();this.textFillState_={fillStyle:ti(f||en)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),g=i.getLineCap(),p=i.getLineDash(),m=i.getLineDashOffset(),w=i.getLineJoin(),v=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Cr,lineDash:p||Ei,lineDashOffset:m||wi,lineJoin:w!==void 0?w:Sr,lineWidth:v!==void 0?v:Mo,miterLimit:y!==void 0?y:Oo,strokeStyle:ti(f||ko)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:s!==void 0?s:Y_,textAlign:h!==void 0?h:Lo,textBaseline:d!==void 0?d:rl},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,g,p)=>f+=p%2?" ":g,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const Jn=.5;function EC(t,e,n,i,s,r,o,a,l){const u=s,c=t[0]*Jn,h=t[1]*Jn,d=xt(c,h);d.imageSmoothingEnabled=!1;const f=d.canvas,g=new bC(d,Jn,s,null,o,a,null),p=n.length,m=Math.floor((256*256*256-1)/p),w={};for(let y=1;y<=p;++y){const E=n[y-1],b=E.getStyleFunction()||i;if(!b)continue;let I=b(E,r);if(!I)continue;Array.isArray(I)||(I=[I]);const O=(y*m).toString(16).padStart(7,"#00000");for(let D=0,re=I.length;D<re;++D){const ee=I[D],Q=ee.getGeometryFunction()(E);if(!Q||!nn(u,Q.getExtent()))continue;const ae=ee.clone(),Y=ae.getFill();Y&&Y.setColor(O);const H=ae.getStroke();H&&(H.setColor(O),H.setLineDash(null)),ae.setText(void 0);const F=ee.getImage();if(F){const oe=F.getImageSize();if(!oe)continue;const ue=xt(oe[0],oe[1],void 0,{alpha:!1}),we=ue.canvas;ue.fillStyle=O,ue.fillRect(0,0,we.width,we.height),ae.setImage(new Ho({img:we,anchor:F.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:F.getOrigin(),opacity:1,size:F.getSize(),scale:F.getScale(),rotation:F.getRotation(),rotateWithView:F.getRotateWithView()}))}const J=ae.getZIndex()||0;let le=w[J];le||(le={},w[J]=le,le.Polygon=[],le.Circle=[],le.LineString=[],le.Point=[]);const ye=Q.getType();if(ye==="GeometryCollection"){const oe=Q.getGeometriesArrayRecursive();for(let ue=0,we=oe.length;ue<we;++ue){const te=oe[ue];le[te.getType().replace("Multi","")].push(te,ae)}}else le[ye.replace("Multi","")].push(Q,ae)}}const v=Object.keys(w).map(Number).sort(bi);for(let y=0,E=v.length;y<E;++y){const b=w[v[y]];for(const I in b){const A=b[I];for(let O=0,D=A.length;O<D;O+=2){g.setStyle(A[O+1]);for(let re=0,ee=e.length;re<ee;++re)g.setTransform(e[re]),g.drawGeometry(A[O])}}}return d.getImageData(0,0,f.width,f.height)}function wC(t,e,n){const i=[];if(n){const s=Math.floor(Math.round(t[0])*Jn),r=Math.floor(Math.round(t[1])*Jn),o=(_t(s,0,n.width-1)+_t(r,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],c=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&i.push(e[c/h-1])}return i}const xC=.5,dm={Point:OC,LineString:IC,Polygon:LC,MultiPoint:kC,MultiLineString:AC,MultiPolygon:PC,GeometryCollection:TC,Circle:SC};function CC(t,e){return parseInt(it(t),10)-parseInt(it(e),10)}function rg(t,e){const n=fm(t,e);return n*n}function fm(t,e){return xC*t/e}function SC(t,e,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,i,s)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function og(t,e,n,i,s,r,o,a){const l=[],u=n.getImage();if(u){let d=!0;const f=u.getImageState();f==We.LOADED||f==We.ERROR?d=!1:f==We.IDLE&&u.load(),d&&l.push(u.ready())}const c=n.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>s(null)),RC(t,e,n,i,r,o,a),h}function RC(t,e,n,i,s,r,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,s);if(n.getRenderer())gm(t,l,n,e,o);else{const c=dm[l.getType()];c(t,l,n,e,o,r)}}function gm(t,e,n,i,s){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)gm(t,o[a],n,i,s);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),s)}function TC(t,e,n,i,s,r){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const u=dm[o[a].getType()];u(t,o[a],n,i,s,r)}}function IC(t,e,n,i,s){const r=n.getStroke();if(r){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,i,s)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,s)}}function AC(t,e,n,i,s){const r=n.getStroke();if(r){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,i,s)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i,s)}}function PC(t,e,n,i,s){const r=n.getFill(),o=n.getStroke();if(o||r){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,i,s)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,s)}}function OC(t,e,n,i,s,r){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),u=r&&o&&l?{}:void 0;if(o){if(o.getImageState()!=We.LOADED)return;const c=t.getBuilder(n.getZIndex(),"Image");c.setImageStyle(o,u),c.drawPoint(e,i,s)}if(l){const c=t.getBuilder(n.getZIndex(),"Text");c.setTextStyle(a,u),c.drawText(e,i,s)}}function kC(t,e,n,i,s,r){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),u=l&&l.getText(),c=r&&a&&u?{}:void 0;if(a){if(o.getImageState()!=We.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,c),h.drawMultiPoint(e,i,s)}if(u){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,c),h.drawText(e,i,s)}}function LC(t,e,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,i,s)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,s)}}class MC extends um{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=In(),this.wrappedRenderedExtent_=In(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,i){const s=n.extent,r=n.viewState,o=r.center,a=r.resolution,l=r.projection,u=r.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=n.pixelRatio,g=n.viewHints,p=!(g[Wt.ANIMATING]||g[Wt.INTERACTING]),m=this.context,w=Math.round(et(s)/a*f),v=Math.round(Ut(s)/a*f),y=h.getWrapX()&&l.canWrapX(),E=y?et(c):null,b=y?Math.ceil((s[2]-c[2])/E)+1:1;let I=y?Math.floor((s[0]-c[0])/E):0;do{let A=this.getRenderTransform(o,a,0,f,w,v,I*E);n.declutter&&(A=A.slice(0)),e.execute(m,[m.canvas.width,m.canvas.height],A,u,p,i===void 0?ir:i?hm:mC,i?d&&n.declutter[d]:void 0)}while(++I<b)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=xt(this.context.canvas.width,this.context.canvas.height,ng))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,xr(this.context),ng.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const s=e.viewState;this.prepareContainer(e,n);const r=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(Rn.PRERENDER)||this.getLayer().hasListener(Rn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(r,e),s.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const l=Hi(i.extent);a=nn(l,e.extent),this.clipped_=a&&!bs(l,e.extent),this.clipped_&&this.clipUnrotated(r,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&r.restore(),this.postRender(r,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=i[0]*Jn,d=i[1]*Jn;c.push(this.getRenderTransform(s,r,o,Jn,h,d,0).slice());const f=u.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!bs(g,l)){let p=l[0];const m=et(g);let w=0,v;for(;p<g[0];)--w,v=m*w,c.push(this.getRenderTransform(s,r,o,Jn,h,d,v).slice()),p+=m;for(w=0,p=l[2];p>g[2];)++w,v=m*w,c.push(this.getRenderTransform(s,r,o,Jn,h,d,v).slice()),p-=m}this.hitDetectionImageData_=EC(i,c,this.renderedFeatures_,u.getStyleFunction(),l,r,o,rg(r,this.renderedPixelRatio_))}n(wC(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,s,r){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),u={},c=function(g,p,m){const w=it(g),v=u[w];if(v){if(v!==!0&&m<v.distanceSq){if(m===0)return u[w]=!0,r.splice(r.lastIndexOf(v),1),s(g,l,p);v.geometry=p,v.distanceSq=m}}else{if(m===0)return u[w]=!0,s(g,l,p);r.push(u[w]={feature:g,layer:l,geometry:p,distanceSq:m,callback:s})}};let h;const d=[this.replayGroup_],f=this.getLayer().getDeclutter();return d.some(g=>h=g.forEachFeatureAtCoordinate(e,o,a,i,c,f&&n.declutter[f]?n.declutter[f].all().map(p=>p.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const s=e.viewHints[Wt.ANIMATING],r=e.viewHints[Wt.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,f=n.getRevision(),g=n.getRenderBuffer();let p=n.getRenderOrder();p===void 0&&(p=CC);const m=u.center.slice(),w=uh(l,g*h),v=w.slice(),y=[w.slice()],E=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!bs(E,e.extent)){const Y=et(E),H=Math.max(et(w)/2,Y);w[0]=E[0]-H,w[2]=E[2]+H,R_(m,c);const F=C_(y[0],c);F[0]<E[0]&&F[2]<E[2]?y.push([F[0]+Y,F[1],F[2]+Y,F[3]]):F[0]>E[0]&&F[2]>E[2]&&y.push([F[0]-Y,F[1],F[2]-Y,F[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==p&&this.renderedFrameDeclutter_===!!e.declutter&&bs(this.wrappedRenderedExtent_,w))return as(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new uC(fm(h,d),w,h,d);let I;for(let Y=0,H=y.length;Y<H;++Y)i.loadFeatures(y[Y],h,c);const A=rg(h,d);let O=!0;const D=(Y,H)=>{let F;const J=Y.getStyleFunction()||n.getStyleFunction();if(J&&(F=J(Y,h)),F){const le=this.renderFeature(Y,A,F,b,I,this.getLayer().getDeclutter(),H);O=O&&!le}},re=A_(w),ee=i.getFeaturesInExtent(re);p&&ee.sort(p);for(let Y=0,H=ee.length;Y<H;++Y)D(ee[Y],Y);this.renderedFeatures_=ee,this.ready=O;const Q=b.finish(),ae=new vC(w,h,d,i.getOverlaps(),Q,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=p,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=v,this.wrappedRenderedExtent_=w,this.renderedCenter_=m,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=ae,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,s,r,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let u=0,c=i.length;u<c;++u)l=og(s,e,i[u],n,this.boundHandleStyleImageChange_,r,o,a)||l;else l=og(s,e,i,n,this.boundHandleStyleImageChange_,r,o,a);return l}}class Pc extends om{constructor(e){super(e)}createRenderer(){return new MC(this)}}class ag{constructor(e){this.rbush_=new J_(e),this.items_={}}insert(e,n){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[it(n)]=i}load(e,n){const i=new Array(n.length);for(let s=0,r=n.length;s<r;s++){const o=e[s],a=n[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=l,this.items_[it(a)]=l}this.rbush_.load(i)}remove(e){const n=it(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){const i=this.items_[it(n)],s=[i.minX,i.minY,i.maxX,i.maxY];Co(s,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let s=0,r=e.length;s<r;s++)if(i=n(e[s]),i)return i;return i}isEmpty(){return Er(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return ns(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}function DC(t,e,n,i){const s=[];let r=In();for(let o=0,a=n.length;o<a;++o){const l=n[o];r=dh(t,e,l[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=l[l.length-1]}return s}const lg=zn();class Fn{constructor(e,n,i,s,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=r,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?E_(this.flatCoordinates_):dh(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Os(this.getExtent());this.flatInteriorPoints_=xh(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Sw(this.flatCoordinates_,this.ends_),n=DC(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Ew(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=xu(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const i=this.ends_;for(let s=0,r=i.length;s<r;++s){const o=i[s],a=xu(e,n,o,2,.5);$l(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=An(e);const n=e.getExtent(),i=e.getWorldExtent();if(n&&i){const s=Ut(i)/Ut(n);Ri(lg,i[0],i[3],s,-s,0,0,0),es(this.flatCoordinates_,0,this.flatCoordinates_.length,2,lg,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Fn(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=m_((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=Xl(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=mw(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,s);break;case"Polygon":s=[],i.length=O_(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,s);break}return s&&(this.simplifiedGeometry_=new Fn(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Fn.prototype.getFlatCoordinates=Fn.prototype.getOrientedFlatCoordinates;class pm extends jn{constructor(e){super(),this.projection=An(e.projection),this.attributions_=cg(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,s){n.viewResolver=i,n.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=cg(e),this.changed()}setState(e){this.state_=e,this.changed()}}function cg(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const wn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function FC(t,e){return[[-1/0,-1/0,1/0,1/0]]}let NC=!1;function $C(t,e,n,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,i,s):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=NC,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();try{let c;u=="text"||u=="json"?c=a.responseText:u=="xml"?c=a.responseXML||a.responseText:u=="arraybuffer"&&(c=a.response),c?r(e.readFeatures(c,{extent:n,featureProjection:s}),e.readProjection(c)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function ug(t,e){return function(n,i,s,r,o){const a=this;$C(t,e,n,i,s,function(l,u){a.addFeatures(l),r!==void 0&&r(l)},o||br)}}class Gi extends Pi{constructor(e,n,i){super(e),this.feature=n,this.features=i}}class Oc extends pm{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=br,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(He(this.format_,"`format` must be set when `url` is set"),this.loader_=ug(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:FC;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new ag:null,this.loadedExtentsRtree_=new ag,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!n&&i===void 0&&(i=new Qn(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=it(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Gi(wn.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof Fn||(this.featureChangeKeys_[e]=[je(n,Ne.CHANGE,this.handleFeatureChange_,this),je(n,yr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){const s=String(n.getId());if(!(s in this.idIndex_))this.idIndex_[s]=n;else if(n instanceof Fn){const r=this.idIndex_[s];r instanceof Fn?Array.isArray(r)?r.push(n):this.idIndex_[s]=[r,n]:i=!1}else i=!1}return i&&(He(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],i=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=it(a);this.addToIndex_(l,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],l=it(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();n.push(c),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,s),this.hasListener(wn.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new Gi(wn.ADDFEATURE,i[r]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(wn.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(wn.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(Qt.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(Qt.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(lt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Gi(wn.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(s){const r=s.getGeometry();if(r instanceof Fn||r.intersectsCoordinate(e))return n(s)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){const s=i.getGeometry();if(s instanceof Fn||s.intersectsExtent(e)){const r=n(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Er(this.nullGeometryFeatures_)||$l(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=fh(e,n);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const i=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||xo,this.featuresRtree_.forEachInExtent(l,function(u){if(n(u)){const c=u.getGeometry(),h=a;if(a=c instanceof Fn?0:c.closestPointXY(i,s,o,a),a<h){r=u;const d=Math.sqrt(a);l[0]=i-d,l[1]=s-d,l[2]=i+d,l[3]=s+d}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,i=it(n),s=n.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const r=n.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new Gi(wn.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:it(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Er(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){const s=this.loadedExtentsRtree_,r=this.strategy_(e,n,i);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(c){return bs(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Gi(wn.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new Gi(wn.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Gi(wn.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(e,function(s){if(Co(s.extent,e))return i=s,!0}),i&&n.remove(i)}removeFeatures(e){let n=!1;for(let i=0,s=e.length;i<s;++i)n=this.removeFeatureInternal(e[i])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=it(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[n];i==null||i.forEach(lt),delete this.featureChangeKeys_[n];const s=e.getId();if(s!==void 0){const r=s.toString(),o=this.idIndex_[r];o===e?delete this.idIndex_[r]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[r]=o[0]))}return delete this.uidIndex_[n],this.hasListener(wn.REMOVEFEATURE)&&this.dispatchEvent(new Gi(wn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){He(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(ug(e,this.format_))}}const be={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class zh extends zl{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ne.CHANGE)}release(){this.state===be.ERROR&&this.setState(be.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==be.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){qe()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=n-i+1e3/60;return s>=this.transition_?1:q_(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}class _m extends zh{constructor(e,n,i,s,r,o){super(e,n,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=be.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=be.ERROR,this.unlistenImage_(),this.image_=GC(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=be.LOADED:this.state=be.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==be.ERROR&&(this.state=be.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==be.IDLE&&(this.state=be.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$w(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function GC(){const t=xt(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}class zC{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[n+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class WC extends lh{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){qe()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Ri(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),v_(s,i)}forEachFeatureAtCoordinate(e,n,i,s,r,o,a,l){let u;const c=n.viewState;function h(E,b,I,A){return r.call(o,b,E?I:null,A)}const d=c.projection,f=R_(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&s){const E=d.getExtent(),b=et(E);g.push([-b,0],[b,0])}const p=n.layerStatesArray,m=p.length,w=[],v=[];for(let E=0;E<g.length;E++)for(let b=m-1;b>=0;--b){const I=p[b],A=I.layer;if(A.hasRenderer()&&Nh(I,c)&&a.call(l,A)){const O=A.getRenderer(),D=A.getSource();if(O&&D){const re=D.getWrapX()?f:e,ee=h.bind(null,I.managed);v[0]=re[0]+g[E][0],v[1]=re[1]+g[E][1],u=O.forEachFeatureAtCoordinate(v,n,i,ee,w)}if(u)return u}}if(w.length===0)return;const y=1/w.length;return w.forEach((E,b)=>E.distanceSq+=b*y),w.sort((E,b)=>E.distanceSq-b.distanceSq),w.some(E=>u=E.callback(E.feature,E.layer,E.geometry)),u}hasFeatureAtCoordinate(e,n,i,s,r,o){return this.forEachFeatureAtCoordinate(e,n,i,s,xo,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){qe()}scheduleExpireIconCache(e){ei.canExpireCache()&&e.postRenderFunctions.push(BC)}}function BC(t,e){ei.expire()}class UC extends WC{constructor(e){super(e),this.fontChangeListenerKey_=je(pi,yr.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=Hl+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const s=new lm(e,void 0,n);i.dispatchEvent(s)}}disposeInternal(){lt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Rn.PRECOMPOSE,e);const n=e.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);n.some(a=>a.layer instanceof om&&a.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const r=[];let o=null;for(let a=0,l=n.length;a<l;++a){const u=n[a];e.layerIndex=a;const c=u.layer,h=c.getSourceState();if(!Nh(u,s)||h!="ready"&&h!="undefined"){c.unrender();continue}const d=c.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),r.push(u))}this.declutter(e,r),Nw(this.element_,this.children_),this.dispatchRenderEvent(Rn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let i=n.length-1;i>=0;--i){const s=n[i],r=s.layer;r.getDeclutter()&&r.renderDeclutter(e,s)}n.forEach(i=>i.layer.renderDeferred(e))}}}class ji extends Pi{constructor(e,n){super(e),this.layer=n}}const kc={LAYERS:"layers"};class Or extends H_{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(kc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Qn(i.slice(),{unique:!0}):He(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Qn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(lt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(je(e,Qt.ADD,this.handleLayersAdd_,this),je(e,Qt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(lt);Ko(this.listenerKeys_);const n=e.getArray();for(let i=0,s=n.length;i<s;i++){const r=n[i];this.registerLayerListeners_(r),this.dispatchEvent(new ji("addlayer",r))}this.changed()}registerLayerListeners_(e){const n=[je(e,yr.PROPERTYCHANGE,this.handleLayerChange_,this),je(e,Ne.CHANGE,this.handleLayerChange_,this)];e instanceof Or&&n.push(je(e,"addlayer",this.handleLayerGroupAdd_,this),je(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[it(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new ji("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new ji("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new ji("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=it(n);this.listenerKeys_[i].forEach(lt),delete this.listenerKeys_[i],this.dispatchEvent(new ji("removelayer",n)),this.changed()}getLayers(){return this.get(kc.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new ji("removelayer",i[s]))}this.set(kc.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=i,a=n.length;o<a;o++){const l=n[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=$n(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return n}getSourceState(){return"ready"}}class er extends Pi{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}class Wi extends er{constructor(e,n,i,s,r,o){super(e,n,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const pt={SINGLECLICK:"singleclick",CLICK:Ne.CLICK,DBLCLICK:Ne.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Iu={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class KC extends zl{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=je(i,Iu.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=je(i,Iu.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ne.TOUCHMOVE,this.boundHandleTouchMove_,B_?{passive:!1}:!1)}emulateClick_(e){let n=new Wi(pt.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Wi(pt.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Wi(pt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==pt.POINTERUP||n.type==pt.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==n.target){delete this.trackedTouches_[s];break}}else(n.type==pt.POINTERDOWN||n.type==pt.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Wi(pt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Wi(pt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(je(i,pt.POINTERMOVE,this.handlePointerMove_,this),je(i,pt.POINTERUP,this.handlePointerUp_,this),je(this.element_,pt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(je(this.element_.getRootNode(),pt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Wi(pt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Wi(pt.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ne.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const mi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},zt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ul=1/0;class jC{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ko(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){He(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=ul?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,s=n.length,r=n[e],o=i[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<s&&i[u]<i[l]?u:l;n[e]=n[c],i[e]=i[c],e=c}n[e]=r,i[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const i=this.elements_,s=this.priorities_,r=i[n],o=s[n];for(;n>e;){const a=this.getParentIndex_(n);if(s[a]>o)i[n]=i[a],s[n]=s[a],n=a;else break}i[n]=r,s[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let s=0;const r=n.length;let o,a,l;for(a=0;a<r;++a)o=n[a],l=e(o),l==ul?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=l,n[s++]=o);n.length=s,i.length=s,this.heapify_()}}class YC extends jC{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(Ne.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===be.LOADED||i===be.ERROR||i===be.EMPTY){i!==be.ERROR&&n.removeEventListener(Ne.CHANGE,this.boundHandleTileChange_);const s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;){const s=this.dequeue()[0],r=s.getKey();s.getState()===be.IDLE&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++i,s.load())}}}function XC(t,e,n,i,s){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return ul;const r=t.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class Wh extends jn{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var n;this.map_&&((n=this.element)==null||n.remove());for(let i=0,s=this.listenerKeys.length;i<s;++i)lt(this.listenerKeys[i]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_??e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==br&&this.listenerKeys.push(je(e,mi.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class VC extends Wh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:n+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Ne.CLICK,this.handleClick_.bind(this),!1);const u=n+" "+Hl+" "+Oh+(this.collapsed_&&this.collapsible_?" "+Nf:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),i=new Set(n.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>i.add(s)):i.add(this.attributions_)),!this.overrideCollapsible_){const s=!n.some(r=>{var o;return((o=r.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(s=>AE(()=>s))),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!as(n,this.renderedAttributions_)){U_(this.ulElement_);for(let s=0,r=n.length;s<r;++s){const o=document.createElement("li");o.innerHTML=n[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Nf),this.collapsed_?Df(this.collapseLabel_,this.label_):Df(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class HC extends Wh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(Ne.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+Hl+" "+Oh,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(fa)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Pr}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(fa);!r&&i===0?this.element.classList.add(fa):r&&i!==0&&this.element.classList.remove(fa)}this.label_.style.transform=s}this.rotation_=i}}class qC extends Wh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(Ne.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(Ne.CLICK,this.handleClick_.bind(this,-i),!1);const d=n+" "+Hl+" "+Oh,f=this.element;f.className=d,f.appendChild(c),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Pr})):i.setZoom(r)}}}function ZC(t){t=t||{};const e=new Qn;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new qC(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new HC(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new VC(t.attributionOptions)),e}const hg={ACTIVE:"active"};class Jo extends jn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(hg.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(hg.ACTIVE,e)}setMap(e){this.map_=e}}function JC(t,e,n){const i=t.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:lx,center:t.getConstrainedCenter(s)})}}function Bh(t,e,n,i){const s=t.getZoom();if(s===void 0)return;const r=t.getConstrainedZoom(s+e),o=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:Pr})}class QC extends Jo{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==pt.DBLCLICK){const i=e.originalEvent,s=e.map,r=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();Bh(a,o,r,this.duration_),i.preventDefault(),n=!0}return!n}}class Qo extends Jo{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==pt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==pt.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==pt.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==pt.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Uh(t){const e=t.length;let n=0,i=0;for(let s=0;s<e;s++)n+=t[s].clientX,i+=t[s].clientY;return{clientX:n/e,clientY:i/e}}function Au(t){const e=arguments;return function(n){let i=!0;for(let s=0,r=e.length;s<r&&(i=i&&e[s](n),!!i);++s);return i}}const eS=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},tS=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),i=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(i):e.contains(i)},mm=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?tS(t):!0},nS=xo,vm=function(t){const e=t.originalEvent;return e.button==0&&!(Mw&&$_&&e.ctrlKey)},ym=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},iS=function(t){const e=t.originalEvent;return $_?e.metaKey:e.ctrlKey},sS=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},bm=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},Lc=function(t){const e=t.originalEvent;return He(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},rS=function(t){const e=t.originalEvent;return He(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class oS extends Qo{constructor(e){super({stopDown:Gl}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:Au(ym,rS);this.condition_=e.onFocusOnly?Au(mm,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,s=n.getEventPixel(Uh(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();ew(r,a.getResolution()),_h(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Pr})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class aS extends Qo{constructor(e){e=e||{},super({stopDown:Gl}),this.condition_=e.condition?e.condition:eS,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Lc(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===Fh)return;const s=n.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Lc(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Lc(e)&&vm(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class lS extends lh{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],n[0])+i,s.top=Math.min(e[1],n[1])+i,s.width=Math.abs(n[0]-e[0])+i,s.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,s=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Io([s])}getGeometry(){return this.geometry_}}const Ks={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ur extends Pi{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class cS extends Qo{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new lS(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??vm,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const s=i[0]-n[0],r=i[1]-n[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ur(Ks.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new Ur(n?Ks.BOXEND:Ks.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ur(Ks.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ur(Ks.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ur(Ks.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class uS extends cS{constructor(e){e=e||{};const n=e.condition?e.condition:sS;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:Pr})}}const ds={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class hS extends Jo{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return ym(n)&&bm(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==Ne.KEYDOWN){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==ds.DOWN||s==ds.LEFT||s==ds.RIGHT||s==ds.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;s==ds.DOWN?u=-a:s==ds.LEFT?l=-a:s==ds.RIGHT?l=a:u=a;const c=[l,u];_h(c,o.getRotation()),JC(o,c,this.duration_),i.preventDefault(),n=!0}}return!n}}class dS extends Jo{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!iS(n)&&bm(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==Ne.KEYDOWN||e.type==Ne.KEYPRESS){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();Bh(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}class fS extends Jo{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:nS;this.condition_=e.onFocusOnly?Au(mm,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==Ne.WHEEL)return!0;const i=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==Ne.WHEEL&&(r=s.deltaY,kw&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=G_),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-_t(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Bh(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class gS extends Qo{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Gl),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==Fh&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Uh(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class pS extends Qo{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=Gl),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Uh(this.targetPointers))),l.render(),u.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function _S(t){t=t||{};const e=new Qn,n=new zC(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new aS),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new QC({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new oS({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new gS),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new pS({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new hS),e.push(new dS({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new fS({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new uS({duration:t.zoomDuration})),e}function Em(t){if(t instanceof Jl){t.setMapInternal(null);return}t instanceof Or&&t.getLayers().forEach(Em)}function wm(t,e){if(t instanceof Jl){t.setMapInternal(e);return}if(t instanceof Or){const n=t.getLayers().getArray();for(let i=0,s=n.length;i<s;++i)wm(n[i],e)}}let mS=class extends jn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=vS(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:G_,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=zn(),this.pixelToCoordinateTransform_=zn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||ZC(),this.interactions=n.interactions||_S({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new YC(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(zt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(zt.VIEW,this.handleViewChanged_),this.addChangeListener(zt.SIZE,this.handleSizeChanged_),this.addChangeListener(zt.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof Zn)&&e.view.then(function(s){i.setView(new Zn(s))}),this.controls.addEventListener(Qt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(Qt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(Qt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(Qt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(Qt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(Qt.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){wm(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:xo,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(s){s instanceof Or?n(s.getLayers()):e.push(s)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.layerFilter!==void 0?n.layerFilter:xo,r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(zt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return wu(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Lt(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(zt.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Qn){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const s=e[n];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=gi(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Lt(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(zt.SIZE)}getView(){return this.get(zt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,s){return XC(this.frameState_,e,n,i,s)}handleBrowserEvent(e,n){n=n||e.type;const i=new Wi(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===Iu.POINTERDOWN||i===Ne.WHEEL||i===Ne.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=n.target,a=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===s?s.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[Wt.ANIMATING]||o[Wt.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}n.getTilesLoading()<s&&(n.reprioritize(),n.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Rn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Rn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new er(mi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new er(mi.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)lt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ne.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ne.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new UC(this)),this.mapBrowserEventHandler_=new KC(this,this.moveTolerance_);for(const r in pt)this.mapBrowserEventHandler_.addEventListener(pt[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ne.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ne.WHEEL,this.boundHandleBrowserEvent_,B_?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const r=n.getRootNode();i=r instanceof ShadowRoot?r.host:n}this.targetChangeHandlerKeys_=[je(i,Ne.KEYDOWN,this.handleBrowserEvent,this),je(i,Ne.KEYPRESS,this.handleBrowserEvent,this)];const s=n.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=je(e,yr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=je(e,Ne.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(lt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new ji("addlayer",e)),this.layerGroupPropertyListenerKeys_=[je(e,yr.PROPERTYCHANGE,this.render,this),je(e,Ne.CHANGE,this.render,this),je(e,"addlayer",this.handleLayerAdd_,this),je(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const s=e[n].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Em(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(n!==void 0&&Ff(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:yu(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:it(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=yu(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!jl(this.previousExtent_)&&!Co(r.extent,this.previousExtent_))&&(this.dispatchEvent(new er(mi.MOVESTART,this,s)),this.previousExtent_=Wl(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Wt.ANIMATING]&&!r.viewHints[Wt.INTERACTING]&&!Co(r.extent,this.previousExtent_)&&(this.dispatchEvent(new er(mi.MOVEEND,this,r)),y_(r.extent,this.previousExtent_))),this.dispatchEvent(new er(mi.POSTRENDER,this,r)),this.renderComplete_=(this.hasListener(mi.LOADSTART)||this.hasListener(mi.LOADEND)||this.hasListener(Rn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new ji("removelayer",n)),this.set(zt.LAYERGROUP,e)}setSize(e){this.set(zt.SIZE,e)}setTarget(e){this.set(zt.TARGET,e)}setView(e){if(!e||e instanceof Zn){this.set(zt.VIEW,e);return}this.set(zt.VIEW,new Zn);const n=this;e.then(function(i){n.setView(new Zn(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(n=[Math.max(0,r),Math.max(0,o)],!Ff(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&T_("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!as(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function vS(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new Or({layers:t.layers});n[zt.LAYERGROUP]=i,n[zt.TARGET]=t.target,n[zt.VIEW]=t.view instanceof Zn?t.view:new Zn;let s;t.controls!==void 0&&(Array.isArray(t.controls)?s=new Qn(t.controls.slice()):(He(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=t.controls));let r;t.interactions!==void 0&&(Array.isArray(t.interactions)?r=new Qn(t.interactions.slice()):(He(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new Qn(t.overlays.slice()):(He(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Qn,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:n}}const $t={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class yS extends jn{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+Yw,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener($t.ELEMENT,this.handleElementChanged),this.addChangeListener($t.MAP,this.handleMapChanged),this.addChangeListener($t.OFFSET,this.handleOffsetChanged),this.addChangeListener($t.POSITION,this.handlePositionChanged),this.addChangeListener($t.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get($t.ELEMENT)}getId(){return this.id}getMap(){return this.get($t.MAP)||null}getOffset(){return this.get($t.OFFSET)}getPosition(){return this.get($t.POSITION)}getPositioning(){return this.get($t.POSITIONING)}handleElementChanged(){U_(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var n;this.mapPostrenderListenerKey&&((n=this.element)==null||n.remove(),lt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=je(e,mi.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set($t.ELEMENT,e)}setMap(e){this.set($t.MAP,e)}setOffset(e){this.set($t.OFFSET,e)}setPosition(e){this.set($t.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get($t.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),s=this.getElement(),r=this.getRect(s,[Dw(s),Fw(s)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!bs(i,r)){const a=r[0]-i[0],l=i[2]-r[2],u=r[1]-i[1],c=i[3]-r[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),u<0?h[1]=u-o:c<0&&(h[1]=Math.abs(c)+o),h[0]!==0||h[1]!==0){const d=n.getView().getCenterInternal(),f=n.getPixelFromCoordinateInternal(d);if(!f)return;const g=[f[0]+h[0],f[1]+h[1]],p=e.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(g),duration:p.duration,easing:p.easing})}}}getRect(e,n){const i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[s,r,s+n[0],r+n[1]]}setPositioning(e){this.set($t.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(n),s=e.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(e,n){const i=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let l="0%",u="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?l="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(l="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?u="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}}class xm{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return He(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return He(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){He(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function hl(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function tc(t,e,n){return t+"/"+e+"/"+n}function Cm(t){return tc(t[0],t[1],t[2])}function bS(t){return t.split("/").map(Number)}function ES(t){return wS(t[0],t[1],t[2])}function wS(t,e,n){return(e<<t)+n}function xS(t,e){const n=t[0],i=t[1],s=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const r=e.getFullTileRange(n);return r?r.containsXY(i,s):!0}class Sm extends xm{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=bS(e)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(Cm(s.tileCoord)),s.release())})}}class Kh{constructor(e,n,i,s){this.minX=e,this.maxX=n,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function js(t,e,n,i,s){return s!==void 0?(s.minX=t,s.maxX=e,s.minY=n,s.maxY=i,s):new Kh(t,e,n,i)}const ya={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class CS extends Jl{constructor(e){e=e||{};const n=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ya.PRELOAD)}setPreload(e){this.set(ya.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ya.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ya.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function dl(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function SS(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}const RS=new Error("disposed");let Ys=null;function TS(t){Ys||(Ys=xt(t.width,t.height,void 0,{willReadFrequently:!0}));const e=Ys.canvas,n=t.width;e.width!==n&&(e.width=n);const i=t.height;return e.height!==i&&(e.height=i),Ys.clearRect(0,0,n,i),Ys.drawImage(t,0,0),Ys.getImageData(0,0,n,i).data}const IS=[256,256];class Pu extends zh{constructor(e){const n=be.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=dl(this.data_);return e?[e.width,e.height]:IS}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==be.IDLE&&this.state!==be.ERROR)return;this.state=be.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=be.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=be.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(RS),this.controller_=null),super.disposeInternal()}}const Rm=.5,AS=10,dg=.25;class Tm{constructor(e,n,i,s,r,o){this.sourceProj_=e,this.targetProj_=n;let a={};const l=tl(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const y=v[0]+"/"+v[1];return a[y]||(a[y]=l(v)),a[y]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&et(s)>=et(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?et(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?et(this.targetProj_.getExtent()):null;const u=Ms(i),c=Kl(i),h=Ul(i),d=Bl(i),f=this.transformInv_(u),g=this.transformInv_(c),p=this.transformInv_(h),m=this.transformInv_(d),w=AS+(o?Math.max(0,Math.ceil(Math.log2(So(i)/(o*o*256*256)))):0);if(this.addQuad_(u,c,h,d,f,g,p,m,w),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(y,E,b){v=Math.min(v,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(y=>{if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-v>this.sourceWorldWidth_/2){const E=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];E[0][0]-v>this.sourceWorldWidth_/2&&(E[0][0]-=this.sourceWorldWidth_),E[1][0]-v>this.sourceWorldWidth_/2&&(E[1][0]-=this.sourceWorldWidth_),E[2][0]-v>this.sourceWorldWidth_/2&&(E[2][0]-=this.sourceWorldWidth_);const b=Math.min(E[0][0],E[1][0],E[2][0]);Math.max(E[0][0],E[1][0],E[2][0])-b<this.sourceWorldWidth_/2&&(y.source=E)}})}a={}}addTriangle_(e,n,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,n,i]})}addQuad_(e,n,i,s,r,o,a,l,u){const c=yf([r,o,a,l]),h=this.sourceWorldWidth_?et(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=yf([e,n,i,s]);g=et(m)/this.targetWorldWidth_>dg||g}!f&&this.sourceProj_.isGlobal()&&h&&(g=h>dg||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!nn(c,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(p=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(u>0){if(!g){const m=[(e[0]+i[0])/2,(e[1]+i[1])/2],w=this.transformInv_(m);let v;f?v=(fr(r[0],d)+fr(a[0],d))/2-fr(w[0],d):v=(r[0]+a[0])/2-w[0];const y=(r[1]+a[1])/2-w[1];g=v*v+y*y>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const m=[(n[0]+i[0])/2,(n[1]+i[1])/2],w=this.transformInv_(m),v=[(s[0]+e[0])/2,(s[1]+e[1])/2],y=this.transformInv_(v);this.addQuad_(e,n,m,v,r,o,w,y,u-1),this.addQuad_(v,m,i,s,y,w,a,l,u-1)}else{const m=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.transformInv_(m),v=[(i[0]+s[0])/2,(i[1]+s[1])/2],y=this.transformInv_(v);this.addQuad_(e,m,v,s,r,w,y,l,u-1),this.addQuad_(m,n,i,v,w,o,a,y,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(e,i,s,r,a,l),p&14||this.addTriangle_(e,i,n,r,a,o),p&&(p&13||this.addTriangle_(n,s,e,o,l,r),p&7||this.addTriangle_(n,s,i,o,l,a))}calculateSourceExtent(){const e=In();return this.triangles_.forEach(function(n,i,s){const r=n.source;co(e,r[0]),co(e,r[1]),co(e,r[2])}),e}getTriangles(){return this.triangles_}}let Mc;const Ci=[];function fg(t,e,n,i,s){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,s)),t.restore()}function Dc(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function PS(){if(Mc===void 0){const t=xt(6,6,Ci);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",fg(t,4,5,4,0),fg(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Mc=Dc(e,0)||Dc(e,4)||Dc(e,8),xr(t),Ci.push(t.canvas)}return Mc}function gg(t,e,n,i){const s=$a(n,e,t);let r=Cf(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=t.getMetersPerUnit();a!==void 0&&(r/=a);const l=t.getExtent();if(!l||wr(l,s)){const u=Cf(t,r,s)/r;isFinite(u)&&u>0&&(r/=u)}return r}function Im(t,e,n,i){const s=Os(n);let r=gg(t,e,s,i);return(!isFinite(r)||r<=0)&&x_(n,function(o){return r=gg(t,e,o,i),isFinite(r)&&r>0}),r}function Am(t,e,n,i,s,r,o,a,l,u,c,h,d,f){const g=xt(Math.round(n*t),Math.round(n*e),Ci);if(h||(g.imageSmoothingEnabled=!1),l.length===0)return g.canvas;g.scale(n,n);function p(b){return Math.round(b*n)/n}g.globalCompositeOperation="lighter";const m=In();l.forEach(function(b,I,A){FE(m,b.extent)});let w;const v=n/i,y=(h?1:1+Math.pow(2,-24))/v;if(!d||l.length!==1||u!==0){if(w=xt(Math.round(et(m)*v),Math.round(Ut(m)*v),Ci),h||(w.imageSmoothingEnabled=!1),s&&f){const b=(s[0]-m[0])*v,I=-(s[3]-m[3])*v,A=et(s)*v,O=Ut(s)*v;w.rect(b,I,A,O),w.clip()}l.forEach(function(b,I,A){if(b.image.width>0&&b.image.height>0){if(b.clipExtent){w.save();const Q=(b.clipExtent[0]-m[0])*v,ae=-(b.clipExtent[3]-m[3])*v,Y=et(b.clipExtent)*v,H=Ut(b.clipExtent)*v;w.rect(h?Q:Math.round(Q),h?ae:Math.round(ae),h?Y:Math.round(Q+Y)-Math.round(Q),h?H:Math.round(ae+H)-Math.round(ae)),w.clip()}const O=(b.extent[0]-m[0])*v,D=-(b.extent[3]-m[3])*v,re=et(b.extent)*v,ee=Ut(b.extent)*v;w.drawImage(b.image,u,u,b.image.width-2*u,b.image.height-2*u,h?O:Math.round(O),h?D:Math.round(D),h?re:Math.round(O+re)-Math.round(O),h?ee:Math.round(D+ee)-Math.round(D)),b.clipExtent&&w.restore()}})}const E=Ms(o);return a.getTriangles().forEach(function(b,I,A){const O=b.source,D=b.target;let re=O[0][0],ee=O[0][1],Q=O[1][0],ae=O[1][1],Y=O[2][0],H=O[2][1];const F=p((D[0][0]-E[0])/r),J=p(-(D[0][1]-E[1])/r),le=p((D[1][0]-E[0])/r),ye=p(-(D[1][1]-E[1])/r),oe=p((D[2][0]-E[0])/r),ue=p(-(D[2][1]-E[1])/r),we=re,te=ee;re=0,ee=0,Q-=we,ae-=te,Y-=we,H-=te;const B=[[Q,ae,0,0,le-F],[Y,H,0,0,oe-F],[0,0,Q,ae,ye-J],[0,0,Y,H,ue-J]],xe=JE(B);if(!xe)return;if(g.save(),g.beginPath(),PS()||!h){g.moveTo(le,ye);const M=4,G=F-le,k=J-ye;for(let W=0;W<M;W++)g.lineTo(le+p((W+1)*G/M),ye+p(W*k/(M-1))),W!=M-1&&g.lineTo(le+p((W+1)*G/M),ye+p((W+1)*k/(M-1)));g.lineTo(oe,ue)}else g.moveTo(le,ye),g.lineTo(F,J),g.lineTo(oe,ue);g.clip(),g.transform(xe[0],xe[2],xe[1],xe[3],F,J),g.translate(m[0]-we,m[3]-te);let ve;if(w)ve=w.canvas,g.scale(y,-y);else{const M=l[0],G=M.extent;ve=M.image,g.scale(et(G)/ve.width,-Ut(G)/ve.height)}g.drawImage(ve,0,0),g.restore()}),w&&(xr(w),Ci.push(w.canvas)),c&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach(function(b,I,A){const O=b.target,D=(O[0][0]-E[0])/r,re=-(O[0][1]-E[1])/r,ee=(O[1][0]-E[0])/r,Q=-(O[1][1]-E[1])/r,ae=(O[2][0]-E[0])/r,Y=-(O[2][1]-E[1])/r;g.beginPath(),g.moveTo(ee,Q),g.lineTo(D,re),g.lineTo(ae,Y),g.closePath(),g.stroke()}),g.restore()),g.canvas}class OS extends Pu{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const n=e.sourceProj,i=n.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=n.canWrapX()?s?$n(i,s):i:s;const r=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?$n(r,o):r;if(So(l)===0){this.state=be.EMPTY;return}i&&(a?a=$n(a,i):a=i);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),c=e.targetProj,h=Im(n,c,l,u);if(!isFinite(h)||h<=0){this.state=be.EMPTY;return}const d=e.errorThreshold!==void 0?e.errorThreshold:Rm;if(this.triangulation_=new Tm(n,c,l,a,h*d,u),this.triangulation_.getTriangles().length===0){this.state=be.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(h);let f=this.triangulation_.calculateSourceExtent();if(a&&(n.canWrapX()?(f[1]=_t(f[1],a[1],a[3]),f[3]=_t(f[3],a[1],a[3])):f=$n(f,a)),!So(f))this.state=be.EMPTY;else{let g=0,p=0;n.canWrapX()&&(g=et(i),p=Math.floor((f[0]-i[0])/g)),fh(f.slice(),n,!0).forEach(w=>{const v=this.sourceTileGrid_.getTileRangeForExtentAndZ(w,this.sourceZ_),y=e.getTileFunction;for(let E=v.minX;E<=v.maxX;E++)for(let b=v.minY;b<=v.maxY;b++){const I=y(this.sourceZ_,E,b,this.pixelRatio_);if(I){const A=p*g;this.sourceTiles_.push({tile:I,offset:A})}}++p}),this.sourceTiles_.length===0&&(this.state=be.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let n=!1;if(this.sourceTiles_.forEach(g=>{var J;const p=g.tile;if(!p||p.getState()!==be.LOADED)return;const m=p.getSize(),w=this.gutter_;let v;const y=SS(p.getData());y?v=y:(n=!0,v=TS(dl(p.getData())));const E=[m[0]+2*w,m[1]+2*w],b=v instanceof Float32Array,I=E[0]*E[1],A=b?Float32Array:Uint8ClampedArray,O=new A(v.buffer),D=A.BYTES_PER_ELEMENT,re=D*O.length/I,ee=O.byteLength/E[1],Q=Math.floor(ee/D/E[0]),ae=I*Q;let Y=O;if(O.length!==ae){Y=new A(ae);let le=0,ye=0;const oe=E[0]*Q;for(let ue=0;ue<E[1];++ue){for(let we=0;we<oe;++we)Y[le++]=O[ye+we];ye+=ee/D}}const H=this.sourceTileGrid_.getTileCoordExtent(p.tileCoord);H[0]+=g.offset,H[2]+=g.offset;const F=(J=this.clipExtent_)==null?void 0:J.slice();F&&(F[0]+=g.offset,F[2]+=g.offset),e.push({extent:H,clipExtent:F,data:new Uint8ClampedArray(Y.buffer),dataType:A,bytesPerPixel:re,pixelSize:E})}),this.sourceTiles_.length=0,e.length===0){this.state=be.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(i),r=typeof s=="number"?s:s[0],o=typeof s=="number"?s:s[1],a=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let c,h;const d=e[0].bytesPerPixel,f=Math.ceil(d/3);for(let g=f-1;g>=0;--g){const p=[];for(let b=0,I=e.length;b<I;++b){const A=e[b],O=A.data,D=A.pixelSize,re=D[0],ee=D[1],Q=xt(re,ee,Ci),ae=Q.createImageData(re,ee),Y=ae.data;let H=g*3;for(let F=0,J=Y.length;F<J;F+=4)Y[F]=O[H],Y[F+1]=O[H+1],Y[F+2]=O[H+2],Y[F+3]=255,H+=d;Q.putImageData(ae,0,0),p.push({extent:A.extent,clipExtent:A.clipExtent,image:Q.canvas})}const m=Am(r,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,u,this.triangulation_,p,this.gutter_,!1,!1,!1);for(let b=0,I=p.length;b<I;++b){const O=p[b].image.getContext("2d");xr(O),Ci.push(O.canvas)}const w=m.getContext("2d"),v=w.getImageData(0,0,m.width,m.height);xr(w),Ci.push(m),c||(h=new Uint8ClampedArray(d*v.width*v.height),c=new e[0].dataType(h.buffer));const y=v.data;let E=g*3;for(let b=0,I=y.length;b<I;b+=4)y[b+3]===255?(h[E]=y[b],h[E+1]=y[b+1],h[E+2]=y[b+2]):(h[E]=0,h[E+1]=0,h[E+2]=0),E+=d}if(n){const g=xt(r,o),p=new ImageData(c,r);g.putImageData(p,0,0),this.reprojData_=g.canvas}else this.reprojData_=c;this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(o*this.pixelRatio_)],this.state=be.LOADED,this.changed()}load(){if(this.state!==be.IDLE&&this.state!==be.ERROR)return;this.state=be.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i!==be.IDLE&&i!==be.LOADING)return;e++;const s=je(n,Ne.CHANGE,()=>{const r=n.getState();(r==be.LOADED||r==be.ERROR||r==be.EMPTY)&&(lt(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n}){n.getState()==be.IDLE&&n.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(lt),this.sourcesListenerKeys_=null}}class Pm extends zh{constructor(e,n,i,s,r,o,a,l,u,c,h,d){super(r,be.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=g?$n(f,g):f;if(So(m)===0){this.state=be.EMPTY;return}const w=e.getExtent();w&&(p?p=$n(p,w):p=w);const v=s.getResolution(this.wrappedTileCoord_[0]),y=Im(e,i,m,v);if(!isFinite(y)||y<=0){this.state=be.EMPTY;return}const E=c!==void 0?c:Rm;if(this.triangulation_=new Tm(e,i,m,p,y*E,v),this.triangulation_.getTriangles().length===0){this.state=be.EMPTY;return}this.sourceZ_=n.getZForResolution(y);let b=this.triangulation_.calculateSourceExtent();if(p&&(e.canWrapX()?(b[1]=_t(b[1],p[1],p[3]),b[3]=_t(b[3],p[1],p[3])):b=$n(b,p)),!So(b))this.state=be.EMPTY;else{let I=0,A=0;e.canWrapX()&&(I=et(w),A=Math.floor((b[0]-w[0])/I)),fh(b.slice(),e,!0).forEach(D=>{const re=n.getTileRangeForExtentAndZ(D,this.sourceZ_);for(let ee=re.minX;ee<=re.maxX;ee++)for(let Q=re.minY;Q<=re.maxY;Q++){const ae=u(this.sourceZ_,ee,Q,a);if(ae){const Y=A*I;this.sourceTiles_.push({tile:ae,offset:Y})}}++A}),this.sourceTiles_.length===0&&(this.state=be.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{var s;const i=n.tile;if(i&&i.getState()==be.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=n.offset,r[2]+=n.offset;const o=(s=this.clipExtent_)==null?void 0:s.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=be.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Am(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=be.LOADED}this.changed()}load(){if(this.state==be.IDLE){this.state=be.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const i=n.getState();if(i==be.IDLE||i==be.LOADING){e++;const s=je(n,Ne.CHANGE,r=>{const o=n.getState();(o==be.LOADED||o==be.ERROR||o==be.EMPTY)&&(lt(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},i,s){n.getState()==be.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(xr(this.canvas_.getContext("2d")),Ci.push(this.canvas_),this.canvas_=null),super.release()}}function Fc(t,e,n,i){return`${t},${tc(e,n,i)}`}function Nc(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const i=t[n],s=i.has(e);return s||i.add(e),!s}function kS(t,e,n){const i=t[n];return i?i.delete(e):!1}function pg(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=$n(e,Hi(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const s=i.getTileGridForProjection(t.viewState.projection).getExtent();s&&(e=$n(e,s))}return e}class LS extends um{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=In(),this.tempTileRange_=new Kh(0,0,0,0),this.tempTileCoord_=hl(0,0,0);const i=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new xm(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,n,i,s){const r=this.tileCache_,a=this.getLayer().getSource(),l=Fc(a.getKey(),e,n,i);let u;if(r.containsKey(l))u=r.get(l);else{if(u=a.getTile(e,n,i,s.pixelRatio,s.viewState.projection),!u)return null;r.set(l,u)}return u}getTile(e,n,i,s){const r=this.getOrCreateTile(e,n,i,s);return r||null}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=Lt(n.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!wr(r,s))return null;const o=n.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(o.projection),u=a.getTilePixelRatio(n.pixelRatio);for(let c=l.getZForResolution(o.resolution);c>=l.getMinZoom();--c){const h=l.getTileCoordForCoordAndZ(s,c),d=this.getTile(c,h[1],h[2],n);if(!d||d.getState()!==be.LOADED)continue;const f=l.getOrigin(c),g=on(l.getTileSize(c)),p=l.getResolution(c);let m;if(d instanceof _m)m=d.getImage();else if(d instanceof Pu){if(m=dl(d.getData()),!m)continue}else continue;const w=Math.floor(u*((s[0]-f[0])/p-h[1]*g[0])),v=Math.floor(u*((f[1]-s[1])/p-h[2]*g[1])),y=Math.round(u*a.getGutterForProjection(o.projection));return this.getImageData(m,w+y,v+y)}return null}prepareFrame(e){const n=this.getLayer().getSource();if(!n)return!1;const i=n.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===n.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,n,i,s,r){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),u=l.getTileGridForProjection(o.projection),c=it(l);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=a.getMapInternal(),f=Math.max(i-r,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),l.zDirection));for(let g=i;g>=f;--g){const p=u.getTileRangeForExtentAndZ(n,g,this.tempTileRange_),m=u.getResolution(g);for(let w=p.minX;w<=p.maxX;++w)for(let v=p.minY;v<=p.maxY;++v){const y=this.getTile(g,w,v,e);if(!y||!Nc(s,y,g))continue;const b=y.getKey();if(h[b]=!0,y.getState()===be.IDLE&&!e.tileQueue.isKeyQueued(b)){const I=hl(g,w,v,this.tempTileCoord_);e.tileQueue.enqueue([y,c,u.getTileCoordCenter(I),m])}}}}findStaleTile_(e,n){const i=this.tileCache_,s=e[0],r=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const u=Fc(a[l],s,r,o);if(i.containsKey(u)){const c=i.get(u);if(c.getState()===be.LOADED)return c.endTransition(it(this)),Nc(n,c,s),!0}}return!1}findAltTiles_(e,n,i,s){const r=e.getTileRangeForTileCoordAndZ(n,i,this.tempTileRange_);if(!r)return!1;let o=!0;const a=this.tileCache_,u=this.getLayer().getRenderSource().getKey();for(let c=r.minX;c<=r.maxX;++c)for(let h=r.minY;h<=r.maxY;++h){const d=Fc(u,i,c,h);let f=!1;if(a.containsKey(d)){const g=a.get(d);g.getState()===be.LOADED&&(Nc(s,g,i),f=!0)}f||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=e.pixelRatio,u=this.getLayer(),c=u.getSource(),h=c.getRevision(),d=c.getTileGridForProjection(r),f=d.getZForResolution(o,c.zDirection),g=d.getResolution(f),p=c.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==p&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=p):this.renderedSourceKey_=p;let m=e.extent;const w=c.getTilePixelRatio(l);this.prepareContainer(e,n);const v=this.context.canvas.width,y=this.context.canvas.height,E=i.extent&&Hi(i.extent);E&&(m=$n(m,Hi(i.extent)));const b=g*v/2/w,I=g*y/2/w,A=[a[0]-b,a[1]-I,a[0]+b,a[1]+I],O={};this.renderedTiles.length=0;const D=u.getPreload();if(e.nextExtent){const oe=d.getZForResolution(s.nextResolution,c.zDirection),ue=pg(e,e.nextExtent);this.enqueueTiles(e,ue,oe,O,D)}const re=pg(e,m);if(this.enqueueTiles(e,re,f,O,0),D>0&&setTimeout(()=>{this.enqueueTiles(e,re,f-1,O,D-1)},0),!(f in O))return this.container;const ee=it(this),Q=e.time;for(const oe of O[f]){const ue=oe.getState();if((oe instanceof Pm||oe instanceof OS)&&ue===be.EMPTY)continue;const we=oe.tileCoord;if(ue===be.LOADED&&oe.getAlpha(ee,Q)===1){oe.endTransition(ee);continue}if(this.renderComplete=!1,this.findStaleTile_(we,O)){kS(O,oe,f),e.animate=!0;continue}if(this.findAltTiles_(d,we,f+1,O))continue;const xe=d.getMinZoom();for(let ve=f-1;ve>=xe&&!this.findAltTiles_(d,we,ve,O);--ve);}const ae=g/o*l/w,Y=this.getRenderContext(e);Ri(this.tempTransform,v/2,y/2,ae,ae,0,-v/2,-y/2),i.extent&&this.clipUnrotated(Y,e,E),c.getInterpolate()||(Y.imageSmoothingEnabled=!1),this.preRender(Y,e);const H=Object.keys(O).map(Number);H.sort(bi);let F;const J=[],le=[];for(let oe=H.length-1;oe>=0;--oe){const ue=H[oe],we=c.getTilePixelSize(ue,l,r),B=d.getResolution(ue)/g,xe=we[0]*B*ae,ve=we[1]*B*ae,M=d.getTileCoordForCoordAndZ(Ms(A),ue),G=d.getTileCoordExtent(M),k=Lt(this.tempTransform,[w*(G[0]-A[0])/g,w*(A[3]-G[3])/g]),W=w*c.getGutterForProjection(r);for(const ne of O[ue]){if(ne.getState()!==be.LOADED)continue;const de=ne.tileCoord,x=M[1]-de[1],R=Math.round(k[0]-(x-1)*xe),P=M[2]-de[2],q=Math.round(k[1]-(P-1)*ve),K=Math.round(k[0]-x*xe),se=Math.round(k[1]-P*ve),ge=R-K,fe=q-se,he=H.length===1;let ie=!1;F=[K,se,K+ge,se,K+ge,se+fe,K,se+fe];for(let me=0,Z=J.length;me<Z;++me)if(!he&&ue<le[me]){const z=J[me];nn([K,se,K+ge,se+fe],[z[0],z[3],z[4],z[7]])&&(ie||(Y.save(),ie=!0),Y.beginPath(),Y.moveTo(F[0],F[1]),Y.lineTo(F[2],F[3]),Y.lineTo(F[4],F[5]),Y.lineTo(F[6],F[7]),Y.moveTo(z[6],z[7]),Y.lineTo(z[4],z[5]),Y.lineTo(z[2],z[3]),Y.lineTo(z[0],z[1]),Y.clip())}J.push(F),le.push(ue),this.drawTile(ne,e,K,se,ge,fe,W,he),ie&&Y.restore(),this.renderedTiles.unshift(ne),this.updateUsedTiles(e.usedTiles,c,ne)}}this.renderedRevision=h,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Co(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=l,this.renderedProjection=r,this.postRender(this.context,e),i.extent&&Y.restore(),Y.imageSmoothingEnabled=!0;const ye=(oe,ue)=>{const we=it(c),te=ue.wantedTiles[we],B=te?Object.keys(te).length:0;this.updateCacheSize(B),this.tileCache_.expireCache()};return e.postRenderFunctions.push(ye),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,i,s,r,o,a,l){let u;if(e instanceof Pu){if(u=dl(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const c=this.getRenderContext(n),h=it(this),d=n.layerStatesArray[n.layerIndex],f=d.opacity*(l?e.getAlpha(h,n.time):1),g=f!==c.globalAlpha;g&&(c.save(),c.globalAlpha=f),c.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,s,r,o),g&&c.restore(),f!==d.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,i){const s=it(n);s in e||(e[s]={}),e[s][i.getKey()]=!0}}class MS extends CS{constructor(e){super(e)}createRenderer(){return new LS(this,{cacheSize:this.getCacheSize()})}}const $c={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Xs=[0,0,0],zi=5;class Om{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,He(IE(this.resolutions_,(s,r)=>r-s),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!n)n=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,He(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ms(i)),He(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,He(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Lh,He(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,r)=>{const o=new Kh(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const s=this.getTileRangeForExtentAndZ(e,n);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)i([n,r,a])}forEachTileCoordParentTileRange(e,n,i,s){let r,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),r=js(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(l,u,i),n(u,r))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return js(r,r+1,o,o+1,n)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(n===s)return js(r,o,r,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-s),u=Math.floor(r*l),c=Math.floor(o*l);if(n<s)return js(u,u,c,c,i);const h=Math.floor(l*(r+1))-1,d=Math.floor(l*(o+1))-1;return js(u,h,c,d,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,Xs);const s=Xs[1],r=Xs[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,Xs);const o=Xs[1],a=Xs[2];return js(s,o,r,a,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=on(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*s[0]*i,n[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=on(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*r[0]*s,a=i[1]-(e[2]+1)*r[1]*s,l=o+r[0]*s,u=a+r[1]*s;return ns(o,a,l,u,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),u=on(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/i/u[0],h=a*(l[1]-n)/i/u[1];return s?(c=da(c,zi)-1,h=da(h,zi)-1):(c=ha(c,zi),h=ha(h,zi)),hl(o,c,h,r)}getTileCoordForXYAndZ_(e,n,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),l=on(this.getTileSize(i),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-n)/a/l[1];return s?(u=da(u,zi)-1,c=da(c,zi)-1):(u=ha(u,zi),c=ha(c,zi)),hl(i,u,c,r)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=ch(this.resolutions_,e,n||0);return _t(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return D_(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let s=this.minZoom;s<n;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}function km(t){let e=t.getDefaultTileGrid();return e||(e=$S(t),t.setDefaultTileGrid(e)),e}function DS(t,e,n){const i=e[0],s=t.getTileCoordCenter(e),r=jh(n);if(!wr(r,s)){const o=et(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,t.getTileCoordForCoordAndZ(s,i)}return e}function FS(t,e,n,i){i=i!==void 0?i:"top-left";const s=Lm(t,e,n);return new Om({extent:t,origin:$E(t,i),resolutions:s,tileSize:n})}function NS(t){const e=t||{},n=e.extent||An("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Lm(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Om(i)}function Lm(t,e,n,i){e=e!==void 0?e:tx,n=on(n!==void 0?n:Lh);const s=Ut(t),r=et(t);i=i>0?i:Math.max(r/n[0],s/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function $S(t,e,n,i){const s=jh(t);return FS(s,e,n,i)}function jh(t){t=An(t);let e=t.getExtent();if(!e){const n=180*gh.degrees/t.getMetersPerUnit();e=ns(-n,-n,n,n)}return e}class GS extends pm{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&on(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new Sm(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){const i=this.getTileCacheForProjection(e);i&&i.expireCache(n)}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,s,r){return qe()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:km(e)}getTileCacheForProjection(e){const n=this.getProjection();return He(n===null||Yr(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(n),o=on(s.getTileSize(e),this.tmpSize);return r==1?o:Kw(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=DS(i,e,n)),xS(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}useTile(e,n,i,s){}}class zS extends Pi{constructor(e,n){super(e),this.tile=n}}const WS=/\{z\}/g,BS=/\{x\}/g,US=/\{y\}/g,KS=/\{-y\}/g;function jS(t,e,n,i,s){return t.replace(WS,e.toString()).replace(BS,n.toString()).replace(US,i.toString()).replace(KS,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-i).toString()})}function YS(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),s=n[2].charCodeAt(0);let r;for(r=i;r<=s;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let s=parseInt(n[1],10);s<=i;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}function XS(t,e){return function(n,i,s){if(!n)return;let r;const o=n[0];if(e){const a=e.getFullTileRange(o);a&&(r=a.getHeight()-1)}return jS(t,o,n[1],n[2],r)}}function VS(t,e){const n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=XS(t[s],e);return HS(i)}function HS(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const s=ES(e),r=fr(s,t.length);return t[r](e,n,i)}}class Yh extends GS{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Yh.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=it(n),s=n.getState();let r;s==be.LOADING?(this.tileLoadingKeys_[i]=!0,r=$c.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==be.ERROR?$c.TILELOADERROR:s==be.LOADED?$c.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new zS(r,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=YS(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(VS(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}useTile(e,n,i){const s=tc(e,n,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}class qS extends Yh{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ZS,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:_m,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?n:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!Yr(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Yr(n,e)))return this.tileGrid;const i=it(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=km(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const n=this.getProjection();if(!n||Yr(n,e))return this.tileCache;const i=it(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Sm(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,n,i,s,r,o){const a=[e,n,i],l=this.getTileCoordForTileUrlFunction(a,r),u=l?this.tileUrlFunction(l,s,r):void 0,c=new this.tileClass(a,u!==void 0?be.IDLE:be.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(Ne.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,n,i,s,r){const o=this.getProjection();if(!o||!r||Yr(o,r))return this.getTileInternal(e,n,i,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,n,i];let u;const c=Cm(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),p=new Pm(o,d,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(m,w,v,y)=>this.getTileInternal(m,w,v,y,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=h,u?a.replace(c,p):a.set(c,p),p}getTileInternal(e,n,i,s,r){const o=tc(e,n,i),a=this.getKey();if(!this.tileCache.containsKey(o)){const u=this.createTile_(e,n,i,s,r,a);return this.tileCache.set(o,u),u}let l=this.tileCache.get(o);return l.key!=a&&(l=this.createTile_(e,n,i,s,r,a),this.tileCache.replace(o,l)),l}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){const i=An(e);if(i){const s=it(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=n)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function ZS(t,e){t.getImage().src=e}class JS extends qS{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:NS({extent:jh(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const QS='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class eR extends JS{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[QS];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const tR="https://",nR="kdapi.pythonanywhere.com",iR="",sR="kyodo100.github.io",rR="/api",mt={url:`${tR}${nR}${iR}${rR}`,client_domain:`${sR}`};function Fs(){const t=Date.now();return new Date(t)}function Ns(){let t=null,e=null;const n=document.cookie.split(";");for(let i in n)e=n[i],e.includes("temporary_user")&&(t=e.substring(e.indexOf("=")+1));return t}const un={default:"\\home\\icon\\"},Mm=t=>(At("data-v-6e80cb9f"),t=t(),Pt(),t),oR={class:"logo"},aR=Mm(()=>_("div",{class:"icon"},[_("span"),_("span"),_("span")],-1)),lR=[aR],cR={key:0,class:"mobile"},uR=Mm(()=>_("li",null,"Menu",-1)),hR=["src"],dR={key:0},fR=["src"],gR={key:1},pR=["src"],_R=["src"],mR={class:"pc"},vR=["src"],yR={key:0},bR=["src"],ER={key:1},wR=["src"],xR=["src"],ba=!1,Ea=9,wa=11,CR=Le({__name:"HeaderElement",setup(t){const e=T(),n=Ns(),i=mt.url,s=mt.client_domain,r=Fs();let o=new Date(r);o.setDate(r.getDate()+180);const a=o.toGMTString(),l=un.default,u=r.getMonth()+1;console.log(u+"月"),n?e.value=n:De.get(`${i}/user/create`).then(f=>{e.value=f.data.temporary_user,document.cookie=`temporary_user=${f.data.temporary_user}; domain=${s}; path='/'; expires=${a}; SameSite=None; Secure`}).catch(f=>{console.error(f)});let c=T(!1);const h=()=>{c.value=!c.value},d=()=>{c.value=!c.value};return(f,g)=>{const p=Tn("router-link");return C(),S("header",null,[_("div",oR,[N(p,{to:{name:"home"}},{default:at(()=>[Ie("Home")]),_:1})]),_("div",{onClick:g[0]||(g[0]=m=>h()),class:"hamburger"},lR),L(c)?(C(),S("nav",cR,[_("ul",null,[uR,_("li",null,[N(p,{to:{name:"myanswer",params:{userPK:e.value}}},{default:at(()=>[_("img",{src:`${L(l)}lightbulb-regular.svg`},null,8,hR),Ie("回答一覧")]),_:1},8,["to"])]),u>=Ea&&u<=wa||ba?(C(),S("li",dR,[N(p,{to:{name:"treeList"}},{default:at(()=>[_("img",{src:`${L(l)}tree-solid.svg`},null,8,fR),Ie("問題作成")]),_:1})])):Ee("",!0),u>=Ea&&u<=wa||ba?(C(),S("li",gR,[N(p,{to:{name:"mypost",params:{userPK:e.value}}},{default:at(()=>[_("img",{src:`${L(l)}pen-nib-solid.svg`},null,8,pR),Ie("投稿一覧")]),_:1},8,["to"])])):Ee("",!0),_("li",null,[N(p,{to:{name:"inquiry"}},{default:at(()=>[_("img",{src:`${L(l)}paper-plane-regular.svg`},null,8,_R),Ie("お問い合わせ")]),_:1})])])])):Ee("",!0),L(c)?(C(),S("div",{key:1,onClick:d,class:"black-background"})):Ee("",!0),_("nav",mR,[_("ul",null,[_("li",null,[N(p,{to:{name:"myanswer",params:{userPK:e.value}}},{default:at(()=>[_("img",{src:`${L(l)}lightbulb-regular.svg`},null,8,vR),Ie("回答一覧")]),_:1},8,["to"])]),u>=Ea&&u<=wa||ba?(C(),S("li",yR,[N(p,{to:{name:"treeList"}},{default:at(()=>[_("img",{src:`${L(l)}tree-solid.svg`},null,8,bR),Ie("問題作成")]),_:1})])):Ee("",!0),u>=Ea&&u<=wa||ba?(C(),S("li",ER,[N(p,{to:{name:"mypost",params:{userPK:e.value}}},{default:at(()=>[_("img",{src:`${L(l)}pen-nib-solid.svg`},null,8,wR),Ie("投稿一覧")]),_:1},8,["to"])])):Ee("",!0),_("li",null,[N(p,{to:{name:"inquiry"}},{default:at(()=>[_("img",{src:`${L(l)}paper-plane-regular.svg`},null,8,xR),Ie("お問い合わせ")]),_:1})])])])])}}}),Nt=Be(CR,[["__scopeId","data-v-6e80cb9f"]]),SR={class:"now-loading-text"},RR=Le({__name:"NowLoading",setup(t){let e=T(0),n=T(0),i=T(0),s=T("..."),r="green",o="#fff",a=T(`color: ${r};`),l=T(`background-color: ${o};`),u=T(`background-color: ${r};`);const c=()=>{if(e.value=Math.floor(Math.random()*10),n.value=Math.floor(Math.random()*10),i.value=Math.floor(Math.random()*10),e.value==n.value&&e.value==i.value&&e.value!=7){r="palevioletred",o="#fff",a.value=`color: ${r};`,l.value=`background-color: ${o};`,u.value=`background-color: ${r};`;return}if(e.value+1==n.value&&n.value+1==i.value){r="gray",o="#fff",a.value=`color: ${r};`,l.value=`background-color: ${o};`,u.value=`background-color: ${r};`;return}if(n.value==0&&(e.value==4||e.value==5)&&(i.value==3||i.value==4)){r="#fff",o="#000",a.value=`color: ${r};`,l.value=`background-color: ${o};`,u.value=`background-color: ${r};`;return}if(e.value==7&&n.value==7&&i.value==7){r="#e83929",o="#fff",a.value=`color: ${r};`,l.value=`background-color: ${o};`,u.value=`background-color: ${r};`;return}r="green",o="#fff",a.value=`color: ${r};`,l.value=`background-color: ${o};`,u.value=`background-color: ${r};`};c(),setTimeout(()=>{setInterval(()=>{c()},2900)},400);const h=()=>{s.value="",setTimeout(()=>{s.value="."},900),setTimeout(()=>{s.value=".."},1800),setTimeout(()=>{s.value="..."},2700)};return h(),setInterval(()=>{h()},3600),(d,f)=>(C(),S("div",null,[_("span",SR,"now loading"+X(L(s)),1),_("span",{style:Et(L(u)),class:"now-loading"},[_("span",{style:Et(L(l))},[_("span",{style:Et(L(a)),class:"now-loading-num"},X(L(e)),5)],4),_("span",{style:Et(L(l))},[_("span",{style:Et(L(a)),class:"now-loading-num"},X(L(n)),5)],4),_("span",{style:Et(L(l))},[_("span",{style:Et(L(a)),class:"now-loading-num"},X(L(i)),5)],4)],4)]))}}),Yn=Be(RR,[["__scopeId","data-v-f0a05b6b"]]),TR={},IR={class:"btn"};function AR(t,e){return C(),S("button",IR," この木で投稿する ")}const Dm=Be(TR,[["render",AR],["__scopeId","data-v-29fb6a44"]]),Xh=t=>(At("data-v-f68f9acb"),t=t(),Pt(),t),PR={key:0},OR={key:1},kR=Xh(()=>_("div",{class:"lamp"},[_("div",{class:"btm"})],-1)),LR={key:0,class:"tree"},MR=["src"],DR=["src"],FR=Xh(()=>_("span",null,"コ",-1)),NR={key:2},$R={class:"select"},GR=Xh(()=>_("div",{id:"map"},null,-1)),zR=!1,WR=9,BR=11,UR=Le({__name:"HomeScreen",setup(t){const n=Fs().getMonth()+1;console.log(n+"月");let i=T(window.innerWidth);const s=()=>{i.value=window.innerWidth};let r=!1,o=!0,a=T([]),l=T([]),u=T(0),c=T([]);const h=T(!0),d=T(!1),f=T(!0);let g=[];const p={latitude:35.655947887481474,longitude:139.63089240390195};let m=[];const w=()=>{0<u.value&&(u.value-=1,u.value==0?(h.value=!0,d.value=!1):(h.value=!1,d.value=!1)),g.shift(),g.push({latitude:a[u.value].latitude,longitude:a[u.value].longitude})},v=()=>{a.length-1>u.value&&(u.value+=1,console.log(u.value),a.length-1==u.value?(d.value=!0,h.value=!1):(h.value=!1,d.value=!1)),g.shift(),g.push({latitude:a[u.value].latitude,longitude:a[u.value].longitude})},y=mt.url;return De.get(`${y}/home`).then(E=>{a=E.data[0].trees,l=E.data[0].posts,f.value=!1;for(let b=0;b<a.length;b++){c.value.push(0);for(let I=0;I<l.length;I++)a[b].id==l[I].tree&&(c.value[b]+=1);c.value[b]=String(c.value[b])}console.log(c);for(let b=0;b<a.length;b++)b==0&&g.push({latitude:a[b].latitude,longitude:a[b].longitude}),a[b].latitude&&a[b].longitude&&m.push({latitude:a[b].latitude,longitude:a[b].longitude,tree_number:a[b].tree_number})}).catch(E=>{console.error(E)}),console.log(g),console.log(m),a&&(Hu(()=>{ii(f,()=>{window.addEventListener("resize",s);const E=[],b=[];for(const ee in m){const{latitude:Q,longitude:ae,tree_number:Y}=m[ee],H=$a([ae,Q],"EPSG:4326","EPSG:3857"),F=new lo({geometry:new To(H)});F.setStyle(new xi({image:new Ho({src:"\\home\\icon\\tree-solid.png",scale:.07})}));const J=document.createElement("p");J.textContent=`${Y}`,J.className="point",J.style.color="#fff",J.style.fontSize="0.7rem",J.style.fontWeight="bold",J.style.padding="10px 10px 10px 10px",J.style.cursor="pointer",J.style.userSelect="none",J.style.pointerEvents="none",J.id="one";const le=new yS({element:J,position:H,offset:[-18,-28]});E.push(F),b.push(le)}const I=new Pc({source:new Oc({features:E})}),A=new mS({target:"map",layers:[new MS({source:new eR}),I],view:new Zn({center:$a([p.longitude,p.latitude],"EPSG:4326","EPSG:3857"),zoom:19.5})});b.forEach(ee=>A.addOverlay(ee));const O=new Pc({source:new Oc,style:new xi({stroke:new Vo({color:"rgb(0, 127, 255, 0.7)",width:2})})});A.addLayer(O);const D=new Pc({source:new Oc});A.addLayer(D);function re(){var F,J,le,ye;let ee=$a([g[0].longitude,g[0].latitude],"EPSG:4326","EPSG:3857");const Q=A.getView().calculateExtent(A.getSize()),ae=[Q[0],Q[3]],Y=new lo({geometry:new sl([ee,ae])}),H=new lo({geometry:new To(ee)});(F=O.getSource())==null||F.clear(),(J=D.getSource())==null||J.clear(),o&&((le=O.getSource())==null||le.addFeature(Y),(ye=D.getSource())==null||ye.addFeature(H))}A.getView().on("change:center",re),A.getView().on("change:resolution",re),i.value>500&&re(),ii(i,ee=>{console.log(ee),r=!0,ee>500?o=!0:o=!1,setTimeout(()=>{r=!1,r||re()},500)}),ii(u,()=>{re()})})}),gp(()=>{window.removeEventListener("resize",s)})),(E,b)=>{const I=Tn("router-link"),A=Tn("dev");return C(),S(Se,null,[N(Nt),_("main",null,[f.value?(C(),S("div",PR,[N(Yn)])):(C(),S("div",OR,[N(A,{class:"tree-list"},{default:at(()=>[kR,(C(!0),S(Se,null,Ye(L(a),(O,D)=>(C(),S("div",{key:O.id},[D==L(u)?(C(),S("div",LR,[_("h2",null,"No. "+X(O.tree_number),1),_("span",null,[Ie(X(O.name),1),_("span",null,"-"+X(O.sub_number),1)]),_("span",null,X(O.scientific_name),1),O.image_link?(C(),S("img",{key:0,src:O.image_link,loading:"lazy"},null,8,MR)):(C(),S("img",{key:1,src:O.image,loading:"lazy"},null,8,DR)),_("p",null,[Ie(" 投稿数: "),_("span",null,X(L(c)[D]),1),FR]),n>=WR&&n<=BR||zR?(C(),S("div",NR,[N(I,{to:{name:"createPost",params:{treePK:`${O.id}`}}},{default:at(()=>[N(Dm)]),_:2},1032,["to"])])):Ee("",!0)])):Ee("",!0)]))),128)),_("div",$R,[h.value?Ee("",!0):(C(),S("button",{key:0,onClick:w,class:"left-button btn"},"<")),d.value?Ee("",!0):(C(),S("button",{key:1,onClick:v,class:"right-button btn"},">"))])]),_:1})])),GR])],64)}}}),KR=Be(UR,[["__scopeId","data-v-f68f9acb"]]),ea={default:""},jR=Le({__name:"ReloadButton",props:{isWhite:{type:Boolean}},setup(t){const e=t,n=()=>{window.location.reload()};return(i,s)=>(C(),S("div",null,[_("button",{class:nt(e.isWhite?"w btn":"b btn"),onClick:n},"再読み込み",2)]))}}),Fm=Be(jR,[["__scopeId","data-v-13c57e20"]]),Nm=t=>(At("data-v-94dcf4a5"),t=t(),Pt(),t),YR={class:"time-out"},XR=Nm(()=>_("span",null,"申し訳ございません。",-1)),VR=Nm(()=>_("span",null,"接続に失敗しました...",-1)),HR=["src"],qR=Le({__name:"TimeOut",setup(t){const e=un.default;return(n,i)=>(C(),S("div",YR,[XR,VR,N(Fm,{"is-white":!0}),_("img",{src:`${L(e)}ghost-solid.svg`},null,8,HR)]))}}),ai=Be(qR,[["__scopeId","data-v-94dcf4a5"]]),ZR={class:"top-error"},JR={key:0},QR={class:"error-message"},eT=Le({__name:"TopError",props:{isError:{type:Boolean},errorMessage:{}},setup(t){const e=t;return(n,i)=>(C(),S("div",ZR,[e.isError?(C(),S("span",JR,[(C(!0),S(Se,null,Ye(e.errorMessage,(s,r)=>(C(),S("span",{key:r},[_("span",QR,X(s),1)]))),128)),N(Fm,{"is-white":!1})])):Ee("",!0)]))}}),It=Be(eT,[["__scopeId","data-v-98683f4b"]]),tT=Le({__name:"BaseButton",props:{text:String},setup(t){const e=t;return(n,i)=>(C(),S("span",null,X(e.text),1))}}),qt=Be(tT,[["__scopeId","data-v-58bb40b8"]]),nT=["src"],iT={class:"content-none-text"},sT=Le({__name:"ContentNone",props:{imagePathSVG:{},text:{},buttonPath:{},buttonText:{}},setup(t){const e=T(un.default),n=t;return(i,s)=>{const r=Tn("dev");return C(),Pn(r,{class:"content-none"},{default:at(()=>[_("div",null,[_("img",{src:`${e.value}${n.imagePathSVG}.svg`},null,8,nT),_("span",iT,X(n.text),1)])]),_:1})}}}),nc=Be(sT,[["__scopeId","data-v-4751bc2f"]]),rT={key:0,class:"black-background"},oT=Le({__name:"blackBackGround",setup(t){const e=T(!0);return(n,i)=>e.value?(C(),S("div",rT)):Ee("",!0)}}),aT=Be(oT,[["__scopeId","data-v-39bcd835"]]),$m=t=>(At("data-v-fd9f7aa7"),t=t(),Pt(),t),lT={key:0,class:"popup"},cT={key:0,class:"popup-card"},uT=["src"],hT=$m(()=>_("span",{class:"popup-card-text"},"本当に削除しますか？",-1)),dT={key:1,class:"popup-card"},fT=["src"],gT=$m(()=>_("span",{class:"popup-card-text"},"申し訳ございません。削除に失敗しました。",-1)),pT=Le({__name:"PopupCard",props:{contentAttr:{},appear:{},contentPK:{},index:{},contents:{},none:{},isDeleted:{type:Boolean}},setup(t){const e=mt.url,n=Ns(),i=Ai(),s=T(!1),r=T(un.default),o=t,a=(c,h)=>{u(c,h)},l=c=>{o.appear[c]=!o.appear[c],s.value=!1,console.log(o.contents[c])},u=async(c,h)=>{s.value=!1,o.isDeleted?await De.delete(`${e}/${o.contentAttr}/delete/${c}/${n}`).catch(d=>{console.error(d),s.value=!0,d.status==403&&i.push({name:"404"})}):await De.patch(`${e}/${o.contentAttr}/delete/${c}/${n}`).catch(d=>{console.error(d),s.value=!0,d.status==403&&i.push({name:"404"})}),s.value||(console.log("削除"),0<o.contents.length&&(o.contents.splice(h,1),o.contents.length||(console.log(o.contents),o.none[0]=!0)),o.appear[h]=!o.appear[h])};return(c,h)=>o.appear[o.index]?(C(),S("div",lT,[s.value?(C(),S("div",dT,[_("img",{onClick:h[3]||(h[3]=d=>l(o.index)),src:`${r.value}circle-xmark-regular.svg`},null,8,fT),gT,_("button",{onClick:h[4]||(h[4]=d=>l(o.index)),class:"popup-card-error-button btn"},"閉じる")])):(C(),S("div",cT,[_("img",{onClick:h[0]||(h[0]=d=>l(o.index)),src:`${r.value}circle-xmark-regular.svg`},null,8,uT),hT,_("button",{onClick:h[1]||(h[1]=d=>a(o.contentPK,o.index)),class:"popup-card-yes-button btn"},"削除する"),_("button",{onClick:h[2]||(h[2]=d=>l(o.index)),class:"popup-card-no-button btn"},"削除しない")])),N(aT,{onClick:h[5]||(h[5]=d=>l(o.index))})])):Ee("",!0)}}),Gm=Be(pT,[["__scopeId","data-v-fd9f7aa7"]]),_T=t=>(At("data-v-3bc2c3f8"),t=t(),Pt(),t),mT={key:0},vT={key:1},yT={key:2},bT={key:3},ET={key:4},wT={class:"post"},xT={class:"post-list"},CT=["src"],ST=["src"],RT=["src"],TT=["src"],IT={class:"updated_at"},AT={class:"tree-info"},PT=_T(()=>_("span",null,"-",-1)),OT={key:4,class:"choice-list"},kT={class:"content"},LT={class:"answer-list"},MT={key:0},DT={class:"answer-bar"},FT={key:0},NT=["src"],$T={key:1},GT={class:"answer-bar"},zT={key:0},WT=["src"],BT={key:2},UT={class:"answer-bar"},KT={key:0},jT=["src"],YT={key:3},XT={class:"answer-bar"},VT={key:0},HT=["src"],qT={key:5,class:"blanks-list"},ZT={key:0},JT={key:0},QT={key:0},eI={class:"word-group"},tI={key:1},nI={class:"word-group"},iI={class:"content-group"},sI={key:1},rI={class:"content-group"},oI={key:0},aI={key:0},lI={class:"word-group"},cI={key:1},uI={class:"word-group"},hI={key:0},dI={class:"correct-rate"},fI={class:"like-number"},gI=["src"],pI={class:"update-button btn"},_I=["onClick"],mI=["src"],vI=Le({__name:"GetMyPost",props:{userPK:{}},setup(t){const e=T([]);let n=T([]),i=T([]),s=T([]),r=T([]);const o=T(!0),a=T(!1),l=T(!1),u=T([!1]),c=mt.url,h=T(un.default),d=T(ea.default),f=t;let g=[];const p=["or","and","か","か、","と","と、","や","や、","とか","とか、","だとか","だとか、","だったり","だったり、","であったり","であったり、","または","または、","又は","又は、","かつ","かつ、","且つ","且つ、","および","および、","及び","及び、","ならびに","ならびに、","並びに","並びに、","もしくは","もしくは、","若しくは","若しくは、","かもしくは","かもしくは、","か若しくは","か若しくは、","ないし","ないし、","乃至","乃至、","ないしは","ないしは、","乃至は","乃至は、","ないしも","ないしも、","乃至も","乃至も、","あるいは","あるいは、","或いは","或いは、","かあるいは","かあるいは、","か或いは","か或いは、","か、あるいは","か、あるいは、","か、或いは","か、或いは、","あるいはまた","あるいはまた、","或いはまた","或いはまた、","あるいは、また","あるいは、また、","或いは、また","或いは、また、","とも","とも、","はたまた","はたまた、","将又","将又、","、","・",",","/"],m=w=>{e.value[w]=!e.value[w]};return De.get(`${c}/mypost/${f.userPK.userPK}`).then(w=>{n.value=w.data[0].posts,g=w.data[0].answers,o.value=!1,n.value.length||(u.value[0]=!0);for(let v=0;v<n.value.length;v++){let y=[0,0,0,0],E=0,b=0,I=0;for(let A=0;A<g.length;A++)n.value[v].id==g[A].post&&(n.value[v].attr=="選択肢"?(E++,g[A].ans_choice==0&&y[0]++,g[A].ans_choice==1&&y[1]++,g[A].ans_choice==2&&y[2]++,g[A].ans_choice==3&&y[3]++):(I++,g[A].is_correct&&b++),console.log(y));s.value.push(Math.floor(b/I*100));for(let A=0;A<y.length;A++)E&&(y[A]=Math.floor(y[A]/E*100));console.log(y),i.value.push(y)}console.log(i.value);for(let v=0;v<n.value.length;v++){r.value.push([]);let y=0;if(n.value[v].attr=="穴埋め")for(let E=0;E<n.value[v].word_group.length;E++)console.log(n.value[v].word_group[E]),console.log(n.value[v].word_group[E+1]),!n.value[v].is_first_blank&&p.includes(n.value[v].content_group[E])||p.includes(n.value[v].content_group[E+1])||n.value[v].is_first_blank&&p.includes(n.value[v].content_group[E-1])||p.includes(n.value[v].content_group[E])?(y!=null&&r.value[v].push(y),y++,`${n.value[v].word_group[E]}`!=`${n.value[v].word_group[E+1]}`&&(y=0)):(y=0,r.value[v].push(""))}console.log(r)}).catch(w=>{o.value=!1,l.value=!0,console.error(w)}),setTimeout(()=>{o.value&&(a.value=!0)},31e3),(w,v)=>{const y=Tn("router-link");return C(),S(Se,null,[N(Nt),_("h2",{style:Et(u.value[0]?"display: none":"display: block;")}," あなたの投稿 ",4),_("div",null,[o.value?(C(),S("div",mT,[N(Yn)])):a.value?(C(),S("div",vT,[N(ai)])):l.value?(C(),S("div",yT,[N(It,{"is-error":l.value,"error-message":["不明なエラーが発生しました。","時間を空けてから再度お試しください。"]},null,8,["is-error"])])):u.value[0]?(C(),S("div",bT,[N(nc,{"image-path-s-v-g":"pagelines-brands-solid",text:"あなたの投稿がありません。","button-path":"treeList","button-text":"投稿する"})])):(C(),S("div",ET,[_("div",wT,[(C(!0),S(Se,null,Ye(L(n),(E,b)=>(C(),S("div",{key:E.id},[_("div",xT,[E.image_link?(C(),S("img",{key:0,src:`${d.value}${E.image_link}`,class:"post-image",loading:"lazy"},null,8,CT)):E.image?(C(),S("img",{key:1,src:E.image,class:"post-image",loading:"lazy"},null,8,ST)):E.tree.image_link?(C(),S("img",{key:2,src:E.tree.image_link,class:"post-image",loading:"lazy"},null,8,RT)):(C(),S("img",{key:3,src:E.tree.image,class:"post-image",loading:"lazy"},null,8,TT)),_("span",IT,X(E.updated_at),1),_("div",AT,[_("span",null,"No. "+X(E.tree.tree_number),1),_("span",null,X(E.tree.name),1),PT,_("span",null,X(E.tree.sub_number),1)]),E.attr=="選択肢"?(C(),S("div",OT,[_("span",kT,X(E.content),1),_("div",LT,[E.choices[0]?(C(),S("div",MT,[_("span",DT,[_("span",{class:nt(E.correct_number==0?"correct-choice-content choice-content":"choice-content")},[_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==0?"max-choice-text choice-text":"choice-text")},[_("span",null,X(E.choices[0]),1),_("span",null,X(L(i)[b][0])+"%",1)],2),_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==0?"max-result result":E.correct_number==0?"correct-result result":"other-result result"),style:Et({width:`${L(i)[b][0]}%`})},null,6)],2),E.correct_number==0?(C(),S("span",FT,[_("img",{class:"correct",src:`${h.value}circle-check-regular.svg`},null,8,NT)])):Ee("",!0)])])):Ee("",!0),E.choices[1]?(C(),S("div",$T,[_("span",GT,[_("span",{class:nt(E.correct_number==1?"correct-choice-content choice-content":"choice-content")},[_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==1?"max-choice-text choice-text":"choice-text")},[_("span",null,X(E.choices[1]),1),_("span",null,X(L(i)[b][1])+"%",1)],2),_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==1?"max-result result":E.correct_number==1?"correct-result result":"other-result result"),style:Et({width:`${L(i)[b][1]}%`})},null,6)],2),E.correct_number==1?(C(),S("span",zT,[_("img",{class:"correct",src:`${h.value}circle-check-regular.svg`},null,8,WT)])):Ee("",!0)])])):Ee("",!0),E.choices[2]?(C(),S("div",BT,[_("span",UT,[_("span",{class:nt(E.correct_number==2?"correct-choice-content choice-content":"choice-content")},[_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==2?"max-choice-text choice-text":"choice-text")},[_("span",null,X(E.choices[2]),1),_("span",null,X(L(i)[b][2])+"%",1)],2),_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==2?"max-result result":E.correct_number==2?"correct-result result":"other-result result"),style:Et({width:`${L(i)[b][2]}%`})},null,6)],2),E.correct_number==2?(C(),S("span",KT,[_("img",{class:"correct",src:`${h.value}circle-check-regular.svg`},null,8,jT)])):Ee("",!0)])])):Ee("",!0),E.choices[3]?(C(),S("div",YT,[_("span",XT,[_("span",{class:nt(E.correct_number==3?"correct-choice-content choice-content":"choice-content")},[_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==3?"max-choice-text choice-text":"choice-text")},[_("span",null,X(E.choices[3]),1),_("span",null,X(L(i)[b][3])+"%",1)],2),_("span",{class:nt(L(i)[b].indexOf(Math.max(...L(i)[b]))==3?"max-result result":E.correct_number==3?"correct-result result":"other-result result"),style:Et({width:`${L(i)[b][3]}%`})},null,6)],2),E.correct_number==3?(C(),S("span",VT,[_("img",{class:"correct",src:`${h.value}circle-check-regular.svg`},null,8,HT)])):Ee("",!0)])])):Ee("",!0)])])):(C(),S("div",qT,[(C(!0),S(Se,null,Ye(E.content_group.length,I=>(C(),S("span",{key:I,class:"blanks-content"},[E.is_first_blank?(C(),S("span",ZT,[E.word_group[I-1]?(C(),S("span",JT,[Array.isArray(E.word_group[I-1])?(C(),S("span",QT,[_("span",eI,X(E.word_group[I-1][L(r)[b][I-1]]),1)])):(C(),S("span",tI,[_("span",nI,X(E.word_group[I-1]),1)]))])):Ee("",!0),_("span",iI,X(E.content_group[I-1]),1)])):(C(),S("span",sI,[_("span",rI,X(E.content_group[I-1]),1),E.word_group[I-1]?(C(),S("span",oI,[Array.isArray(E.word_group[I-1])?(C(),S("span",aI,[_("span",lI,X(E.word_group[I-1][L(r)[b][I-1]]),1)])):(C(),S("span",cI,[_("span",uI,X(E.word_group[I-1]),1)]))])):Ee("",!0)]))]))),128)),isNaN(L(s)[b])?Ee("",!0):(C(),S("span",hI,[_("span",dI,"正解率："+X(L(s)[b])+"%",1)]))])),_("span",fI,X(E.likes.length),1),_("img",{class:"like is-like",src:`${h.value}heart-solid.svg`},null,8,gI),_("button",pI,[N(y,{to:{name:"updatePost",params:{postPK:E.id}},class:"a"},{default:at(()=>[Ie(" 編集する ")]),_:2},1032,["to"])]),_("button",{onClick:I=>m(b),class:"delete-button btn"},[_("img",{src:`${h.value}trash-can-solid.svg`},null,8,mI)],8,_I),N(Gm,{"content-attr":"post",appear:e.value,"content-p-k":E.id,index:b,contents:L(n),none:u.value,"is-deleted":!1},null,8,["appear","content-p-k","index","contents","none"])])]))),128))])]))])],64)}}}),yI=Be(vI,[["__scopeId","data-v-3bc2c3f8"]]),bI=Le({__name:"GetMyPostPage",props:{userPK:{}},setup(t){return(e,n)=>(C(),Pn(yI,{userPK:e.userPK},null,8,["userPK"]))}});var EI=Object.defineProperty,fl=Object.getOwnPropertySymbols,zm=Object.prototype.hasOwnProperty,Wm=Object.prototype.propertyIsEnumerable,_g=(t,e,n)=>e in t?EI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sr=(t,e)=>{for(var n in e||(e={}))zm.call(e,n)&&_g(t,n,e[n]);if(fl)for(var n of fl(e))Wm.call(e,n)&&_g(t,n,e[n]);return t},Bm=(t,e)=>{var n={};for(var i in t)zm.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&fl)for(var i of fl(t))e.indexOf(i)<0&&Wm.call(t,i)&&(n[i]=t[i]);return n};const Um="[vue-draggable-plus]: ";function wI(t){console.warn(Um+t)}function xI(t){console.error(Um+t)}function mg(t,e,n){return n>=0&&n<t.length&&t.splice(n,0,t.splice(e,1)[0]),t}function CI(t){return t.replace(/-(\w)/g,(e,n)=>n?n.toUpperCase():"")}function SI(t){return Object.keys(t).reduce((e,n)=>(typeof t[n]<"u"&&(e[CI(n)]=t[n]),e),{})}function vg(t,e){return Array.isArray(t)&&t.splice(e,1),t}function yg(t,e,n){return Array.isArray(t)&&t.splice(e,0,n),t}function RI(t){return typeof t>"u"}function TI(t){return typeof t=="string"}function bg(t,e,n){const i=t.children[n];t.insertBefore(e,i)}function Gc(t){t.parentNode&&t.parentNode.removeChild(t)}function II(t,e=document){var n;let i=null;return typeof(e==null?void 0:e.querySelector)=="function"?i=(n=e==null?void 0:e.querySelector)==null?void 0:n.call(e,t):i=document.querySelector(t),i||wI(`Element not found: ${t}`),i}function AI(t,e,n=null){return function(...i){return t.apply(n,i),e.apply(n,i)}}function PI(t,e){const n=sr({},t);return Object.keys(e).forEach(i=>{n[i]?n[i]=AI(t[i],e[i]):n[i]=e[i]}),n}function OI(t){return t instanceof HTMLElement}function Eg(t,e){Object.keys(t).forEach(n=>{e(n,t[n])})}function kI(t){return t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97)}const LI=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function wg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wg(Object(n),!0).forEach(function(i){MI(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ga(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ga=function(e){return typeof e}:Ga=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ga(t)}function MI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ti(){return Ti=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ti.apply(this,arguments)}function DI(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function FI(t,e){if(t==null)return{};var n=DI(t,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var NI="1.15.2";function Si(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ki=Si(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ta=Si(/Edge/i),xg=Si(/firefox/i),uo=Si(/safari/i)&&!Si(/chrome/i)&&!Si(/android/i),Km=Si(/iP(ad|od|hone)/i),jm=Si(/chrome/i)&&Si(/android/i),Ym={capture:!1,passive:!1};function Qe(t,e,n){t.addEventListener(e,n,!ki&&Ym)}function Xe(t,e,n){t.removeEventListener(e,n,!ki&&Ym)}function gl(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function $I(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Dn(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&gl(t,e):gl(t,e))||i&&t===n)return t;if(t===n)break}while(t=$I(t))}return null}var Cg=/\s+/g;function dn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Cg," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Cg," ")}}function Pe(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function gr(t,e){var n="";if(typeof t=="string")n=t;else do{var i=Pe(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function Xm(t,e,n){if(t){var i=t.getElementsByTagName(e),s=0,r=i.length;if(n)for(;s<r;s++)n(i[s],s);return i}return[]}function si(){var t=document.scrollingElement;return t||document.documentElement}function bt(t,e,n,i,s){if(!(!t.getBoundingClientRect&&t!==window)){var r,o,a,l,u,c,h;if(t!==window&&t.parentNode&&t!==si()?(r=t.getBoundingClientRect(),o=r.top,a=r.left,l=r.bottom,u=r.right,c=r.height,h=r.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!ki))do if(s&&s.getBoundingClientRect&&(Pe(s,"transform")!=="none"||n&&Pe(s,"position")!=="static")){var d=s.getBoundingClientRect();o-=d.top+parseInt(Pe(s,"border-top-width")),a-=d.left+parseInt(Pe(s,"border-left-width")),l=o+r.height,u=a+r.width;break}while(s=s.parentNode);if(i&&t!==window){var f=gr(s||t),g=f&&f.a,p=f&&f.d;f&&(o/=p,a/=g,h/=g,c/=p,l=o+c,u=a+h)}return{top:o,left:a,bottom:l,right:u,width:h,height:c}}}function Sg(t,e,n){for(var i=Zi(t,!0),s=bt(t)[e];i;){var r=bt(i)[n],o=void 0;if(o=s>=r,!o)return i;if(i===si())break;i=Zi(i,!1)}return!1}function Rr(t,e,n,i){for(var s=0,r=0,o=t.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==Oe.ghost&&(i||o[r]!==Oe.dragged)&&Dn(o[r],n.draggable,t,!1)){if(s===e)return o[r];s++}r++}return null}function Vh(t,e){for(var n=t.lastElementChild;n&&(n===Oe.ghost||Pe(n,"display")==="none"||e&&!gl(n,e));)n=n.previousElementSibling;return n||null}function xn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Oe.clone&&(!e||gl(t,e))&&n++;return n}function Rg(t){var e=0,n=0,i=si();if(t)do{var s=gr(t),r=s.a,o=s.d;e+=t.scrollLeft*r,n+=t.scrollTop*o}while(t!==i&&(t=t.parentNode));return[e,n]}function GI(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function Zi(t,e){if(!t||!t.getBoundingClientRect)return si();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=Pe(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return si();if(i||e)return n;i=!0}}while(n=n.parentNode);return si()}function zI(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zc(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ho;function Vm(t,e){return function(){if(!ho){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),ho=setTimeout(function(){ho=void 0},e)}}}function WI(){clearTimeout(ho),ho=void 0}function Hm(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function qm(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Zm(t,e,n){var i={};return Array.from(t.children).forEach(function(s){var r,o,a,l;if(!(!Dn(s,e.draggable,t,!1)||s.animated||s===n)){var u=bt(s);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,u.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,u.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,u.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var _n="Sortable"+new Date().getTime();function BI(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(Pe(i,"display")==="none"||i===Oe.ghost)){t.push({target:i,rect:bt(i)});var s=oi({},t[t.length-1].rect);if(i.thisAnimationDuration){var r=gr(i,!0);r&&(s.top-=r.f,s.left-=r.e)}i.fromRect=s}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(GI(t,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,r=0;t.forEach(function(o){var a=0,l=o.target,u=l.fromRect,c=bt(l),h=l.prevFromRect,d=l.prevToRect,f=o.rect,g=gr(l,!0);g&&(c.top-=g.f,c.left-=g.e),l.toRect=c,l.thisAnimationDuration&&zc(h,c)&&!zc(u,c)&&(f.top-c.top)/(f.left-c.left)===(u.top-c.top)/(u.left-c.left)&&(a=KI(f,h,d,i.options)),zc(c,u)||(l.prevFromRect=u,l.prevToRect=c,a||(a=i.options.animation),i.animate(l,f,c,a)),a&&(s=!0,r=Math.max(r,a),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},a),l.thisAnimationDuration=a)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),t=[]},animate:function(n,i,s,r){if(r){Pe(n,"transition",""),Pe(n,"transform","");var o=gr(this.el),a=o&&o.a,l=o&&o.d,u=(i.left-s.left)/(a||1),c=(i.top-s.top)/(l||1);n.animatingX=!!u,n.animatingY=!!c,Pe(n,"transform","translate3d("+u+"px,"+c+"px,0)"),this.forRepaintDummy=UI(n),Pe(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Pe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){Pe(n,"transition",""),Pe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function UI(t){return t.offsetWidth}function KI(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Vs=[],Wc={initializeByDefault:!0},na={mount:function(t){for(var e in Wc)Wc.hasOwnProperty(e)&&!(e in t)&&(t[e]=Wc[e]);Vs.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Vs.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var s=t+"Global";Vs.forEach(function(r){e[r.pluginName]&&(e[r.pluginName][s]&&e[r.pluginName][s](oi({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](oi({sortable:e},n)))})},initializePlugins:function(t,e,n,i){Vs.forEach(function(o){var a=o.pluginName;if(!(!t.options[a]&&!o.initializeByDefault)){var l=new o(t,e,t.options);l.sortable=t,l.options=t.options,t[a]=l,Ti(n,l.defaults)}});for(var s in t.options)if(t.options.hasOwnProperty(s)){var r=this.modifyOption(t,s,t.options[s]);typeof r<"u"&&(t.options[s]=r)}},getEventProperties:function(t,e){var n={};return Vs.forEach(function(i){typeof i.eventProperties=="function"&&Ti(n,i.eventProperties.call(e[i.pluginName],t))}),n},modifyOption:function(t,e,n){var i;return Vs.forEach(function(s){t[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[e]=="function"&&(i=s.optionListeners[e].call(t[s.pluginName],n))}),i}};function jI(t){var e=t.sortable,n=t.rootEl,i=t.name,s=t.targetEl,r=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[_n],!!e){var p,m=e.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!ki&&!ta?p=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(i,!0,!0)),p.to=o||n,p.from=a||n,p.item=s||n,p.clone=r,p.oldIndex=l,p.newIndex=u,p.oldDraggableIndex=c,p.newDraggableIndex=h,p.originalEvent=d,p.pullMode=f?f.lastPutMode:void 0;var v=oi(oi({},g),na.getEventProperties(i,e));for(var y in v)p[y]=v[y];n&&n.dispatchEvent(p),m[w]&&m[w].call(e,p)}}var YI=["evt"],Zt=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,s=FI(n,YI);na.pluginEvent.bind(Oe)(t,e,oi({dragEl:_e,parentEl:gt,ghostEl:Fe,rootEl:ut,nextEl:_s,lastDownEl:za,cloneEl:dt,cloneHidden:Vi,dragStarted:Qr,putSortable:kt,activeSortable:Oe.active,originalEvent:i,oldIndex:rr,oldDraggableIndex:fo,newIndex:fn,newDraggableIndex:Yi,hideGhostForTarget:tv,unhideGhostForTarget:nv,cloneNowHidden:function(){Vi=!0},cloneNowShown:function(){Vi=!1},dispatchSortableEvent:function(r){Vt({sortable:e,name:r,originalEvent:i})}},s))};function Vt(t){jI(oi({putSortable:kt,cloneEl:dt,targetEl:_e,rootEl:ut,oldIndex:rr,oldDraggableIndex:fo,newIndex:fn,newDraggableIndex:Yi},t))}var _e,gt,Fe,ut,_s,za,dt,Vi,rr,fn,fo,Yi,xa,kt,tr=!1,pl=!1,_l=[],fs,Ln,Bc,Uc,Tg,Ig,Qr,Hs,go,po=!1,Ca=!1,Wa,Gt,Kc=[],Ou=!1,ml=[],ic=typeof document<"u",Sa=Km,Ag=ta||ki?"cssFloat":"float",XI=ic&&!jm&&!Km&&"draggable"in document.createElement("div"),Jm=function(){if(ic){if(ki)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Qm=function(t,e){var n=Pe(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Rr(t,0,e),r=Rr(t,1,e),o=s&&Pe(s),a=r&&Pe(r),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+bt(s).width,u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+bt(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&o.float!=="none"){var c=o.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return s&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||l>=i&&n[Ag]==="none"||r&&n[Ag]==="none"&&l+u>i)?"vertical":"horizontal"},VI=function(t,e,n){var i=n?t.left:t.top,s=n?t.right:t.bottom,r=n?t.width:t.height,o=n?e.left:e.top,a=n?e.right:e.bottom,l=n?e.width:e.height;return i===o||s===a||i+r/2===o+l/2},HI=function(t,e){var n;return _l.some(function(i){var s=i[_n].options.emptyInsertThreshold;if(!(!s||Vh(i))){var r=bt(i),o=t>=r.left-s&&t<=r.right+s,a=e>=r.top-s&&e<=r.bottom+s;if(o&&a)return n=i}}),n},ev=function(t){function e(s,r){return function(o,a,l,u){var c=o.options.group.name&&a.options.group.name&&o.options.group.name===a.options.group.name;if(s==null&&(r||c))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return e(s(o,a,l,u),r)(o,a,l,u);var h=(r?o:a).options.group.name;return s===!0||typeof s=="string"&&s===h||s.join&&s.indexOf(h)>-1}}var n={},i=t.group;(!i||Ga(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},tv=function(){!Jm&&Fe&&Pe(Fe,"display","none")},nv=function(){!Jm&&Fe&&Pe(Fe,"display","")};ic&&!jm&&document.addEventListener("click",function(t){if(pl)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),pl=!1,!1},!0);var gs=function(t){if(_e){t=t.touches?t.touches[0]:t;var e=HI(t.clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[_n]._onDragOver(n)}}},qI=function(t){_e&&_e.parentNode[_n]._isOutsideThisEl(t.target)};function Oe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ti({},e),t[_n]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qm(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,o){r.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Oe.supportPointer!==!1&&"PointerEvent"in window&&!uo,emptyInsertThreshold:5};na.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);ev(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:XI,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Qe(t,"pointerdown",this._onTapStart):(Qe(t,"mousedown",this._onTapStart),Qe(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Qe(t,"dragover",this),Qe(t,"dragenter",this)),_l.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ti(this,BI())}Oe.prototype={constructor:Oe,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Hs=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,_e):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,s=i.preventOnFilter,r=t.type,o=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,a=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,u=i.filter;if(s2(n),!_e&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||i.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&uo&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Dn(a,i.draggable,n,!1),!(a&&a.animated)&&za!==a)){if(rr=xn(a),fo=xn(a,i.draggable),typeof u=="function"){if(u.call(this,t,a,this)){Vt({sortable:e,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),Zt("filter",e,{evt:t}),s&&t.cancelable&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(c){if(c=Dn(l,c.trim(),n,!1),c)return Vt({sortable:e,rootEl:c,name:"filter",targetEl:a,fromEl:n,toEl:n}),Zt("filter",e,{evt:t}),!0}),u)){s&&t.cancelable&&t.preventDefault();return}i.handle&&!Dn(l,i.handle,n,!1)||this._prepareDragStart(t,o,a)}}},_prepareDragStart:function(t,e,n){var i=this,s=i.el,r=i.options,o=s.ownerDocument,a;if(n&&!_e&&n.parentNode===s){var l=bt(n);if(ut=s,_e=n,gt=_e.parentNode,_s=_e.nextSibling,za=n,xa=r.group,Oe.dragged=_e,fs={target:_e,clientX:(e||t).clientX,clientY:(e||t).clientY},Tg=fs.clientX-l.left,Ig=fs.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,_e.style["will-change"]="all",a=function(){if(Zt("delayEnded",i,{evt:t}),Oe.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!xg&&i.nativeDraggable&&(_e.draggable=!0),i._triggerDragStart(t,e),Vt({sortable:i,name:"choose",originalEvent:t}),dn(_e,r.chosenClass,!0)},r.ignore.split(",").forEach(function(u){Xm(_e,u.trim(),jc)}),Qe(o,"dragover",gs),Qe(o,"mousemove",gs),Qe(o,"touchmove",gs),Qe(o,"mouseup",i._onDrop),Qe(o,"touchend",i._onDrop),Qe(o,"touchcancel",i._onDrop),xg&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_e.draggable=!0),Zt("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(ta||ki))){if(Oe.eventCanceled){this._onDrop();return}Qe(o,"mouseup",i._disableDelayedDrag),Qe(o,"touchend",i._disableDelayedDrag),Qe(o,"touchcancel",i._disableDelayedDrag),Qe(o,"mousemove",i._delayedDragTouchMoveHandler),Qe(o,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&Qe(o,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_e&&jc(_e),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Xe(t,"mouseup",this._disableDelayedDrag),Xe(t,"touchend",this._disableDelayedDrag),Xe(t,"touchcancel",this._disableDelayedDrag),Xe(t,"mousemove",this._delayedDragTouchMoveHandler),Xe(t,"touchmove",this._delayedDragTouchMoveHandler),Xe(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?Qe(document,"pointermove",this._onTouchMove):e?Qe(document,"touchmove",this._onTouchMove):Qe(document,"mousemove",this._onTouchMove):(Qe(_e,"dragend",this),Qe(ut,"dragstart",this._onDragStart));try{document.selection?Ba(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(tr=!1,ut&&_e){Zt("dragStarted",this,{evt:e}),this.nativeDraggable&&Qe(document,"dragover",qI);var n=this.options;!t&&dn(_e,n.dragClass,!1),dn(_e,n.ghostClass,!0),Oe.active=this,t&&this._appendGhost(),Vt({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ln){this._lastX=Ln.clientX,this._lastY=Ln.clientY,tv();for(var t=document.elementFromPoint(Ln.clientX,Ln.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ln.clientX,Ln.clientY),t!==e);)e=t;if(_e.parentNode[_n]._isOutsideThisEl(t),e)do{if(e[_n]){var n=void 0;if(n=e[_n]._onDragOver({clientX:Ln.clientX,clientY:Ln.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);nv()}},_onTouchMove:function(t){if(fs){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,s=t.touches?t.touches[0]:t,r=Fe&&gr(Fe,!0),o=Fe&&r&&r.a,a=Fe&&r&&r.d,l=Sa&&Gt&&Rg(Gt),u=(s.clientX-fs.clientX+i.x)/(o||1)+(l?l[0]-Kc[0]:0)/(o||1),c=(s.clientY-fs.clientY+i.y)/(a||1)+(l?l[1]-Kc[1]:0)/(a||1);if(!Oe.active&&!tr){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Fe){r?(r.e+=u-(Bc||0),r.f+=c-(Uc||0)):r={a:1,b:0,c:0,d:1,e:u,f:c};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Pe(Fe,"webkitTransform",h),Pe(Fe,"mozTransform",h),Pe(Fe,"msTransform",h),Pe(Fe,"transform",h),Bc=u,Uc=c,Ln=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Fe){var t=this.options.fallbackOnBody?document.body:ut,e=bt(_e,!0,Sa,!0,t),n=this.options;if(Sa){for(Gt=t;Pe(Gt,"position")==="static"&&Pe(Gt,"transform")==="none"&&Gt!==document;)Gt=Gt.parentNode;Gt!==document.body&&Gt!==document.documentElement?(Gt===document&&(Gt=si()),e.top+=Gt.scrollTop,e.left+=Gt.scrollLeft):Gt=si(),Kc=Rg(Gt)}Fe=_e.cloneNode(!0),dn(Fe,n.ghostClass,!1),dn(Fe,n.fallbackClass,!0),dn(Fe,n.dragClass,!0),Pe(Fe,"transition",""),Pe(Fe,"transform",""),Pe(Fe,"box-sizing","border-box"),Pe(Fe,"margin",0),Pe(Fe,"top",e.top),Pe(Fe,"left",e.left),Pe(Fe,"width",e.width),Pe(Fe,"height",e.height),Pe(Fe,"opacity","0.8"),Pe(Fe,"position",Sa?"absolute":"fixed"),Pe(Fe,"zIndex","100000"),Pe(Fe,"pointerEvents","none"),Oe.ghost=Fe,t.appendChild(Fe),Pe(Fe,"transform-origin",Tg/parseInt(Fe.style.width)*100+"% "+Ig/parseInt(Fe.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,s=n.options;if(Zt("dragStart",this,{evt:t}),Oe.eventCanceled){this._onDrop();return}Zt("setupClone",this),Oe.eventCanceled||(dt=qm(_e),dt.removeAttribute("id"),dt.draggable=!1,dt.style["will-change"]="",this._hideClone(),dn(dt,this.options.chosenClass,!1),Oe.clone=dt),n.cloneId=Ba(function(){Zt("clone",n),!Oe.eventCanceled&&(n.options.removeCloneOnHide||ut.insertBefore(dt,_e),n._hideClone(),Vt({sortable:n,name:"clone"}))}),!e&&dn(_e,s.dragClass,!0),e?(pl=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Xe(document,"mouseup",n._onDrop),Xe(document,"touchend",n._onDrop),Xe(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(n,i,_e)),Qe(document,"drop",n),Pe(_e,"transform","translateZ(0)")),tr=!0,n._dragStartId=Ba(n._dragStarted.bind(n,e,t)),Qe(document,"selectstart",n),Qr=!0,uo&&Pe(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,i,s,r,o=this.options,a=o.group,l=Oe.active,u=xa===a,c=o.sort,h=kt||l,d,f=this,g=!1;if(Ou)return;function p(J,le){Zt(J,f,oi({evt:t,isOwner:u,axis:d?"vertical":"horizontal",revert:r,dragRect:i,targetRect:s,canSort:c,fromSortable:h,target:n,completed:w,onMove:function(ye,oe){return Ra(ut,e,_e,i,ye,bt(ye),t,oe)},changed:v},le))}function m(){p("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function w(J){return p("dragOverCompleted",{insertion:J}),J&&(u?l._hideClone():l._showClone(f),f!==h&&(dn(_e,kt?kt.options.ghostClass:l.options.ghostClass,!1),dn(_e,o.ghostClass,!0)),kt!==f&&f!==Oe.active?kt=f:f===Oe.active&&kt&&(kt=null),h===f&&(f._ignoreWhileAnimating=n),f.animateAll(function(){p("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===_e&&!_e.animated||n===e&&!n.animated)&&(Hs=null),!o.dragoverBubble&&!t.rootEl&&n!==document&&(_e.parentNode[_n]._isOutsideThisEl(t.target),!J&&gs(t)),!o.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function v(){fn=xn(_e),Yi=xn(_e,o.draggable),Vt({sortable:f,name:"change",toEl:e,newIndex:fn,newDraggableIndex:Yi,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=Dn(n,o.draggable,e,!0),p("dragOver"),Oe.eventCanceled)return g;if(_e.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||f._ignoreWhileAnimating===n)return w(!1);if(pl=!1,l&&!o.disabled&&(u?c||(r=gt!==ut):kt===this||(this.lastPutMode=xa.checkPull(this,l,_e,t))&&a.checkPut(this,l,_e,t))){if(d=this._getDirection(t,n)==="vertical",i=bt(_e),p("dragOverValid"),Oe.eventCanceled)return g;if(r)return gt=ut,m(),this._hideClone(),p("revert"),Oe.eventCanceled||(_s?ut.insertBefore(_e,_s):ut.appendChild(_e)),w(!0);var y=Vh(e,o.draggable);if(!y||e2(t,d,this)&&!y.animated){if(y===_e)return w(!1);if(y&&e===t.target&&(n=y),n&&(s=bt(n)),Ra(ut,e,_e,i,n,s,t,!!n)!==!1)return m(),y&&y.nextSibling?e.insertBefore(_e,y.nextSibling):e.appendChild(_e),gt=e,v(),w(!0)}else if(y&&QI(t,d,this)){var E=Rr(e,0,o,!0);if(E===_e)return w(!1);if(n=E,s=bt(n),Ra(ut,e,_e,i,n,s,t,!1)!==!1)return m(),e.insertBefore(_e,E),gt=e,v(),w(!0)}else if(n.parentNode===e){s=bt(n);var b=0,I,A=_e.parentNode!==e,O=!VI(_e.animated&&_e.toRect||i,n.animated&&n.toRect||s,d),D=d?"top":"left",re=Sg(n,"top","top")||Sg(_e,"top","top"),ee=re?re.scrollTop:void 0;Hs!==n&&(I=s[D],po=!1,Ca=!O&&o.invertSwap||A),b=t2(t,n,s,d,O?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Ca,Hs===n);var Q;if(b!==0){var ae=xn(_e);do ae-=b,Q=gt.children[ae];while(Q&&(Pe(Q,"display")==="none"||Q===Fe))}if(b===0||Q===n)return w(!1);Hs=n,go=b;var Y=n.nextElementSibling,H=!1;H=b===1;var F=Ra(ut,e,_e,i,n,s,t,H);if(F!==!1)return(F===1||F===-1)&&(H=F===1),Ou=!0,setTimeout(JI,30),m(),H&&!Y?e.appendChild(_e):n.parentNode.insertBefore(_e,H?Y:n),re&&Hm(re,0,ee-re.scrollTop),gt=_e.parentNode,I!==void 0&&!Ca&&(Wa=Math.abs(I-bt(n)[D])),v(),w(!0)}if(e.contains(_e))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Xe(document,"mousemove",this._onTouchMove),Xe(document,"touchmove",this._onTouchMove),Xe(document,"pointermove",this._onTouchMove),Xe(document,"dragover",gs),Xe(document,"mousemove",gs),Xe(document,"touchmove",gs)},_offUpEvents:function(){var t=this.el.ownerDocument;Xe(t,"mouseup",this._onDrop),Xe(t,"touchend",this._onDrop),Xe(t,"pointerup",this._onDrop),Xe(t,"touchcancel",this._onDrop),Xe(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(fn=xn(_e),Yi=xn(_e,n.draggable),Zt("drop",this,{evt:t}),gt=_e&&_e.parentNode,fn=xn(_e),Yi=xn(_e,n.draggable),Oe.eventCanceled){this._nulling();return}tr=!1,Ca=!1,po=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ku(this.cloneId),ku(this._dragStartId),this.nativeDraggable&&(Xe(document,"drop",this),Xe(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),uo&&Pe(document.body,"user-select",""),Pe(_e,"transform",""),t&&(Qr&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Fe&&Fe.parentNode&&Fe.parentNode.removeChild(Fe),(ut===gt||kt&&kt.lastPutMode!=="clone")&&dt&&dt.parentNode&&dt.parentNode.removeChild(dt),_e&&(this.nativeDraggable&&Xe(_e,"dragend",this),jc(_e),_e.style["will-change"]="",Qr&&!tr&&dn(_e,kt?kt.options.ghostClass:this.options.ghostClass,!1),dn(_e,this.options.chosenClass,!1),Vt({sortable:this,name:"unchoose",toEl:gt,newIndex:null,newDraggableIndex:null,originalEvent:t}),ut!==gt?(fn>=0&&(Vt({rootEl:gt,name:"add",toEl:gt,fromEl:ut,originalEvent:t}),Vt({sortable:this,name:"remove",toEl:gt,originalEvent:t}),Vt({rootEl:gt,name:"sort",toEl:gt,fromEl:ut,originalEvent:t}),Vt({sortable:this,name:"sort",toEl:gt,originalEvent:t})),kt&&kt.save()):fn!==rr&&fn>=0&&(Vt({sortable:this,name:"update",toEl:gt,originalEvent:t}),Vt({sortable:this,name:"sort",toEl:gt,originalEvent:t})),Oe.active&&((fn==null||fn===-1)&&(fn=rr,Yi=fo),Vt({sortable:this,name:"end",toEl:gt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Zt("nulling",this),ut=_e=gt=Fe=_s=dt=za=Vi=fs=Ln=Qr=fn=Yi=rr=fo=Hs=go=kt=xa=Oe.dragged=Oe.ghost=Oe.clone=Oe.active=null,ml.forEach(function(t){t.checked=!0}),ml.length=Bc=Uc=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":_e&&(this._onDragOver(t),ZI(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,i=0,s=n.length,r=this.options;i<s;i++)e=n[i],Dn(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||i2(e));return t},sort:function(t,e){var n={},i=this.el;this.toArray().forEach(function(s,r){var o=i.children[r];Dn(o,this.options.draggable,i,!1)&&(n[s]=o)},this),e&&this.captureAnimationState(),t.forEach(function(s){n[s]&&(i.removeChild(n[s]),i.appendChild(n[s]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Dn(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var i=na.modifyOption(this,t,e);typeof i<"u"?n[t]=i:n[t]=e,t==="group"&&ev(n)},destroy:function(){Zt("destroy",this);var t=this.el;t[_n]=null,Xe(t,"mousedown",this._onTapStart),Xe(t,"touchstart",this._onTapStart),Xe(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Xe(t,"dragover",this),Xe(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_l.splice(_l.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Vi){if(Zt("hideClone",this),Oe.eventCanceled)return;Pe(dt,"display","none"),this.options.removeCloneOnHide&&dt.parentNode&&dt.parentNode.removeChild(dt),Vi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Vi){if(Zt("showClone",this),Oe.eventCanceled)return;_e.parentNode==ut&&!this.options.group.revertClone?ut.insertBefore(dt,_e):_s?ut.insertBefore(dt,_s):ut.appendChild(dt),this.options.group.revertClone&&this.animate(_e,dt),Pe(dt,"display",""),Vi=!1}}};function ZI(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ra(t,e,n,i,s,r,o,a){var l,u=t[_n],c=u.options.onMove,h;return window.CustomEvent&&!ki&&!ta?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=s||e,l.relatedRect=r||bt(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),c&&(h=c.call(u,l,o)),h}function jc(t){t.draggable=!1}function JI(){Ou=!1}function QI(t,e,n){var i=bt(Rr(n.el,0,n.options,!0)),s=Zm(n.el,n.options,Fe),r=10;return e?t.clientX<s.left-r||t.clientY<i.top&&t.clientX<i.right:t.clientY<s.top-r||t.clientY<i.bottom&&t.clientX<i.left}function e2(t,e,n){var i=bt(Vh(n.el,n.options.draggable)),s=Zm(n.el,n.options,Fe),r=10;return e?t.clientX>s.right+r||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>s.bottom+r||t.clientX>i.right&&t.clientY>i.top}function t2(t,e,n,i,s,r,o,a){var l=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,h=i?n.bottom:n.right,d=!1;if(!o){if(a&&Wa<u*s){if(!po&&(go===1?l>c+u*r/2:l<h-u*r/2)&&(po=!0),po)d=!0;else if(go===1?l<c+Wa:l>h-Wa)return-go}else if(l>c+u*(1-s)/2&&l<h-u*(1-s)/2)return n2(e)}return d=d||o,d&&(l<c+u*r/2||l>h-u*r/2)?l>c+u/2?1:-1:0}function n2(t){return xn(_e)<xn(t)?1:-1}function i2(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function s2(t){ml.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&ml.push(i)}}function Ba(t){return setTimeout(t,0)}function ku(t){return clearTimeout(t)}ic&&Qe(document,"touchmove",function(t){(Oe.active||tr)&&t.cancelable&&t.preventDefault()});Oe.utils={on:Qe,off:Xe,css:Pe,find:Xm,is:function(t,e){return!!Dn(t,e,t,!1)},extend:zI,throttle:Vm,closest:Dn,toggleClass:dn,clone:qm,index:xn,nextTick:Ba,cancelNextTick:ku,detectDirection:Qm,getChild:Rr};Oe.get=function(t){return t[_n]};Oe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Oe.utils=oi(oi({},Oe.utils),i.utils)),na.mount(i)})};Oe.create=function(t,e){return new Oe(t,e)};Oe.version=NI;var yt=[],eo,Lu,Mu=!1,Yc,Xc,vl,to;function r2(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?Qe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Qe(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Qe(document,"touchmove",this._handleFallbackAutoScroll):Qe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Xe(document,"dragover",this._handleAutoScroll):(Xe(document,"pointermove",this._handleFallbackAutoScroll),Xe(document,"touchmove",this._handleFallbackAutoScroll),Xe(document,"mousemove",this._handleFallbackAutoScroll)),Pg(),Ua(),WI()},nulling:function(){vl=Lu=eo=Mu=to=Yc=Xc=null,yt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var i=this,s=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(s,r);if(vl=e,n||this.options.forceAutoScrollFallback||ta||ki||uo){Vc(e,this.options,o,n);var a=Zi(o,!0);Mu&&(!to||s!==Yc||r!==Xc)&&(to&&Pg(),to=setInterval(function(){var l=Zi(document.elementFromPoint(s,r),!0);l!==a&&(a=l,Ua()),Vc(e,i.options,l,n)},10),Yc=s,Xc=r)}else{if(!this.options.bubbleScroll||Zi(o,!0)===si()){Ua();return}Vc(e,this.options,Zi(o,!1),!1)}}},Ti(t,{pluginName:"scroll",initializeByDefault:!0})}function Ua(){yt.forEach(function(t){clearInterval(t.pid)}),yt=[]}function Pg(){clearInterval(to)}var Vc=Vm(function(t,e,n,i){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=si(),u=!1,c;Lu!==n&&(Lu=n,Ua(),eo=e.scroll,c=e.scrollFn,eo===!0&&(eo=Zi(n,!0)));var h=0,d=eo;do{var f=d,g=bt(f),p=g.top,m=g.bottom,w=g.left,v=g.right,y=g.width,E=g.height,b=void 0,I=void 0,A=f.scrollWidth,O=f.scrollHeight,D=Pe(f),re=f.scrollLeft,ee=f.scrollTop;f===l?(b=y<A&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),I=E<O&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(b=y<A&&(D.overflowX==="auto"||D.overflowX==="scroll"),I=E<O&&(D.overflowY==="auto"||D.overflowY==="scroll"));var Q=b&&(Math.abs(v-s)<=o&&re+y<A)-(Math.abs(w-s)<=o&&!!re),ae=I&&(Math.abs(m-r)<=o&&ee+E<O)-(Math.abs(p-r)<=o&&!!ee);if(!yt[h])for(var Y=0;Y<=h;Y++)yt[Y]||(yt[Y]={});(yt[h].vx!=Q||yt[h].vy!=ae||yt[h].el!==f)&&(yt[h].el=f,yt[h].vx=Q,yt[h].vy=ae,clearInterval(yt[h].pid),(Q!=0||ae!=0)&&(u=!0,yt[h].pid=setInterval((function(){i&&this.layer===0&&Oe.active._onTouchMove(vl);var H=yt[this.layer].vy?yt[this.layer].vy*a:0,F=yt[this.layer].vx?yt[this.layer].vx*a:0;typeof c=="function"&&c.call(Oe.dragged.parentNode[_n],F,H,t,vl,yt[this.layer].el)!=="continue"||Hm(yt[this.layer].el,F,H)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Zi(d,!1)));Mu=u}},30),iv=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,s=t.activeSortable,r=t.dispatchSortableEvent,o=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=n||s;o();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(u.clientX,u.clientY);a(),l&&!l.el.contains(c)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Hh(){}Hh.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=Rr(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:iv};Ti(Hh,{pluginName:"revertOnSpill"});function qh(){}qh.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,i=n||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:iv};Ti(qh,{pluginName:"removeOnSpill"});Oe.mount(new r2);Oe.mount(qh,Hh);function o2(t){return t==null?t:JSON.parse(JSON.stringify(t))}function a2(t){eh()&&qu(t)}function l2(t){eh()?Hu(t):Cl(t)}let sv=null,rv=null;function Og(t=null,e=null){sv=t,rv=e}function c2(){return{data:sv,clonedData:rv}}const kg=Symbol("cloneElement");function u2(...t){var e,n;const i=(e=eh())==null?void 0:e.proxy,s=t[0];let[,r,o]=t;Array.isArray(L(r))||(o=r,r=null);let a=null;const{immediate:l=!0,clone:u=o2,customUpdate:c}=(n=L(o))!=null?n:{};function h(A){var O;const D=L((O=L(r))==null?void 0:O[A.oldIndex]),re=u(D);Og(D,re),A.item[kg]=re}function d(A){const O=A.item[kg];if(!RI(O)){if(Gc(A.item),Rt(r)){const D=[...L(r)];r.value=yg(D,A.newDraggableIndex,O);return}yg(L(r),A.newDraggableIndex,O)}}function f(A){const{from:O,item:D,oldIndex:re,oldDraggableIndex:ee,pullMode:Q,clone:ae}=A;if(bg(O,D,re),Q==="clone"){Gc(ae);return}if(Rt(r)){const Y=[...L(r)];r.value=vg(Y,ee);return}vg(L(r),ee)}function g(A){if(c){c(A);return}const{from:O,item:D,oldIndex:re,newIndex:ee}=A;if(Gc(D),bg(O,D,re),Rt(r)){const Q=[...L(r)];r.value=mg(Q,re,ee);return}mg(L(r),re,ee)}function p(){Cl(()=>{Og()})}const m={onUpdate:g,onStart:h,onAdd:d,onRemove:f,onEnd:p};function w(A){const O=L(s);return A||(A=TI(O)?II(O,i==null?void 0:i.$el):O),A&&!OI(A)&&(A=A.$el),A||xI("Root element not found"),A}function v(){var A;const O=(A=L(o))!=null?A:{},D=Bm(O,["immediate","clone"]);return Eg(D,(re,ee)=>{kI(re)&&(D[re]=(Q,...ae)=>{const Y=c2();return LI(Q,Y),ee(Q,...ae)})}),PI(r===null?{}:m,D)}const y=A=>{A=w(A),a&&E.destroy(),a=new Oe(A,v())};ii(()=>o,()=>{a&&Eg(v(),(A,O)=>{a==null||a.option(A,O)})},{deep:!0});const E={option:(A,O)=>a==null?void 0:a.option(A,O),destroy:()=>{a==null||a.destroy(),a=null},save:()=>a==null?void 0:a.save(),toArray:()=>a==null?void 0:a.toArray(),closest:(...A)=>a==null?void 0:a.closest(...A)},b=()=>E==null?void 0:E.option("disabled",!0),I=()=>E==null?void 0:E.option("disabled",!1);return l2(()=>{l&&y()}),a2(E.destroy),sr({start:y,pause:b,resume:I},E)}const Du=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],h2=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Du.map(t=>`on${t.replace(/^\S/,e=>e.toUpperCase())}`)],ss=Le({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:h2,emits:["update:modelValue",...Du],setup(t,{slots:e,emit:n,expose:i,attrs:s}){const r=Du.reduce((c,h)=>{const d=`on${h.replace(/^\S/,f=>f.toUpperCase())}`;return c[d]=(...f)=>n(h,...f),c},{}),o=pn(()=>{const c=ty(t),h=Bm(c,["modelValue"]),d=Object.entries(h).reduce((f,[g,p])=>{const m=L(p);return m!==void 0&&(f[g]=m),f},{});return sr(sr({},r),SI(sr(sr({},s),d)))}),a=pn({get:()=>t.modelValue,set:c=>n("update:modelValue",c)}),l=T(),u=Go(u2(t.target||l,a,o));return i(u),()=>{var c;return th(t.tag||"div",{ref:l},(c=e==null?void 0:e.default)==null?void 0:c.call(e,u))}}}),d2={key:0},f2=Le({__name:"FormError",props:{error:{type:Boolean},errorMessage:{}},setup(t){const e=t;return(n,i)=>n.error?(C(),S("span",d2,[(C(!0),S(Se,null,Ye(e.errorMessage,(s,r)=>(C(),S("span",{key:r},[_("span",null,X(s),1)]))),128))])):Ee("",!0)}}),Kt=Be(f2,[["__scopeId","data-v-fa73c3ef"]]),$s=t=>(At("data-v-db5643b9"),t=t(),Pt(),t),g2={key:0},p2={key:1},_2={key:2},m2={class:"post"},v2=$s(()=>_("span",{class:"Q"},"Q.",-1)),y2={class:"updated_at"},b2={class:"grid"},E2=["src"],w2=["src"],x2=["src"],C2=["src"],S2={class:"tree-info"},R2=$s(()=>_("span",null,"-",-1)),T2={key:4},I2={key:0,class:"choices"},A2={key:1,class:"blanks"},P2={class:"blanks-content"},O2={key:0,class:"blank"},k2={class:"answer"},L2={class:"text"},M2={key:1,class:"blank"},D2={class:"answer"},F2={class:"blanks-choices"},N2=$s(()=>_("span",{class:"label"},"選択肢",-1)),$2=$s(()=>_("li",null,"　",-1)),G2=[$2],z2=["src"],W2={class:"blanks-answer-column"},B2=$s(()=>_("span",{class:"label"},"回答欄",-1)),U2=$s(()=>_("li",null,"　",-1)),K2=[U2],j2=["disabled"],Y2={key:3,class:"answer_reset"},X2={key:5},V2={key:0,class:"choices ans-choices"},H2=$s(()=>_("span",{class:"correct-title"},"正解：",-1)),q2={key:1,class:"blanks ans-blanks"},Z2={class:"blanks-content"},J2={class:"answer"},Q2={class:"text"},eA={class:"answer"},tA=["src"],nA=["src"],iA={class:"myanswer-button btn"},sA={key:4},rA={key:0},oA=["src"],aA={key:1},lA={key:0},cA={class:"like-number"},uA=["src"],hA={key:1},dA=["src"],fA=Le({__name:"CreateAnswerList",props:{posts:{}},setup(t){const e=T(!0),n=T(!1),i=T(!0),s=T(!1),r=T(!1),o=T(!1),a=T(!1),l=mt.url,u=mt.client_domain,c=Ns(),h=Fs();let d=new Date(h);d.setDate(h.getDate()+180);const f=d.toGMTString(),g=T(un.default),p=T(ea.default);Ai();const m=t,w=T("");let v=T([]),y=T(""),E=T(""),b=T("");T("");let I=T(""),A=T(""),O=T("");const D=T("");let re=T(""),ee=T([]),Q=T(0),ae=T([]);const Y=T([]);let H=T([]);const F=T(!1);let J=T("");const le=T([]),ye=T(""),oe=T(0),ue=T(!0);let we="";const te=T([]),B=T(!1),xe=T([]),ve=T(!1);if(setTimeout(()=>{e.value&&(n.value=!0)},31e3),v=m.posts,e.value=!1,w.value=v.id,y=v.tree.image,E=v.tree.image_link,b=v.tree.tree_number,v.tree.name,I=v.tree.sub_number,A.value=v.attr,O=v.image,D.value=v.image_link,re=v.content,ee=v.choices,Q.value=v.correct_number,ae.value=v.content_group,Y.value=v.word_group,F.value=v.is_first_blank,le.value=v.likes,J=v.updated_at,console.log(le.value),A.value&&(A.value=="選択肢"&&(i.value=!0),A.value=="穴埋め")){i.value=!1,H.value=[...Y.value];let ne=!1,de=0;for(let x=0;x<H.value.length;x++)Array.isArray(H.value[x])&&(`${H.value[x]}`==`${H.value[x+1]}`?(H.value[x]=H.value[x][de],de++,ne=!0):(ne&&(H.value[x]=H.value[x][de]),de=0,ne=!1));console.log(H.value);for(let x=H.value.length-1;0<x;x--){let R=Math.floor(Math.random()*(x+1)),P=H.value[x];H.value[x]=H.value[R],H.value[R]=P}xe.value=[...H.value]}console.log(v);const M=async()=>{let ne=le.value;c&&(le.value.length==0?(le.value.push(c),ne=le.value):le.value.includes(c)?(le.value=le.value.filter(de=>de!==c),ne=le.value):(le.value.push(c),ne=le.value)),await De.put(`${l}/post/like/${w.value}`,{likes:ne}).then(de=>{console.log("いいね！")}).catch(de=>{console.error(de)})},G=()=>{xe.value=H.value,te.value=[]},k=()=>{s.value=!1,r.value=!1,o.value=!1,a.value=!1},W=async()=>{if(!ve.value){if(ve.value=!0,setTimeout(()=>{!s.value&&!B&&(r.value=!0,ve.value=!1)},35e3),c?we=c:await De.get(`${l}/user/create`).then(ne=>{we=ne.data.temporary_user,document.cookie=`temporary_user=${ne.data.temporary_user}; domain=${u}; path='/'; expires=${f}`}).catch(ne=>{console.error(ne),s.value=!0,o.value=!0,ve.value=!1}),ye.value)oe.value=Number(ye.value),oe.value==Q.value?ue.value=!0:ue.value=!1;else if(0<te.value.length){let ne=[...te.value],de=0,x="f",R=[];for(let P=0;P<Y.value.length;P++)if(Array.isArray(Y.value[P]))if(`${Y.value[P]}`==`${Y.value[P-1]}`?de++:(de=0,x="f"),x=="f"&&(x=P),!Y.value[P].includes(te.value[P]))ue.value=!1;else{let q=ne[x+Y.value[P].indexOf(te.value[P])];te.value[P]!=q&&(ne[x+Y.value[P].indexOf(te.value[P])]=te.value[P],te.value[P]==R[0]?(ne[x+R[1]]=q,R=[q,x+R[1]]):(ne[x+de]=q,R=[q,x+de]))}else de=0,x="f",Y.value[P]!=te.value[P]&&(ue.value=!1);te.value=ne}else{s.value=!0,a.value=!0,ve.value=!1;return}s.value||await De.post(`${l}/ans/create`,{ans_choice:oe.value,ans_word_group:te.value,post:w.value,temporary_user:we,is_correct:ue.value}).then(ne=>{console.log("投稿作成"),oe.value=0,B.value=!0}).catch(ne=>{console.error(ne),s.value=!0,o.value=!0,ve.value=!1})}};return(ne,de)=>{const x=Tn("router-link");return C(),S(Se,null,[N(It,{"is-error":r.value,"error-message":["タイムアウトしました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),N(It,{"is-error":o.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),e.value?(C(),S("div",g2,[N(Yn)])):n.value?(C(),S("div",p2,[N(ai)])):o.value?Ee("",!0):(C(),S("div",_2,[_("div",m2,[v2,_("span",y2,X(L(J)),1),_("span",b2,[D.value?(C(),S("img",{key:0,src:`${p.value}${D.value}`,loading:"lazy"},null,8,E2)):L(O)?(C(),S("img",{key:1,src:L(O),loading:"lazy"},null,8,w2)):L(E)?(C(),S("img",{key:2,src:L(E),loading:"lazy"},null,8,x2)):(C(),S("img",{key:3,src:L(y),loading:"lazy"},null,8,C2)),_("span",S2,[_("span",null,"No. "+X(L(b)),1),R2,_("span",null,X(L(I)),1)]),B.value?(C(),S("div",X2,[i.value?(C(),S("div",V2,[_("div",null,X(L(re)),1),_("div",null,[H2,Ie(X(L(ee)[L(Q)]),1)])])):(C(),S("div",q2,[_("div",Z2,[(C(!0),S(Se,null,Ye(L(ae),(R,P)=>(C(),S("span",{key:P},[F.value&&P!=L(ae).length?(C(),S("span",{key:0,class:nt(te.value[P]==Y.value[P]?"ans-blank":"blank")},[Ie(" ("),_("span",J2,X(Y.value[P]||""),1),Ie(") ")],2)):Ee("",!0),_("span",Q2,X(R),1),!F.value&&P!=L(ae).length-1?(C(),S("span",{key:1,class:nt(te.value[P]==Y.value[P]?"ans-blank":"blank")},[Ie(" ("),_("span",eA,X(Y.value[P]||""),1),Ie(") ")],2)):Ee("",!0)]))),128))])])),ue.value?(C(),S("img",{key:2,src:`${g.value}circle-regular.svg`,class:"correct-mark"},null,8,tA)):Ee("",!0),ue.value?Ee("",!0):(C(),S("img",{key:3,src:`${g.value}xmark-solid.svg`,class:"incorrect-mark"},null,8,nA)),N(x,{to:{name:"myanswer",params:{userPK:L(we)}}},{default:at(()=>[_("button",iA,[N(qt,{text:"回答一覧へ"})])]),_:1},8,["to"]),L(c)?(C(),S("span",sA,[le.value.length==0?(C(),S("span",rA,[_("img",{class:"like not-like",onClick:M,src:`${g.value}heart-regular.svg`},null,8,oA)])):(C(),S("span",aA,[le.value.includes(L(c))?(C(),S("span",lA,[_("span",cA,X(le.value.length),1),_("img",{onClick:M,class:"like is-like",src:`${g.value}heart-solid.svg`},null,8,uA)])):(C(),S("span",hA,[_("img",{onClick:M,class:"like not-like",src:`${g.value}heart-regular.svg`},null,8,dA)]))]))])):Ee("",!0)])):(C(),S("div",T2,[_("form",{onSubmit:Tr(W,["prevent"])},[i.value?(C(),S("div",I2,[_("span",null,X(L(re)),1),_("ul",null,[_("li",null,[Ze(_("input",{"onUpdate:modelValue":de[0]||(de[0]=R=>ye.value=R),type:"radio",name:"ans",value:"0"},null,512),[[wt,ye.value]]),Ie(X(L(ee)[0]),1)]),_("li",null,[Ze(_("input",{"onUpdate:modelValue":de[1]||(de[1]=R=>ye.value=R),type:"radio",name:"ans",value:"1"},null,512),[[wt,ye.value]]),Ie(X(L(ee)[1]),1)]),_("li",null,[L(ee)[2]?Ze((C(),S("input",{key:0,"onUpdate:modelValue":de[2]||(de[2]=R=>ye.value=R),type:"radio",name:"ans",value:"2"},null,512)),[[wt,ye.value]]):Ee("",!0),Ie(X(L(ee)[2]),1)]),_("li",null,[L(ee)[3]?Ze((C(),S("input",{key:0,"onUpdate:modelValue":de[3]||(de[3]=R=>ye.value=R),type:"radio",name:"ans",value:"3"},null,512)),[[wt,ye.value]]):Ee("",!0),Ie(X(L(ee)[3]),1)])])])):(C(),S("div",A2,[_("div",P2,[(C(!0),S(Se,null,Ye(L(ae),(R,P)=>(C(),S("span",{key:P},[F.value&&P!=L(ae).length?(C(),S("span",O2,[Ie(" ("),_("span",k2,X(te.value[P]||""),1),Ie(") ")])):Ee("",!0),_("span",L2,X(R),1),!F.value&&P!=L(ae).length-1?(C(),S("span",M2,[Ie(" ("),_("span",D2,X(te.value[P]||""),1),Ie(") ")])):Ee("",!0)]))),128))]),_("div",F2,[N2,_("ul",null,[N(L(ss),{group:"BLANKS",modelValue:xe.value,"onUpdate:modelValue":de[4]||(de[4]=R=>xe.value=R),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(xe.value,(R,P)=>(C(),S("span",{key:P},[_("li",null,X(R),1)]))),128)),(C(!0),S(Se,null,Ye(te.value.length,R=>(C(),S("span",{key:R},G2))),128))]),_:1},8,["modelValue"])])]),_("img",{class:"right-circle",src:`${g.value}circle-right-solid.svg`},null,8,z2),_("div",W2,[B2,_("ol",null,[N(L(ss),{group:"BLANKS",modelValue:te.value,"onUpdate:modelValue":de[5]||(de[5]=R=>te.value=R),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(te.value,(R,P)=>(C(),S("span",{key:P},[_("li",null,X(R),1)]))),128)),(C(!0),S(Se,null,Ye(xe.value.length,R=>(C(),S("span",{key:R},K2))),128))]),_:1},8,["modelValue"])])])])),N(Kt,{error:a.value,"error-message":["回答を入力してください。"]},null,8,["error"]),ve.value?Ee("",!0):(C(),S("button",{key:2,onClick:k,disabled:ve.value,type:"submit",class:"btn"},[N(qt,{text:"回答する"})],8,j2)),!i.value&&!ve.value?(C(),S("div",Y2,[_("button",{onClick:G,type:"button",class:"btn"},[N(qt,{text:"回答リセット"})])])):Ee("",!0)],32)]))])])]))],64)}}}),ov=Be(fA,[["__scopeId","data-v-db5643b9"]]),gA={key:0},pA={key:0},_A={key:1},mA={key:2},vA={key:3},yA={key:4},bA={class:"post"},EA=Le({__name:"GetTreePost",props:{treePK:{}},setup(t){let e=T([]),n=T([]),i=T([]),s=T([]);T(!1);const r=T(!0),o=T(!1),a=T(!1),l=T([!1]),u=mt.url;T(un.default);const c=t;console.log(c);let h=[];const d=["or","and","か","か、","と","と、","や","や、","とか","とか、","だとか","だとか、","だったり","だったり、","であったり","であったり、","または","または、","又は","又は、","かつ","かつ、","且つ","且つ、","および","および、","及び","及び、","ならびに","ならびに、","並びに","並びに、","もしくは","もしくは、","若しくは","若しくは、","かもしくは","かもしくは、","か若しくは","か若しくは、","ないし","ないし、","乃至","乃至、","ないしは","ないしは、","乃至は","乃至は、","ないしも","ないしも、","乃至も","乃至も、","あるいは","あるいは、","或いは","或いは、","かあるいは","かあるいは、","か或いは","か或いは、","か、あるいは","か、あるいは、","か、或いは","か、或いは、","あるいはまた","あるいはまた、","或いはまた","或いはまた、","あるいは、また","あるいは、また、","或いは、また","或いは、また、","とも","とも、","はたまた","はたまた、","将又","将又、","、","・",",","/"];return T(""),De.get(`${u}/post/tree/${c.treePK.treePK}`).then(f=>{if(e.value=f.data[0].posts,r.value=!1,!e.value.length){l.value[0]=!0,console.log(l.value[0]);return}h=f.data[0].answers;for(let g=0;g<e.value.length;g++){let p=[0,0,0,0],m=0,w=0,v=0;for(let y=0;y<h.length;y++)e.value[g].id==h[y].post&&(e.value[g].attr=="選択肢"?(m++,h[y].ans_choice==0&&p[0]++,h[y].ans_choice==1&&p[1]++,h[y].ans_choice==2&&p[2]++,h[y].ans_choice==3&&p[3]++):(v++,h[y].is_correct&&w++),console.log(p));i.value.push(Math.floor(w/v*100));for(let y=0;y<p.length;y++)m&&(p[y]=Math.floor(p[y]/m*100));console.log(p),n.value.push(p)}console.log(n.value);for(let g=0;g<e.value.length;g++){s.value.push([]);let p=0;if(e.value[g].attr=="穴埋め")for(let m=0;m<e.value[g].word_group.length;m++)console.log(e.value[g].word_group[m]),console.log(e.value[g].word_group[m+1]),!e.value[g].is_first_blank&&d.includes(e.value[g].content_group[m])||d.includes(e.value[g].content_group[m+1])||e.value[g].is_first_blank&&d.includes(e.value[g].content_group[m-1])||d.includes(e.value[g].content_group[m])?(p!=null&&s.value[g].push(p),p++,`${e.value[g].word_group[m]}`!=`${e.value[g].word_group[m+1]}`&&(p=0)):(p=0,s.value[g].push(""))}console.log(s)}).catch(f=>{r.value=!1,a.value=!0,console.error(f)}),setTimeout(()=>{r.value&&(o.value=!0)},31e3),(f,g)=>(C(),S(Se,null,[N(Nt),l.value[0]?Ee("",!0):(C(),S("h2",gA," 樹木"+X(L(e)[0].tree.tree_number)+"の投稿 ",1)),_("div",null,[r.value?(C(),S("div",pA,[N(Yn)])):o.value?(C(),S("div",_A,[N(ai)])):a.value?(C(),S("div",mA,[N(It,{"is-error":a.value,"error-message":["不明なエラーが発生しました。","時間を空けてから再度お試しください。"]},null,8,["is-error"])])):l.value[0]?(C(),S("div",vA,[N(nc,{"image-path-s-v-g":"pagelines-brands-solid",text:"この木の投稿がありません。","button-path":"treeList","button-text":"投稿する"})])):(C(),S("div",yA,[_("div",bA,[(C(!0),S(Se,null,Ye(L(e),(p,m)=>(C(),S("div",{key:p.id},[N(ov,{posts:p},null,8,["posts"])]))),128))])]))])],64))}}),wA=Be(EA,[["__scopeId","data-v-d4af6517"]]),Zh=t=>(At("data-v-ec438c04"),t=t(),Pt(),t),xA=Zh(()=>_("h2",null,"樹木ウォッチングリスト",-1)),CA={key:0},SA={key:1},RA={key:2},TA={class:"tree-list"},IA={class:"tree-image"},AA=["src"],PA=["src"],OA={class:"tree-text"},kA={class:"tree-name"},LA=Zh(()=>_("span",null,"コ",-1)),MA={key:0},DA=Zh(()=>_("span",null,"樹木が登録されていません。",-1)),FA=[DA],NA=Le({__name:"TreeList",setup(t){let e=T([]),n=T([]),i=T([]),s=T(!0);const r=T(!1),o=T(!1),a=mt.url;return De.get(`${a}/home`).then(l=>{e.value=l.data[0].trees,n.value=l.data[0].posts,s.value=!1,console.log(e.value);for(let u=0;u<e.value.length;u++){i.value.push(0);for(let c=0;c<n.value.length;c++)e.value[u].id==n.value[c].tree&&i.value[u]++;i.value[u]=String(i.value[u])}}).catch(l=>{console.error(l),s.value=!1,o.value=!0}),setTimeout(()=>{s.value&&(r.value=!0)},31e3),(l,u)=>{const c=Tn("router-link");return C(),S(Se,null,[N(Nt),xA,N(It,{"is-error":o.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),L(s)?(C(),S("div",CA,[N(Yn)])):!o.value&&r.value?(C(),S("div",SA,[N(ai)])):(C(),S("div",RA,[_("div",TA,[(C(!0),S(Se,null,Ye(L(e),(h,d)=>(C(),S("div",{key:h.id,class:"tree"},[N(c,{to:{name:"createPost",params:{treePK:`${h.id}`}}},{default:at(()=>[_("div",IA,[h.image_link?(C(),S("img",{key:0,src:h.image_link,loading:"lazy"},null,8,AA)):(C(),S("img",{key:1,src:h.image,loading:"lazy"},null,8,PA))]),_("div",OA,[_("span",null,"No. "+X(h.tree_number),1),_("span",null,[_("span",kA,X(h.name),1),_("span",null,"-"+X(h.sub_number),1)]),_("div",null,[N(Dm)]),_("span",null,[Ie("投稿数: "),_("span",null,X(L(i)[d]),1),LA])])]),_:2},1032,["to"])]))),128)),!o.value&&!L(e).length?(C(),S("div",MA,FA)):Ee("",!0)])]))],64)}}}),$A=Be(NA,[["__scopeId","data-v-ec438c04"]]),GA=Le({__name:"TreeListPage",setup(t){return(e,n)=>(C(),Pn($A))}}),Gs=t=>(At("data-v-0bc9d09c"),t=t(),Pt(),t),zA={class:"blanks"},WA={class:"blanks-content"},BA=Gs(()=>_("span",{class:"text"},"ソメイヨシノの多くは",-1)),UA={class:"blank"},KA={class:"answer"},jA=Gs(()=>_("span",{class:"text"},"なため",-1)),YA={class:"blank"},XA={class:"answer"},VA=Gs(()=>_("span",{class:"text"},"に関係します。",-1)),HA={class:"blanks-choices"},qA=Gs(()=>_("span",{class:"label"},"選択肢",-1)),ZA=Gs(()=>_("li",null,"　",-1)),JA=[ZA],QA=["src"],eP={class:"blanks-answer-column"},tP=Gs(()=>_("span",{class:"label"},"回答欄",-1)),nP=Gs(()=>_("li",null,"　",-1)),iP=[nP],sP=Le({__name:"BlankSample",setup(t){const e=T(un.default),n=T(["桜前線","クローン"]),i=T([]);return(s,r)=>(C(),S("div",zA,[_("div",WA,[BA,_("span",UA,[Ie(" ("),_("span",KA,X(i.value[0]||""),1),Ie(") ")]),jA,_("span",YA,[Ie(" ("),_("span",XA,X(i.value[1]||""),1),Ie(") ")]),VA]),_("div",HA,[qA,_("ul",null,[N(L(ss),{group:"BLANKS",modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=o=>n.value=o),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(n.value,(o,a)=>(C(),S("span",{key:a},[_("li",null,X(o),1)]))),128)),(C(!0),S(Se,null,Ye(i.value.length,o=>(C(),S("span",{key:o},JA))),128))]),_:1},8,["modelValue"])])]),_("img",{class:"right-circle",src:`${e.value}circle-right-solid.svg`},null,8,QA),_("div",eP,[tP,_("ol",null,[N(L(ss),{group:"BLANKS",modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=o=>i.value=o),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(i.value,(o,a)=>(C(),S("span",{key:a},[_("li",null,X(o),1)]))),128)),(C(!0),S(Se,null,Ye(n.value.length,o=>(C(),S("span",{key:o},iP))),128))]),_:1},8,["modelValue"])])])]))}}),av=Be(sP,[["__scopeId","data-v-0bc9d09c"]]),Jh=t=>(At("data-v-bd786864"),t=t(),Pt(),t),rP={key:0},oP={class:"select-attr"},aP=Jh(()=>_("span",null,"投稿形式を選択してね！",-1)),lP={class:"choice-button select-button"},cP=zo('<span data-v-bd786864>選択肢</span><div class="choice-sample" data-v-bd786864><span data-v-bd786864>こんな感じ！</span><div data-v-bd786864><span data-v-bd786864>桜前線に関係する木は？</span><ul data-v-bd786864><li data-v-bd786864><input type="radio" name="sample" data-v-bd786864><span data-v-bd786864>シダレザクラ</span></li><li data-v-bd786864><input type="radio" name="sample" data-v-bd786864><span data-v-bd786864>ソメイヨシノ</span></li><li data-v-bd786864><input type="radio" name="sample" data-v-bd786864><span data-v-bd786864>ヤマザクラ</span></li><li data-v-bd786864><input type="radio" name="sample" data-v-bd786864><span data-v-bd786864>ヤマザクラ</span></li></ul></div></div>',2),uP={class:"blank-button select-button"},hP=Jh(()=>_("span",null,"穴埋め",-1)),dP={class:"blank-sample"},fP=Jh(()=>_("span",null,"こんな感じ！",-1)),gP={key:1,class:"create-post"},pP={key:0,class:"choices"},_P={class:"choice-var"},mP={class:"choice-var"},vP={key:0,class:"choice-var"},yP={key:0},bP={key:1,class:"choice-var"},EP={key:1,class:"blanks"},wP=["src"],xP=Le({__name:"CreatePost",props:{treePK:{}},setup(t){const e=T("選択肢"),n=T(!0),i=T(null),s=T(""),r=[],o=T(""),a=T(""),l=T(!1),u=T(""),c=T(!1),h=T(""),d=T(0),f=T(!1),g=T(!1),p=T(!1),m=T(!1),w=T(!1),v=T(!1),y=T(!1);T(!1);const E=T(!1),b=T(!1),I=T(!1),A=T(!1),O=T(null),D=T(),re=T(""),ee=t,Q=Ai(),ae=mt.url,Y=mt.client_domain,H=Ns(),F=Fs();let J=new Date(F);J.setDate(F.getDate()+180);const le=J.toGMTString(),ye=un.default,oe=T(null),ue=T(!1),we=T(null);let te=[],B=[],xe=[];const ve=Z=>{Z.key==="Enter"&&Z.preventDefault()};ii(oe,()=>{oe.value&&oe.value.setAttribute("data-placeholder","問題をここに。")});const M=Z=>{Z.key==="Enter"&&(Z.preventDefault(),k());const z=oe.value.childNodes;1>=z.length&&z[0].textContent.length==1&&(Z.key==="Backspace"||Z.key==="Delete")&&Z.preventDefault()},G=()=>{const Z=oe.value.childNodes,z=Z[Z.length-1].className;z=="normal"&&(ue.value=!1),z=="secret"&&(ue.value=!0),re.value.textContent!=" "||2<=Z.length?oe.value.setAttribute("data-placeholder",""):oe.value.setAttribute("data-placeholder","問題をここに。")},k=()=>{var z;const Z=document.createElement("pre");Z.style.whiteSpace="pre-wrap",Z.style.display="inline",Z.style.fontFamily="inherit",Z.append(" "),ue.value?(Z.className="normal",Z.style.color="#000",ue.value=!1):(Z.className="secret",Z.style.color="#ff0000",ue.value=!0),(z=oe.value)==null||z.append(Z),W(Z)},W=Z=>{const z=document.createRange(),ce=window.getSelection();z.setStart(Z,1),z.collapse(!0),ce==null||ce.removeAllRanges(),ce==null||ce.addRange(z),Z.focus()},ne=()=>{l.value=!0},de=()=>{c.value=!0},x=()=>{l.value=!1},R=()=>{c.value=!1},P=Z=>{const z=Z.target;z.files&&z.files.length>0?i.value=z.files[0]:i.value=null,fe(Z)},q=()=>{g.value=!1,p.value=!1,m.value=!1,w.value=!1,v.value=!1},K=async()=>{if(!I.value){I.value=!0,setTimeout(()=>{I.value&&(p.value=!0,I.value=!1)},35e3);const Z=new FormData;if(ee.treePK.treePK){if(Z.append("tree",ee.treePK.treePK),H?Z.append("temporary_user",H):await De.get(`${ae}/user/create`).then(z=>{Z.append("temporary_user",z.data.temporary_user),document.cookie=`temporary_user=${z.data.temporary_user}; domain=${Y}; path='/'; expires=${le}`}).catch(z=>{g.value=!0,m.value=!0,I.value=!1}),i.value)if(i.value.size<=5242880)Z.append("image",i.value);else{g.value=!0,b.value=!0,I.value=!1;return}if(e.value){if(Z.append("attr",e.value),e.value=="選択肢"){const z=Number(d.value);let ce=[];const Ce=[];if(r.splice(0,4),s.value)Z.append("content",s.value);else{g.value=!0,w.value=!0,I.value=!1;return}for(let j=0;j<4;j++)z==j?ce.push(z):ce.push("");console.log(ce),r.push(o.value,a.value,u.value,h.value);for(let j=0;j<4;j++)r[j]?(console.log(r[j]),Ce.push(r[j])):(console.log("i: "+j),ce.splice(j,1,null));if(ce=ce.filter(j=>j!==null),console.log(ce),ce.includes(z))Z.append("correct_number",`${ce.indexOf(z)}`);else{g.value=!0,v.value=!0,I.value=!1;return}if(1>=Ce.length){g.value=!0,y.value=!0,I.value=!1;return}for(let j=0;j<5-Ce.length;j++)Ce.push("");Z.append("choices",JSON.stringify(Ce))}if(e.value=="穴埋め"){const z=se();if(console.log(f.value),console.log(z.word_group.length),console.log(2<=z.word_group.length),2<=z.word_group.length)Z.append("content_group",JSON.stringify(z.content_group)),Z.append("word_group",JSON.stringify(z.word_group)),Z.append("is_first_blank",`${f.value}`);else{g.value=!0,E.value=!0,I.value=!1;return}}}else{g.value=!0,m.value=!0,I.value=!1;return}if(!g.value)try{const z=await De.post(`${ae}/post/create`,Z,{headers:{"Content-Type":"multipart/form-data"}});console.log("投稿が作成されました"),s.value="",Q.push({name:"home"}),I.value=!1,A.value=!0}catch(z){console.error("投稿の作成に失敗しました:",z),g.value=!0,m.value=!0,I.value=!1}}else g.value=!0,m.value=!0}},se=()=>{if(te=[],B=[],oe.value){const j=oe.value.childNodes;console.log(j);let $=!1,pe="",Me="";for(let Re=0;Re<j.length;Re++){let Ue=j[Re].textContent;const Ct=j[Re].classList.value;Ct=="normal"&&(Ue.slice(0,1)==" "&&(Ue=Ue.slice(1)),Ue?($&&pe==Ct?te[te.length-1]+=Ue:te.push(Ue),$=!1,pe=Ct,Me||(Me="normal")):$=!0),Ct=="secret"&&(Ue.slice(0,1)==" "&&(Ue=Ue.slice(1)),Ue?($&&pe==Ct?B[B.length-1]+=Ue:B.push(Ue),$=!1,pe=Ct,Me||(Me="secret")):$=!0)}console.log(te),console.log(B),Me=="normal"&&(f.value=!1),Me=="secret"&&(f.value=!0),(!f.value&&te.length<=B.length||f.value&&te.length<B.length)&&te.push("。")}const Z=["or","and","か","か、","と","と、","や","や、","とか","とか、","だとか","だとか、","だったり","だったり、","であったり","であったり、","または","または、","又は","又は、","かつ","かつ、","且つ","且つ、","および","および、","及び","及び、","ならびに","ならびに、","並びに","並びに、","もしくは","もしくは、","若しくは","若しくは、","かもしくは","かもしくは、","か若しくは","か若しくは、","ないし","ないし、","乃至","乃至、","ないしは","ないしは、","乃至は","乃至は、","ないしも","ないしも、","乃至も","乃至も、","あるいは","あるいは、","或いは","或いは、","かあるいは","かあるいは、","か或いは","か或いは、","か、あるいは","か、あるいは、","か、或いは","か、或いは、","あるいはまた","あるいはまた、","或いはまた","或いはまた、","あるいは、また","あるいは、また、","或いは、また","或いは、また、","とも","とも、","はたまた","はたまた、","将又","将又、","、","・",",","/"];let z=!1,ce=-1,Ce=[];for(let j=0;j<te.length;j++)f.value?Z.includes(te[j])?z?Ce[ce].push(B[j+1]):(Ce.push([B[j],B[j+1]]),z=!0,ce++):z=!1:Z.includes(te[j])&&j!=0?z?Ce[ce].push(B[j]):(Ce.push([B[j-1],B[j]]),z=!0,ce++):z=!1;if(console.log(Ce),0<Ce.length){let j=0;for(let $=0;$<B.length;$++)console.log("sp"),console.log([j]),console.log(Ce[j]),Ce[j]&&Ce[j].includes(B[$])?(xe.push(Ce[j]),Ce[j][Ce[j].length-1]==B[$]&&j++):xe.push(B[$]);B=xe,console.log(B)}return{content_group:te,word_group:B}},ge=()=>{O.value&&O.value.click()},fe=Z=>{var Ce;const z=(Ce=Z.target)==null?void 0:Ce.files[0];if(!z)return;const ce=new FileReader;ce.onload=j=>{var $;D.value&&(D.value.src=($=j.target)==null?void 0:$.result)},ce.readAsDataURL(z)},he=T(!1),ie=Z=>{if(he.value=!0,history.pushState({isNext:!0},""),Z=="選択肢"){e.value="選択肢",n.value=!0;return}if(Z=="穴埋め"){e.value="穴埋め",n.value=!1;return}},me=()=>{Q.back(),he.value=!1};return window.onpopstate=Z=>{Z.state&&Z.state.isNext?he.value=!0:he.value=!1},(Z,z)=>(C(),S(Se,null,[N(Nt),he.value?(C(),S("div",gP,[_("button",{type:"button",onClick:me,class:"next-button btn"},[N(qt,{text:"< 戻る"})]),N(It,{"is-error":p.value,"error-message":["タイムアウトしました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),N(It,{"is-error":m.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),_("form",{onSubmit:Tr(K,["prevent"])},[n.value?(C(),S("div",pP,[Ze(_("textarea",{"onUpdate:modelValue":z[2]||(z[2]=ce=>s.value=ce),placeholder:"問題をここに。"},null,512),[[Cn,s.value]]),_("div",_P,[Ze(_("input",{"onUpdate:modelValue":z[3]||(z[3]=ce=>d.value=ce),type:"radio",name:"correct",value:"0",checked:""},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:ve,class:"choice",placeholder:"選択肢1","onUpdate:modelValue":z[4]||(z[4]=ce=>o.value=ce)},null,544),[[Cn,o.value]])]),_("div",mP,[Ze(_("input",{"onUpdate:modelValue":z[5]||(z[5]=ce=>d.value=ce),type:"radio",name:"correct",value:"1"},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:ve,class:"choice",placeholder:"選択肢2","onUpdate:modelValue":z[6]||(z[6]=ce=>a.value=ce)},null,544),[[Cn,a.value]]),l.value?Ee("",!0):(C(),S("button",{key:0,onClick:ne,type:"button",class:"pulse btn"},"+"))]),l.value?(C(),S("div",vP,[Ze(_("input",{"onUpdate:modelValue":z[7]||(z[7]=ce=>d.value=ce),type:"radio",name:"correct",value:"2"},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:ve,placeholder:"選択肢3","onUpdate:modelValue":z[8]||(z[8]=ce=>u.value=ce)},null,544),[[Cn,u.value]]),c.value?Ee("",!0):(C(),S("span",yP,[_("button",{onClick:de,type:"button",class:"pulse btn"},"+"),_("button",{onClick:x,type:"button",class:"minus btn"},"-")]))])):Ee("",!0),c.value?(C(),S("div",bP,[Ze(_("input",{"onUpdate:modelValue":z[9]||(z[9]=ce=>d.value=ce),type:"radio",name:"correct",value:"3"},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:ve,placeholder:"選択肢4","onUpdate:modelValue":z[10]||(z[10]=ce=>h.value=ce)},null,544),[[Cn,h.value]]),_("button",{onClick:R,type:"button",class:"minus btn"},"-")])):Ee("",!0)])):(C(),S("div",EP,[_("blockquote",{ref_key:"contentGroup",ref:oe,onInput:G,onKeydown:M,contentEditable:"true"},[_("pre",{ref_key:"firstNormal",ref:re,class:"normal",style:{color:"#000"}}," ",512)],544),ue.value?(C(),S("button",{key:0,onClick:k,type:"button",class:"add-button normal-button btn"},"問題文を追加")):(C(),S("button",{key:1,ref_key:"addButton",ref:we,onClick:k,type:"button",class:"add-button secret-button btn"},"穴を追加",512))])),N(Kt,{error:w.value,"error-message":["問題を入力してください。"]},null,8,["error"]),N(Kt,{error:v.value,"error-message":["正解の選択肢を入力してください。"]},null,8,["error"]),N(Kt,{error:y.value,"error-message":["選択肢を2つ以上入力してください。"]},null,8,["error"]),N(Kt,{error:E.value,"error-message":["穴を2つ以上作成してください。"]},null,8,["error"]),N(Kt,{error:b.value,"error-message":["画像の容量を5MB以下にしてください。"]},null,8,["error"]),_("input",{class:"image",type:"file",ref_key:"imageInput",ref:O,onChange:P,name:"file",accept:"image/jpeg, image/png, image/bmp"},null,544),_("button",{type:"button",class:"image-select btn",onClick:ge},[_("img",{src:`${L(ye)}square-plus-regular.svg`,class:"image-preview",ref_key:"imagePreview",ref:D},null,8,wP)]),_("button",{onClick:q,type:"submit",class:"btn"},[N(qt,{text:"投稿する"})])],32)])):(C(),S("div",rP,[_("div",oP,[aP,_("div",lP,[cP,_("button",{type:"button",onClick:z[0]||(z[0]=ce=>ie("選択肢")),class:"next-button btn"},[N(qt,{text:"こっちにする"})])]),_("div",uP,[hP,_("div",dP,[fP,N(av)]),_("button",{type:"button",onClick:z[1]||(z[1]=ce=>ie("穴埋め")),class:"next-button btn"},[N(qt,{text:"こっちにする"})])])])]))],64))}}),CP=Be(xP,[["__scopeId","data-v-bd786864"]]),SP=Le({__name:"CreatePostPage",props:{treePK:{}},setup(t){const e=t;return(n,i)=>(C(),Pn(CP,{treePK:e.treePK},null,8,["treePK"]))}}),Qh=t=>(At("data-v-6653b183"),t=t(),Pt(),t),RP={key:0},TP={class:"select-attr"},IP=Qh(()=>_("span",null,"投稿形式を選択してね！",-1)),AP={class:"choice-button select-button"},PP=zo('<span data-v-6653b183>選択肢</span><div class="choice-sample" data-v-6653b183><span data-v-6653b183>こんな感じ！</span><div data-v-6653b183><span data-v-6653b183>桜前線に関係する木は？</span><ul data-v-6653b183><li data-v-6653b183><input type="radio" name="sample" data-v-6653b183><span data-v-6653b183>シダレザクラ</span></li><li data-v-6653b183><input type="radio" name="sample" data-v-6653b183><span data-v-6653b183>ソメイヨシノ</span></li><li data-v-6653b183><input type="radio" name="sample" data-v-6653b183><span data-v-6653b183>ヤマザクラ</span></li><li data-v-6653b183><input type="radio" name="sample" data-v-6653b183><span data-v-6653b183>ヤマザクラ</span></li></ul></div></div>',2),OP={class:"blank-button select-button"},kP=Qh(()=>_("span",null,"穴埋め",-1)),LP={class:"blank-sample"},MP=Qh(()=>_("span",null,"こんな感じ！",-1)),DP={key:1,class:"create-post"},FP={key:0,class:"choices"},NP={class:"choice-var"},$P={class:"choice-var"},GP={key:0,class:"choice-var"},zP={key:0},WP={key:1,class:"choice-var"},BP={key:1,class:"blanks"},UP=["src"],KP=Le({__name:"UpdatePost",props:{postPK:{}},setup(t){const e=T("選択肢"),n=T(!0),i=T(null),s=T(""),r=[],o=T(""),a=T(""),l=T(!1),u=T(""),c=T(!1),h=T(""),d=T(0),f=T(!1),g=T(!1),p=T(!1),m=T(!1),w=T(!1),v=T(!1),y=T(!1);T(!1);const E=T(!1),b=T(!1),I=T(!1),A=T(!1),O=T(null),D=T(),re=T(""),ee=t,Q=Ai(),ae=mt.url,Y=mt.client_domain;let H=Ns();const F=Fs();let J=new Date(F);J.setDate(F.getDate()+180);const le=J.toGMTString(),ye=un.default,oe=T(null),ue=T(!1),we=T(null);let te=[],B=[],xe=[],ve=T([]);const M=["or","and","か","か、","と","と、","や","や、","とか","とか、","だとか","だとか、","だったり","だったり、","であったり","であったり、","または","または、","又は","又は、","かつ","かつ、","且つ","且つ、","および","および、","及び","及び、","ならびに","ならびに、","並びに","並びに、","もしくは","もしくは、","若しくは","若しくは、","かもしくは","かもしくは、","か若しくは","か若しくは、","ないし","ないし、","乃至","乃至、","ないしは","ないしは、","乃至は","乃至は、","ないしも","ないしも、","乃至も","乃至も、","あるいは","あるいは、","或いは","或いは、","かあるいは","かあるいは、","か或いは","か或いは、","か、あるいは","か、あるいは、","か、或いは","か、或いは、","あるいはまた","あるいはまた、","或いはまた","或いはまた、","あるいは、また","あるいは、また、","或いは、また","或いは、また、","とも","とも、","はたまた","はたまた、","将又","将又、","、","・",",","/"],G=j=>{j.key==="Enter"&&j.preventDefault()};history.pushState({isNext:!0},"");const k=T([]),W=T("");De.get(`${ae}/${ee.postPK.postPK}`).then(j=>{k.value=j.data,W.value=k.value.tree.id,H!=k.value.temporary_user&&Q.push({name:"404"}),k.value.attr=="選択肢"?(e.value="選択肢",n.value=!0):(e.value="穴埋め",n.value=!1),s.value=k.value.content,d.value=k.value.correct_number,k.value.choices&&(o.value=k.value.choices[0],a.value=k.value.choices[1],k.value.choices[2]&&(u.value=k.value.choices[2],l.value=!0),k.value.choices[3]&&(h.value=k.value.choices[3],c.value=!0)),ve.value.push([]);let $=0;if(k.value.word_group)for(let pe=0;pe<k.value.word_group.length;pe++)!k.value.is_first_blank&&M.includes(k.value.content_group[pe])||M.includes(k.value.content_group[pe+1])||k.value.is_first_blank&&M.includes(k.value.content_group[pe-1])||M.includes(k.value.content_group[pe])?($!=null&&ve.value.push($),$++,`${k.value.word_group[pe]}`!=`${k.value.word_group[pe+1]}`&&($=0)):($=0,ve.value.push(""))}).catch(j=>{console.error(j),m.value=!0}),ii(oe,()=>{if(oe.value){if(oe.value.setAttribute("data-placeholder","問題をここに。"),k.value.content_group)for(let $=0;$<k.value.content_group.length;$++)$==0&&!k.value.is_first_blank?(re.value.append(k.value.content_group[$]),k.value.word_group[$]&&(Array.isArray(k.value.word_group[$])?x(k.value.word_group[$][ve.value[$+1]]):x(k.value.word_group[$]))):(k.value.is_first_blank||x(k.value.content_group[$]),k.value.word_group[$]&&(Array.isArray(k.value.word_group[$])?x(k.value.word_group[$][ve.value[$+1]]):x(k.value.word_group[$])),k.value.is_first_blank&&x(k.value.content_group[$]));const j=oe.value.childNodes;re.value.textContent!=" "||2<=j.length?oe.value.setAttribute("data-placeholder",""):oe.value.setAttribute("data-placeholder","問題をここに。")}});const ne=j=>{j.key==="Enter"&&(j.preventDefault(),x(" "));const $=oe.value.childNodes;1>=$.length&&$[0].textContent.length==1&&(j.key==="Backspace"||j.key==="Delete")&&j.preventDefault()},de=()=>{const j=oe.value.childNodes,$=j[j.length-1].className;$=="normal"&&(ue.value=!1),$=="secret"&&(ue.value=!0),re.value.textContent!=" "||2<=j.length?oe.value.setAttribute("data-placeholder",""):oe.value.setAttribute("data-placeholder","問題をここに。")},x=j=>{var pe;console.log(j);const $=document.createElement("pre");$.style.whiteSpace="pre-wrap",$.style.display="inline",$.style.fontFamily="inherit",$.append(j),console.log($),ue.value?($.className="normal",$.style.color="#000",ue.value=!1):($.className="secret",$.style.color="#ff0000",ue.value=!0),(pe=oe.value)==null||pe.append($),R($)},R=j=>{const $=document.createRange(),pe=window.getSelection();$.setStart(j,1),$.collapse(!0),pe==null||pe.removeAllRanges(),pe==null||pe.addRange($),j.focus()},P=()=>{l.value=!0},q=()=>{c.value=!0},K=()=>{l.value=!1},se=()=>{c.value=!1},ge=j=>{const $=j.target;$.files&&$.files.length>0?i.value=$.files[0]:i.value=null,Z(j)},fe=()=>{g.value=!1,p.value=!1,m.value=!1,w.value=!1,v.value=!1},he=async()=>{if(!I.value){I.value=!0,setTimeout(()=>{I.value&&(p.value=!0,I.value=!1)},35e3);const j=new FormData;if(W.value){if(j.append("tree",W.value),H?j.append("temporary_user",H):await De.get(`${ae}/user/create`).then($=>{H=$.data.temporary_user,j.append("temporary_user",`${H}`),document.cookie=`temporary_user=${H}; domain=${Y}; path='/'; expires=${le}`}).catch($=>{g.value=!0,m.value=!0,I.value=!1}),i.value)if(i.value.size<=5242880)j.append("image",i.value);else{g.value=!0,b.value=!0,I.value=!1;return}if(e.value){if(j.append("attr",e.value),e.value=="選択肢"){const $=Number(d.value);let pe=[];const Me=[];if(r.splice(0,4),s.value)j.append("content",s.value);else{g.value=!0,w.value=!0,I.value=!1;return}for(let Re=0;Re<4;Re++)$==Re?pe.push($):pe.push("");console.log(pe),r.push(o.value,a.value,u.value,h.value);for(let Re=0;Re<4;Re++)r[Re]?(console.log(r[Re]),Me.push(r[Re])):(console.log("i: "+Re),pe.splice(Re,1,null));if(pe=pe.filter(Re=>Re!==null),console.log(pe),pe.includes($))j.append("correct_number",`${pe.indexOf($)}`);else{g.value=!0,v.value=!0,I.value=!1;return}if(1>=Me.length){g.value=!0,y.value=!0,I.value=!1;return}for(let Re=0;Re<5-Me.length;Re++)Me.push("");5<=Me.length&&Me.splice(4,1),j.append("choices",JSON.stringify(Me))}if(e.value=="穴埋め"){const $=ie();if(console.log(f.value),console.log($.word_group.length),console.log(2<=$.word_group.length),2<=$.word_group.length)j.append("content_group",JSON.stringify($.content_group)),j.append("word_group",JSON.stringify($.word_group)),j.append("is_first_blank",`${f.value}`);else{g.value=!0,E.value=!0,I.value=!1;return}}}else{g.value=!0,m.value=!0,I.value=!1;return}if(!g.value)try{const $=await De.put(`${ae}/post/update/${ee.postPK.postPK}/${H}`,j,{headers:{"Content-Type":"multipart/form-data"}});console.log("投稿が作成されました"),s.value="",Q.push({name:"home"}),I.value=!1,A.value=!0}catch($){g.value=!0,m.value=!0,I.value=!1,console.error("投稿の作成に失敗しました:",$),$.status==403&&Q.push({name:"404"})}}else g.value=!0,m.value=!0,I.value=!1}},ie=()=>{if(te=[],B=[],oe.value){const Re=oe.value.childNodes;console.log(Re);let Ue=!1,Ct="",On="";for(let vt=0;vt<Re.length;vt++){let ot=Re[vt].textContent;const hn=Re[vt].classList.value;hn=="normal"&&(ot.slice(0,1)==" "&&(ot=ot.slice(1)),ot?(Ue&&Ct==hn?te[te.length-1]+=ot:te.push(ot),Ue=!1,Ct=hn,On||(On="normal")):Ue=!0),hn=="secret"&&(ot.slice(0,1)==" "&&(ot=ot.slice(1)),ot?(Ue&&Ct==hn?B[B.length-1]+=ot:B.push(ot),Ue=!1,Ct=hn,On||(On="secret")):Ue=!0)}console.log(te),console.log(B),On=="normal"&&(f.value=!1),On=="secret"&&(f.value=!0),(!f.value&&te.length<=B.length||f.value&&te.length<B.length)&&te.push("。")}const j=["or","and","か","か、","と","と、","や","や、","とか","とか、","だとか","だとか、","だったり","だったり、","であったり","であったり、","または","または、","又は","又は、","かつ","かつ、","且つ","且つ、","および","および、","及び","及び、","ならびに","ならびに、","並びに","並びに、","もしくは","もしくは、","若しくは","若しくは、","かもしくは","かもしくは、","か若しくは","か若しくは、","ないし","ないし、","乃至","乃至、","ないしは","ないしは、","乃至は","乃至は、","ないしも","ないしも、","乃至も","乃至も、","あるいは","あるいは、","或いは","或いは、","かあるいは","かあるいは、","か或いは","か或いは、","か、あるいは","か、あるいは、","か、或いは","か、或いは、","あるいはまた","あるいはまた、","或いはまた","或いはまた、","あるいは、また","あるいは、また、","或いは、また","或いは、また、","とも","とも、","はたまた","はたまた、","将又","将又、","、","・",",","/"];let $=!1,pe=-1,Me=[];for(let Re=0;Re<te.length;Re++)f.value?j.includes(te[Re])?$?Me[pe].push(B[Re+1]):(Me.push([B[Re],B[Re+1]]),$=!0,pe++):$=!1:j.includes(te[Re])&&Re!=0?$?Me[pe].push(B[Re]):(Me.push([B[Re-1],B[Re]]),$=!0,pe++):$=!1;if(console.log(Me),0<Me.length){let Re=0;for(let Ue=0;Ue<B.length;Ue++)console.log("sp"),console.log([Re]),console.log(Me[Re]),Me[Re]&&Me[Re].includes(B[Ue])?(xe.push(Me[Re]),Me[Re][Me[Re].length-1]==B[Ue]&&Re++):xe.push(B[Ue]);B=xe,console.log(B)}return{content_group:te,word_group:B}},me=()=>{O.value&&O.value.click()},Z=j=>{var Me;const $=(Me=j.target)==null?void 0:Me.files[0];if(!$)return;const pe=new FileReader;pe.onload=Re=>{var Ue;D.value&&(D.value.src=(Ue=Re.target)==null?void 0:Ue.result)},pe.readAsDataURL($)},z=T(!0),ce=j=>{if(z.value=!0,history.pushState({isNext:!0},""),j=="選択肢"){e.value="選択肢",n.value=!0;return}if(j=="穴埋め"){e.value="穴埋め",n.value=!1;return}},Ce=()=>{z.value=!1};return window.onpopstate=j=>{j.state&&j.state.isNext?z.value=!0:z.value=!1},(j,$)=>(C(),S(Se,null,[N(Nt),z.value?(C(),S("div",DP,[_("button",{type:"button",onClick:Ce,class:"next-button btn"},[N(qt,{text:"< 戻る"})]),N(It,{"is-error":p.value,"error-message":["タイムアウトしました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),N(It,{"is-error":m.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),_("form",{onSubmit:Tr(he,["prevent"])},[n.value?(C(),S("div",FP,[Ze(_("textarea",{"onUpdate:modelValue":$[2]||($[2]=pe=>s.value=pe),placeholder:"問題をここに。"},null,512),[[Cn,s.value]]),_("div",NP,[Ze(_("input",{"onUpdate:modelValue":$[3]||($[3]=pe=>d.value=pe),type:"radio",name:"correct",value:"0",checked:""},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:G,class:"choice",placeholder:"選択肢1","onUpdate:modelValue":$[4]||($[4]=pe=>o.value=pe)},null,544),[[Cn,o.value]])]),_("div",$P,[Ze(_("input",{"onUpdate:modelValue":$[5]||($[5]=pe=>d.value=pe),type:"radio",name:"correct",value:"1"},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:G,class:"choice",placeholder:"選択肢2","onUpdate:modelValue":$[6]||($[6]=pe=>a.value=pe)},null,544),[[Cn,a.value]]),l.value?Ee("",!0):(C(),S("button",{key:0,onClick:P,type:"button",class:"pulse btn"},"+"))]),l.value?(C(),S("div",GP,[Ze(_("input",{"onUpdate:modelValue":$[7]||($[7]=pe=>d.value=pe),type:"radio",name:"correct",value:"2"},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:G,placeholder:"選択肢3","onUpdate:modelValue":$[8]||($[8]=pe=>u.value=pe)},null,544),[[Cn,u.value]]),c.value?Ee("",!0):(C(),S("span",zP,[_("button",{onClick:q,type:"button",class:"pulse btn"},"+"),_("button",{onClick:K,type:"button",class:"minus btn"},"-")]))])):Ee("",!0),c.value?(C(),S("div",WP,[Ze(_("input",{"onUpdate:modelValue":$[9]||($[9]=pe=>d.value=pe),type:"radio",name:"correct",value:"3"},null,512),[[wt,d.value]]),Ze(_("input",{onKeydown:G,placeholder:"選択肢4","onUpdate:modelValue":$[10]||($[10]=pe=>h.value=pe)},null,544),[[Cn,h.value]]),_("button",{onClick:se,type:"button",class:"minus btn"},"-")])):Ee("",!0)])):(C(),S("div",BP,[_("blockquote",{ref_key:"contentGroup",ref:oe,onInput:de,onKeydown:ne,contentEditable:"true"},[_("pre",{ref_key:"firstNormal",ref:re,class:"normal",style:{color:"#000"}}," ",512)],544),ue.value?(C(),S("button",{key:0,onClick:$[11]||($[11]=pe=>x(" ")),type:"button",class:"add-button normal-button btn"},"問題文を追加")):(C(),S("button",{key:1,ref_key:"addButton",ref:we,onClick:$[12]||($[12]=pe=>x(" ")),type:"button",class:"add-button secret-button btn"},"穴を追加",512))])),N(Kt,{error:w.value,"error-message":["問題を入力してください。"]},null,8,["error"]),N(Kt,{error:v.value,"error-message":["正解の選択肢を入力してください。"]},null,8,["error"]),N(Kt,{error:y.value,"error-message":["選択肢を2つ以上入力してください。"]},null,8,["error"]),N(Kt,{error:E.value,"error-message":["穴を2つ以上作成してください。"]},null,8,["error"]),N(Kt,{error:b.value,"error-message":["画像の容量を5MB以下にしてください。"]},null,8,["error"]),_("input",{class:"image",type:"file",ref_key:"imageInput",ref:O,onChange:ge,name:"file",accept:"image/jpeg, image/png, image/bmp"},null,544),_("button",{type:"button",class:"image-select btn",onClick:me},[_("img",{src:k.value.image?k.value.image:`${L(ye)}square-plus-regular.svg`,class:"image-preview",ref_key:"imagePreview",ref:D},null,8,UP)]),_("button",{onClick:fe,type:"submit",class:"btn"},[N(qt,{text:"編集する"})])],32)])):(C(),S("div",RP,[_("div",TP,[IP,_("div",AP,[PP,_("button",{type:"button",onClick:$[0]||($[0]=pe=>ce("選択肢")),class:"next-button btn"},[N(qt,{text:"こっちにする"})])]),_("div",OP,[kP,_("div",LP,[MP,N(av)]),_("button",{type:"button",onClick:$[1]||($[1]=pe=>ce("穴埋め")),class:"next-button btn"},[N(qt,{text:"こっちにする"})])])])]))],64))}}),jP=Be(KP,[["__scopeId","data-v-6653b183"]]),YP=Le({__name:"UpdatePostPage",props:{postPK:{}},setup(t){const e=t;return(n,i)=>(C(),Pn(jP,{postPK:e.postPK},null,8,["postPK"]))}}),kr=t=>(At("data-v-f00e9018"),t=t(),Pt(),t),XP={key:0},VP={key:1},HP={key:2},qP={class:"post"},ZP=kr(()=>_("span",{class:"Q"},"Q.",-1)),JP={class:"updated_at"},QP={class:"grid"},eO=["src"],tO=["src"],nO=["src"],iO=["src"],sO={class:"tree-info"},rO=kr(()=>_("span",null,"-",-1)),oO={key:0,class:"choices"},aO={key:1,class:"blanks"},lO={class:"blanks-content"},cO={key:0,class:"blank"},uO={class:"answer"},hO={class:"text"},dO={key:1,class:"blank"},fO={class:"answer"},gO={class:"blanks-choices"},pO=kr(()=>_("span",{class:"label"},"選択肢",-1)),_O=kr(()=>_("li",null,"　",-1)),mO=[_O],vO=["src"],yO={class:"blanks-answer-column"},bO=kr(()=>_("span",{class:"label"},"回答欄",-1)),EO=kr(()=>_("li",null,"　",-1)),wO=[EO],xO=Le({__name:"CreateAnswer",props:{postPK:{}},setup(t){const e=T(!0),n=T(!1),i=T(!0),s=T(!1),r=T(!1),o=T(!1),a=T(!1),l=mt.url,u=mt.client_domain,c=Ns(),h=Fs();let d=new Date(h);d.setDate(h.getDate()+180);const f=d.toGMTString(),g=T(un.default),p=T(ea.default),m=Ai(),w=t;let v=T([]),y=T(""),E=T(""),b=T(""),I=T(""),A=T(""),O=T(""),D=T(""),re=T(""),ee=T(""),Q=T([]),ae=T(0),Y=T([]);const H=T([]);let F=T([]);const J=T(!1);let le=T("");const ye=T(""),oe=T(0),ue=T(!0);let we="";const te=T([]);T(!1),T([]),setTimeout(()=>{e.value&&(n.value=!0)},31e3),De.get(`${l}/${w.postPK.postPK}`).then(ve=>{if(v=ve.data,e.value=!1,y=v.tree.image,E=v.tree.image_link,b=v.tree.tree_number,I=v.tree.name,A=v.tree.sub_number,O.value=v.attr,D=v.image,re=v.image_link,ee=v.content,Q=v.choices,ae.value=v.correct_number,Y.value=v.content_group,H.value=v.word_group,J.value=v.is_first_blank,le=v.updated_at,O.value&&(O.value=="選択肢"&&(i.value=!0),O.value=="穴埋め")){i.value=!1,F.value=[...H.value];let M=!1,G=0;for(let k=0;k<F.value.length;k++)Array.isArray(F.value[k])&&(`${F.value[k]}`==`${F.value[k+1]}`?(F.value[k]=F.value[k][G],G++,M=!0):(M&&(F.value[k]=F.value[k][G]),G=0,M=!1));console.log(F.value);for(let k=F.value.length-1;0<k;k--){let W=Math.floor(Math.random()*(k+1)),ne=F.value[k];F.value[k]=F.value[W],F.value[W]=ne}}console.log(v)}).catch(ve=>{console.error(ve),e.value=!1,o.value=!0});const B=()=>{s.value=!1,r.value=!1,o.value=!1,a.value=!1},xe=async()=>{if(setTimeout(()=>{s.value||(r.value=!0)},35e3),c?we=c:await De.get(`${l}/user/create`).then(ve=>{we=ve.data.temporary_user,document.cookie=`temporary_user=${ve.data.temporary_user}; domain=${u}; path='/'; expires=${f}`}).catch(ve=>{console.error(ve),s.value=!0,o.value=!0}),ye.value)oe.value=Number(ye.value),oe.value==ae.value?ue.value=!0:ue.value=!1;else if(0<te.value.length){let ve=[...te.value];console.log(ve),console.log(H.value),console.log(te.value);let M=0,G="f",k=[];for(let W=0;W<H.value.length;W++)if(console.log("e: "+W+"/"+H.value.length),console.log(ve),console.log(te.value),console.log("t: "+te.value[W]),Array.isArray(H.value[W]))if(`${H.value[W]}`==`${H.value[W-1]}`?M++:(M=0,G="f"),G=="f"&&(G=W),!H.value[W].includes(te.value[W]))ue.value=!1;else{console.log("c"),console.log(te.value[W]),console.log(G+M),console.log(G+H.value[W].indexOf(te.value[W]));let ne=ve[G+H.value[W].indexOf(te.value[W])];console.log(ne),te.value[W]!=ne&&(console.log("t"),console.log(ve[G+H.value[W].indexOf(te.value[W])]),console.log(ve[G+M]),ve[G+H.value[W].indexOf(te.value[W])]=te.value[W],te.value[W]==k[0]?(ve[G+k[1]]=ne,k=[ne,G+k[1]]):(ve[G+M]=ne,k=[ne,G+M]),console.log(k))}else M=0,G="f",H.value[W]!=te.value[W]&&(ue.value=!1);te.value=ve,console.log(te.value),console.log(ue.value)}else{s.value=!0,a.value=!0;return}s.value||await De.post(`${l}/ans/create`,{ans_choice:oe.value,ans_word_group:te.value,post:w.postPK.postPK,temporary_user:we,is_correct:ue.value}).then(ve=>{console.log("投稿作成"),oe.value=0,te.value=[],ue.value?m.push({name:"correctPage"}):ue.value?m.push({name:"home"}):m.push({name:"incorrectPage"})}).catch(ve=>{console.error(ve),s.value=!0,o.value=!0})};return(ve,M)=>(C(),S(Se,null,[N(Nt),N(It,{"is-error":r.value,"error-message":["タイムアウトしました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),N(It,{"is-error":o.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),e.value?(C(),S("div",XP,[N(Yn)])):n.value?(C(),S("div",VP,[N(ai)])):o.value?Ee("",!0):(C(),S("div",HP,[_("div",qP,[ZP,_("span",JP,X(L(le)),1),_("span",QP,[L(re)?(C(),S("img",{key:0,src:`${p.value}${L(re)}`,loading:"lazy"},null,8,eO)):L(D)?(C(),S("img",{key:1,src:L(D),loading:"lazy"},null,8,tO)):L(E)?(C(),S("img",{key:2,src:L(E),loading:"lazy"},null,8,nO)):(C(),S("img",{key:3,src:L(y),loading:"lazy"},null,8,iO)),_("span",sO,[_("span",null,"No. "+X(L(b)),1),_("span",null,X(L(I)),1),rO,_("span",null,X(L(A)),1)]),_("form",{onSubmit:Tr(xe,["prevent"])},[i.value?(C(),S("div",oO,[_("span",null,X(L(ee)),1),_("ul",null,[_("li",null,[Ze(_("input",{"onUpdate:modelValue":M[0]||(M[0]=G=>ye.value=G),type:"radio",name:"ans",value:"0"},null,512),[[wt,ye.value]]),Ie(X(L(Q)[0]),1)]),_("li",null,[Ze(_("input",{"onUpdate:modelValue":M[1]||(M[1]=G=>ye.value=G),type:"radio",name:"ans",value:"1"},null,512),[[wt,ye.value]]),Ie(X(L(Q)[1]),1)]),_("li",null,[L(Q)[2]?Ze((C(),S("input",{key:0,"onUpdate:modelValue":M[2]||(M[2]=G=>ye.value=G),type:"radio",name:"ans",value:"2"},null,512)),[[wt,ye.value]]):Ee("",!0),Ie(X(L(Q)[2]),1)]),_("li",null,[L(Q)[3]?Ze((C(),S("input",{key:0,"onUpdate:modelValue":M[3]||(M[3]=G=>ye.value=G),type:"radio",name:"ans",value:"3"},null,512)),[[wt,ye.value]]):Ee("",!0),Ie(X(L(Q)[3]),1)])])])):(C(),S("div",aO,[_("div",lO,[(C(!0),S(Se,null,Ye(L(Y),(G,k)=>(C(),S("span",{key:k},[J.value&&k!=L(Y).length?(C(),S("span",cO,[Ie(" ("),_("span",uO,X(te.value[k]||""),1),Ie(") ")])):Ee("",!0),_("span",hO,X(G),1),!J.value&&k!=L(Y).length-1?(C(),S("span",dO,[Ie(" ("),_("span",fO,X(te.value[k]||""),1),Ie(") ")])):Ee("",!0)]))),128))]),_("div",gO,[pO,_("ul",null,[N(L(ss),{group:"BLANKS",modelValue:L(F),"onUpdate:modelValue":M[4]||(M[4]=G=>Rt(F)?F.value=G:F=G),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(L(F),(G,k)=>(C(),S("span",{key:k},[_("li",null,X(G),1)]))),128)),(C(!0),S(Se,null,Ye(te.value.length,G=>(C(),S("span",{key:G},mO))),128))]),_:1},8,["modelValue"])])]),_("img",{class:"right-circle",src:`${g.value}circle-right-solid.svg`},null,8,vO),_("div",yO,[bO,_("ol",null,[N(L(ss),{group:"BLANKS",modelValue:te.value,"onUpdate:modelValue":M[5]||(M[5]=G=>te.value=G),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(te.value,(G,k)=>(C(),S("span",{key:k},[_("li",null,X(G),1)]))),128)),(C(!0),S(Se,null,Ye(L(F).length,G=>(C(),S("span",{key:G},wO))),128))]),_:1},8,["modelValue"])])])])),N(Kt,{error:a.value,"error-message":["回答を入力してください。"]},null,8,["error"]),_("button",{onClick:B,type:"submit",class:"btn"},[N(qt,{text:"回答する"})])],32)])])]))],64))}}),CO=Be(xO,[["__scopeId","data-v-f00e9018"]]),SO=Le({__name:"CreateAnswerPage",props:{postPK:{}},setup(t){const e=t;return(n,i)=>(C(),Pn(CO,{postPK:e.postPK},null,8,["postPK"]))}}),Lr=t=>(At("data-v-441a261f"),t=t(),Pt(),t),RO={key:0},TO={key:1},IO={key:2},AO={class:"post"},PO=Lr(()=>_("span",{class:"Q"},"Q.",-1)),OO={class:"updated_at"},kO={class:"grid"},LO=["src"],MO=["src"],DO=["src"],FO=["src"],NO={class:"tree-info"},$O=Lr(()=>_("span",null,"-",-1)),GO={key:0,class:"choices"},zO={key:1,class:"blanks"},WO={class:"blanks-content"},BO={key:0,class:"blank"},UO={class:"answer"},KO={class:"text"},jO={key:1,class:"blank"},YO={class:"answer"},XO={class:"blanks-choices"},VO=Lr(()=>_("span",{class:"label"},"選択肢",-1)),HO=Lr(()=>_("li",null,"　",-1)),qO=[HO],ZO=["src"],JO={class:"blanks-answer-column"},QO=Lr(()=>_("span",{class:"label"},"回答欄",-1)),ek=Lr(()=>_("li",null,"　",-1)),tk=[ek],nk=Le({__name:"UpdateAnswer",props:{answerPK:{}},setup(t){const e=T(!0),n=T(!1),i=T(!0),s=T(!1),r=T(!1),o=T(!1),a=T(!1),l=mt.url,u=mt.client_domain,c=Ns(),h=Fs();let d=new Date(h);d.setDate(h.getDate()+180);const f=d.toGMTString(),g=T(un.default),p=T(ea.default),m=Ai(),w=t;let v=T([]),y=T([]),E=T(""),b=T(""),I=T(""),A=T(""),O=T(""),D=T(""),re=T(""),ee=T(""),Q=T(""),ae=T([]),Y=T(0),H=T([]);const F=T([]);let J=T([]);const le=T(!1);let ye=T("");const oe=T([]),ue=T(""),we=T(0),te=T(!0);let B="";const xe=T([]);De.get(`${l}/ans/${w.answerPK.answerPK}`).then(G=>{if(v.value=G.data,y=v.value.post,e.value=!1,console.log(v.value.post),ue.value=`${v.value.ans_choice}`,we.value=v.value.ans_choice,xe.value=v.value.ans_word_group,E=y.tree.image,b=y.tree.image_link,I=y.tree.tree_number,A=y.tree.name,O=y.tree.sub_number,D.value=y.attr,re=y.image,ee=y.image_link,Q=y.content,ae=y.choices,Y.value=y.correct_number,H.value=y.content_group,F.value=y.word_group,le.value=y.is_first_blank,ye=v.value.updated_at,D.value&&(D.value=="選択肢"&&(i.value=!0),D.value=="穴埋め")){i.value=!1,J.value=[...F.value];let k=!1,W=0;for(let ne=0;ne<J.value.length;ne++)Array.isArray(J.value[ne])&&(`${J.value[ne]}`==`${J.value[ne+1]}`?(J.value[ne]=J.value[ne][W],W++,k=!0):(k&&(J.value[ne]=J.value[ne][W]),W=0,k=!1));console.log(J.value);for(let ne=J.value.length-1;0<ne;ne--){let de=Math.floor(Math.random()*(ne+1)),x=J.value[ne];J.value[ne]=J.value[de],J.value[de]=x}}console.log(y)}).catch(G=>{console.error(G),e.value=!1,o.value=!0}),setTimeout(()=>{e.value&&(n.value=!0)},31e3);const ve=()=>{s.value=!1,r.value=!1,o.value=!1,a.value=!1},M=async()=>{if(setTimeout(()=>{s.value||(r.value=!0)},35e3),c?B=c:await De.get(`${l}/user/create`).then(G=>{B=G.data.temporary_user,document.cookie=`temporary_user=${G.data.temporary_user}; domain=${u}; path='/'; expires=${f}`}).catch(G=>{console.error(G),s.value=!0,o.value=!0}),ue.value||we.value)we.value=Number(ue.value),we.value==Y.value?te.value=!0:te.value=!1;else if(0<xe.value.length){let G=[...xe.value];console.log(G),console.log(F.value),console.log(xe.value);let k=0,W="f",ne=[];for(let de=0;de<F.value.length;de++)if(console.log("e: "+de+"/"+F.value.length),console.log(G),console.log(xe.value),console.log("t: "+xe.value[de]),Array.isArray(F.value[de]))if(`${F.value[de]}`==`${F.value[de-1]}`?k++:(k=0,W="f"),W=="f"&&(W=de),!F.value[de].includes(xe.value[de]))te.value=!1;else{console.log("c"),console.log(xe.value[de]),console.log(W+k),console.log(W+F.value[de].indexOf(xe.value[de]));let x=G[W+F.value[de].indexOf(xe.value[de])];console.log(x),xe.value[de]!=x&&(console.log("t"),console.log(G[W+F.value[de].indexOf(xe.value[de])]),console.log(G[W+k]),G[W+F.value[de].indexOf(xe.value[de])]=xe.value[de],xe.value[de]==ne[0]?(G[W+ne[1]]=x,ne=[x,W+ne[1]]):(G[W+k]=x,ne=[x,W+k]),console.log(ne))}else k=0,W="f",F.value[de]!=xe.value[de]&&(te.value=!1);xe.value=G,console.log(xe.value),console.log(te.value)}else{s.value=!0,a.value=!0;return}s.value||await De.put(`${l}/ans/update/${v.value.id}`,{ans_choice:we.value,ans_word_group:xe.value,post:y.id,temporary_user:B,is_correct:te.value}).then(G=>{console.log("投稿作成"),we.value=0,xe.value=[],te.value?m.push({name:"correctPage"}):te.value?m.push({name:"home"}):m.push({name:"incorrectPage"})}).catch(G=>{console.error(G),s.value=!0,o.value=!0})};return(G,k)=>(C(),S(Se,null,[N(Nt),N(It,{"is-error":r.value,"error-message":["タイムアウトしました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),N(It,{"is-error":o.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),e.value?(C(),S("div",RO,[N(Yn)])):n.value?(C(),S("div",TO,[N(ai)])):o.value?Ee("",!0):(C(),S("div",IO,[_("div",AO,[PO,_("span",OO,X(L(ye)),1),_("span",kO,[L(ee)?(C(),S("img",{key:0,src:`${p.value}${L(ee)}`,loading:"lazy"},null,8,LO)):L(re)?(C(),S("img",{key:1,src:L(re),loading:"lazy"},null,8,MO)):L(b)?(C(),S("img",{key:2,src:L(b),loading:"lazy"},null,8,DO)):(C(),S("img",{key:3,src:L(E),loading:"lazy"},null,8,FO)),_("span",NO,[_("span",null,"No. "+X(L(I)),1),_("span",null,X(L(A)),1),$O,_("span",null,X(L(O)),1)]),_("form",{onSubmit:Tr(M,["prevent"])},[i.value?(C(),S("div",GO,[_("span",null,X(L(Q)),1),_("ul",null,[_("li",null,[Ze(_("input",{"onUpdate:modelValue":k[0]||(k[0]=W=>ue.value=W),type:"radio",name:"ans",value:"0"},null,512),[[wt,ue.value]]),Ie(X(L(ae)[0]),1)]),_("li",null,[Ze(_("input",{"onUpdate:modelValue":k[1]||(k[1]=W=>ue.value=W),type:"radio",name:"ans",value:"1"},null,512),[[wt,ue.value]]),Ie(X(L(ae)[1]),1)]),_("li",null,[L(ae)[2]?Ze((C(),S("input",{key:0,"onUpdate:modelValue":k[2]||(k[2]=W=>ue.value=W),type:"radio",name:"ans",value:"2"},null,512)),[[wt,ue.value]]):Ee("",!0),Ie(X(L(ae)[2]),1)]),_("li",null,[L(ae)[3]?Ze((C(),S("input",{key:0,"onUpdate:modelValue":k[3]||(k[3]=W=>ue.value=W),type:"radio",name:"ans",value:"3"},null,512)),[[wt,ue.value]]):Ee("",!0),Ie(X(L(ae)[3]),1)])])])):(C(),S("div",zO,[_("div",WO,[(C(!0),S(Se,null,Ye(L(H),(W,ne)=>(C(),S("span",{key:ne},[le.value&&ne!=L(H).length?(C(),S("span",BO,[Ie(" ("),_("span",UO,X(xe.value[ne]||""),1),Ie(") ")])):Ee("",!0),_("span",KO,X(W),1),!le.value&&ne!=L(H).length-1?(C(),S("span",jO,[Ie(" ("),_("span",YO,X(xe.value[ne]||""),1),Ie(") ")])):Ee("",!0)]))),128))]),_("div",XO,[VO,_("ul",null,[N(L(ss),{group:"BLANKS",modelValue:oe.value,"onUpdate:modelValue":k[4]||(k[4]=W=>oe.value=W),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(oe.value,(W,ne)=>(C(),S("span",{key:ne},[_("li",null,X(W),1)]))),128)),(C(!0),S(Se,null,Ye(xe.value.length,W=>(C(),S("span",{key:W},qO))),128))]),_:1},8,["modelValue"])])]),_("img",{class:"right-circle",src:`${g.value}circle-right-solid.svg`},null,8,ZO),_("div",JO,[QO,_("ol",null,[N(L(ss),{group:"BLANKS",modelValue:xe.value,"onUpdate:modelValue":k[5]||(k[5]=W=>xe.value=W),tag:"span",class:"blanks-dragg"},{default:at(()=>[(C(!0),S(Se,null,Ye(xe.value,(W,ne)=>(C(),S("span",{key:ne},[_("li",null,X(W),1)]))),128)),(C(!0),S(Se,null,Ye(oe.value.length,W=>(C(),S("span",{key:W},tk))),128))]),_:1},8,["modelValue"])])])])),N(Kt,{error:a.value,"error-message":["回答を入力してください。"]},null,8,["error"]),_("button",{onClick:ve,type:"submit",class:"btn"},[N(qt,{text:"回答する"})])],32)])])]))],64))}}),ik=Be(nk,[["__scopeId","data-v-441a261f"]]),sk=Le({__name:"UpdateAnswerPage",props:{answerPK:{}},setup(t){const e=t;return(n,i)=>(C(),Pn(ik,{answerPK:e.answerPK},null,8,["answerPK"]))}}),rk={},ok={class:"wood-1"};function ak(t,e){return C(),S("span",ok)}const Ta=Be(rk,[["render",ak],["__scopeId","data-v-41bf4d20"]]),lk={},ck={class:"wood-2"};function uk(t,e){return C(),S("span",ck)}const Kr=Be(lk,[["render",uk],["__scopeId","data-v-4e1aa5e7"]]),hk={},dk={class:"wood-3"};function fk(t,e){return C(),S("span",dk)}const Lg=Be(hk,[["render",fk],["__scopeId","data-v-bf826a0a"]]),gk={class:"woods"},pk=Le({__name:"WoodBackground",setup(t){return(e,n)=>(C(),S("div",gk,[N(Ta),N(Kr),N(Kr),N(Ta),N(Kr),N(Lg),N(Kr),N(Ta),N(Kr),N(Ta),N(Lg)]))}}),lv=Be(pk,[["__scopeId","data-v-b4a9fbfc"]]),_k=t=>(At("data-v-b980bddd"),t=t(),Pt(),t),mk=_k(()=>_("span",{class:"text"},"正解",-1)),vk=Le({__name:"CorrectPage",setup(t){const e=Ai();return setTimeout(()=>{e.push({name:"home"})},1500),(n,i)=>(C(),S(Se,null,[N(lv),mk],64))}}),yk=Be(vk,[["__scopeId","data-v-b980bddd"]]),bk=t=>(At("data-v-83c4c976"),t=t(),Pt(),t),Ek=bk(()=>_("span",{class:"text"},"残念",-1)),wk=Le({__name:"IncorrectPage",setup(t){const e=Ai();return setTimeout(()=>{e.push({name:"home"})},1500),(n,i)=>(C(),S(Se,null,[N(lv),Ek],64))}}),xk=Be(wk,[["__scopeId","data-v-83c4c976"]]),Ck=t=>(At("data-v-687d1220"),t=t(),Pt(),t),Sk={key:0},Rk={key:1},Tk={key:2},Ik={key:3},Ak={key:4},Pk={class:"answers"},Ok={class:"answer-list"},kk=["src"],Lk=["src"],Mk=["src"],Dk=["src"],Fk={class:"updated_at"},Nk={class:"tree-list"},$k=Ck(()=>_("span",null,"-",-1)),Gk={key:4,class:"choice-list"},zk={class:"choice-contents"},Wk={key:0},Bk={class:"answer-bar"},Uk={class:"choice-content"},Kk={key:0},jk=["src"],Yk={key:1},Xk=["src"],Vk={key:1},Hk={class:"answer-bar"},qk={class:"choice-content"},Zk={key:0},Jk=["src"],Qk={key:1},eL=["src"],tL={key:2},nL={class:"answer-bar"},iL={class:"choice-content"},sL={key:0},rL=["src"],oL={key:1},aL=["src"],lL={key:3},cL={class:"answer-bar"},uL={class:"choice-content"},hL={key:0},dL=["src"],fL={key:1},gL=["src"],pL={key:5,class:"blanks-list"},_L={key:0},mL={key:0},vL={class:"answer"},yL={key:1},bL={key:0},EL={class:"answer"},wL={key:1},xL=["onClick"],CL={class:"content"},SL={key:1},RL={class:"content"},TL={key:0},IL={class:"answer"},AL={key:1},PL={key:0},OL={class:"answer"},kL={key:1},LL=["onClick"],ML={class:"update-button btn"},DL=["onClick"],FL=["src"],NL=Le({__name:"GetMyAnswer",props:{userPK:{}},setup(t){const e=T([]),n=T(!0),i=T(!1),s=T(!1),r=T([!1]),o=T([]),a=T([]),l=T([]),u=T([]),c=T([]),h=T([]),d=mt.url,f=T(un.default),g=T(ea.default),p=t,m=v=>{e.value[v]=!e.value[v]},w=(v,y)=>{c.value[v][y]==a.value[v].post.word_group[y]||a.value[v].post.word_group[y].includes(c.value[v][y])?(console.log("a"),a.value[v].ans_word_group[y]?c.value[v][y]=a.value[v].ans_word_group[y]:c.value[v][y]="未回答"):(console.log(c.value[v][y]),console.log(a.value[v].post.word_group[y]),Array.isArray(a.value[v].post.word_group[y])?c.value[v][y]=h.value[v][y]:c.value[v][y]=a.value[v].post.word_group[y])};return De.get(`${d}/ans/myanswer`).then(v=>{o.value=v.data,n.value=!1;for(let y=0;y<o.value.length;y++)o.value[y].temporary_user==p.userPK.userPK&&a.value.push(o.value[y]);l.value=a.value.post,console.log(a.value),a.value.length||(r.value[0]=!0);for(let y=0;y<a.value.length;y++){let E=[0,0,0,0],b=0;for(let I=0;I<o.value.length;I++)a.value[y].post.id==o.value[I].post.id&&a.value[y].post.attr=="選択肢"&&(b++,o.value[I].ans_choice==0&&E[0]++,o.value[I].ans_choice==1&&E[1]++,o.value[I].ans_choice==2&&E[2]++,o.value[I].ans_choice==3&&E[3]++);for(let I=0;I<E.length;I++)b&&(E[I]=Math.floor(E[I]/b*100));u.value.push(E)}for(let y=0;y<a.value.length;y++)if(console.log(a.value[y].post.word_group),a.value[y].post.word_group){let E={};for(let b=0;b<a.value[y].post.word_group.length;b++)a.value[y].ans_word_group[b]?E[b]=a.value[y].ans_word_group[b]:E[b]="未回答";c.value.push(E)}else c.value.push("");console.log(c.value);for(let y=0;y<a.value.length;y++)if(h.value.push([]),a.value[y].post.word_group)for(let E=0;E<a.value[y].post.word_group.length;E++)if(Array.isArray(a.value[y].post.word_group[E])){if(`${a.value[y].post.word_group[E]}`!=`${a.value[y].post.word_group[E+1]}`)for(let b=0;b<a.value[y].post.word_group[E].length;b++)h.value[y].push(a.value[y].post.word_group[E][b])}else h.value[y].push(a.value[y].post.word_group[E]);console.log(h.value)}).catch(v=>{n.value=!1,s.value=!0,console.error(v)}),setTimeout(()=>{n.value&&(i.value=!0)},31e3),(v,y)=>{const E=Tn("router-link");return C(),S(Se,null,[N(Nt),_("h2",{style:Et(r.value[0]?"display: none":"display: block;")}," あなたの回答 ",4),n.value?(C(),S("div",Sk,[N(Yn)])):i.value?(C(),S("div",Rk,[N(ai)])):s.value?(C(),S("div",Tk,[N(It,{"is-error":s.value,"error-message":["不明なエラーが発生しました。","時間を空けてから再度お試しください。"]},null,8,["is-error"])])):r.value[0]?(C(),S("div",Ik,[N(nc,{"image-path-s-v-g":"pagelines-brands-solid",text:"あなたの回答がありません。","button-path":"home","button-text":"地図を見る"})])):(C(),S("div",Ak,[_("div",Pk,[(C(!0),S(Se,null,Ye(a.value,(b,I)=>(C(),S("div",{key:b.id},[_("div",Ok,[b.post.image_link?(C(),S("img",{key:0,src:`${g.value}${b.post.image_link}`,class:"answer-img",loading:"lazy"},null,8,kk)):b.post.image?(C(),S("img",{key:1,src:b.post.image,class:"answer-img",loading:"lazy"},null,8,Lk)):b.post.tree.image_link?(C(),S("img",{key:2,src:b.post.tree.image_link,class:"answer-img",loading:"lazy"},null,8,Mk)):(C(),S("img",{key:3,src:b.post.tree.image,class:"answer-img",loading:"lazy"},null,8,Dk)),_("span",Fk,X(b.updated_at),1),_("div",Nk,[_("span",null,"No. "+X(b.post.tree.tree_number),1),_("span",null,X(b.post.tree.name),1),$k,_("span",null,X(b.post.tree.sub_number),1)]),b.post.attr=="選択肢"?(C(),S("div",Gk,[_("span",null,X(b.post.content),1),_("div",zk,[b.post.choices[0]?(C(),S("div",Wk,[_("span",Bk,[_("span",Uk,[_("span",{class:nt(b.ans_choice==0?"max-choice-text choice-text":"choice-text")},[_("span",null,X(b.post.choices[0]),1),_("span",null,X(u.value[I][0])+"%",1)],2),_("span",{class:nt(b.ans_choice==0?b.post.correct_number==0?"correct-result result":"incorrect-result result":"other-result result"),style:Et({width:`${u.value[I][0]}%`})},null,6)]),b.post.correct_number==0?(C(),S("span",Kk,[_("img",{class:"correct",src:`${f.value}circle-check-regular.svg`},null,8,jk)])):b.ans_choice==0?(C(),S("span",Yk,[_("img",{class:nt(b.post.correct_number==0?"correct":"incorrect"),src:b.post.correct_number==0?`${f.value}circle-check-regular.svg`:`${f.value}circle-xmark-regular.svg`},null,10,Xk)])):Ee("",!0)])])):Ee("",!0),b.post.choices[1]?(C(),S("div",Vk,[_("span",Hk,[_("span",qk,[_("span",{class:nt(b.ans_choice==1?"max-choice-text choice-text":"choice-text")},[_("span",null,X(b.post.choices[1]),1),_("span",null,X(u.value[I][1])+"%",1)],2),_("span",{class:nt(b.ans_choice==1?b.post.correct_number==1?"correct-result result":"incorrect-result result":"other-result result"),style:Et({width:`${u.value[I][1]}%`})},null,6)]),b.post.correct_number==1?(C(),S("span",Zk,[_("img",{class:"correct",src:`${f.value}circle-check-regular.svg`},null,8,Jk)])):b.ans_choice==1?(C(),S("span",Qk,[_("img",{class:nt(b.post.correct_number==1?"correct":"incorrect"),src:b.post.correct_number==1?`${f.value}circle-check-regular.svg`:`${f.value}circle-xmark-regular.svg`},null,10,eL)])):Ee("",!0)])])):Ee("",!0),b.post.choices[2]?(C(),S("div",tL,[_("span",nL,[_("span",iL,[_("span",{class:nt(b.ans_choice==2?"max-choice-text choice-text":"choice-text")},[_("span",null,X(b.post.choices[2]),1),_("span",null,X(u.value[I][2])+"%",1)],2),_("span",{class:nt(b.ans_choice==2?b.post.correct_number==2?"correct-result result":"incorrect-result result":"other-result result"),style:Et({width:`${u.value[I][2]}%`})},null,6)]),b.post.correct_number==2?(C(),S("span",sL,[_("img",{class:"correct",src:`${f.value}circle-check-regular.svg`},null,8,rL)])):b.ans_choice==2?(C(),S("span",oL,[_("img",{class:nt(b.post.correct_number==2?"correct":"incorrect"),src:b.post.correct_number==2?`${f.value}circle-check-regular.svg`:`${f.value}circle-xmark-regular.svg`},null,10,aL)])):Ee("",!0)])])):Ee("",!0),b.post.choices[3]?(C(),S("div",lL,[_("span",cL,[_("span",uL,[_("span",{class:nt(b.ans_choice==3?"max-choice-text choice-text":"choice-text")},[_("span",null,X(b.post.choices[3]),1),_("span",null,X(u.value[I][3])+"%",1)],2),_("span",{class:nt(b.ans_choice==3?b.post.correct_number==3?"correct-result result":"incorrect-result result":"other-result result"),style:Et({width:`${u.value[I][3]}%`})},null,6)]),b.post.correct_number==3?(C(),S("span",hL,[_("img",{class:"correct",src:`${f.value}circle-check-regular.svg`},null,8,dL)])):b.ans_choice==3?(C(),S("span",fL,[_("img",{class:nt(b.post.correct_number==3?"correct":"incorrect"),src:b.post.correct_number==3?`${f.value}circle-check-regular.svg`:`${f.value}circle-xmark-regular.svg`},null,10,gL)])):Ee("",!0)])])):Ee("",!0)])])):(C(),S("div",pL,[b.post.is_first_blank?(C(),S("span",_L,[(C(!0),S(Se,null,Ye(b.post.word_group.length,A=>(C(),S("span",null,[b.ans_word_group[A-1]==b.post.word_group[A-1]?(C(),S("span",mL,[_("span",vL,X(b.ans_word_group[A-1]),1)])):(C(),S("span",yL,[Array.isArray(b.post.word_group[A-1])&&b.post.word_group[A-1].includes(b.ans_word_group[A-1])?(C(),S("span",bL,[_("span",EL,X(b.ans_word_group[A-1]),1)])):(C(),S("span",wL,[_("span",{onClick:O=>w(I,A-1),class:"answer-false"},X(c.value[I][A-1]),9,xL)]))])),_("span",CL,X(b.post.content_group[A-1]),1)]))),256))])):(C(),S("span",SL,[(C(!0),S(Se,null,Ye(b.post.content_group.length,A=>(C(),S("span",null,[_("span",RL,X(b.post.content_group[A-1]),1),b.ans_word_group[A-1]==b.post.word_group[A-1]?(C(),S("span",TL,[_("span",IL,X(b.ans_word_group[A-1]),1)])):(C(),S("span",AL,[Array.isArray(b.post.word_group[A-1])&&b.post.word_group[A-1].includes(b.ans_word_group[A-1])?(C(),S("span",PL,[_("span",OL,X(b.ans_word_group[A-1]),1)])):(C(),S("span",kL,[_("span",{onClick:O=>w(I,A-1),class:"answer-false"},X(c.value[I][A-1]),9,LL)]))]))]))),256))]))])),_("button",ML,[N(E,{to:{name:"updateAnswer",params:{answerPK:b.id}},class:"a"},{default:at(()=>[Ie(" 再回答 ")]),_:2},1032,["to"])]),_("button",{onClick:A=>m(I),class:"delete-button btn"},[_("img",{src:`${f.value}trash-can-solid.svg`},null,8,FL)],8,DL),N(Gm,{appear:e.value,"content-p-k":b.id,index:I,contents:a.value,none:r.value,"content-attr":"ans","is-deleted":!0},null,8,["appear","content-p-k","index","contents","none"])])]))),128))])]))],64)}}}),$L=Be(NL,[["__scopeId","data-v-687d1220"]]),GL={class:"inquiry-card"},zL={class:"card-title"},WL=["src"],BL=Le({__name:"InquiryCard",props:{cardTitle:{},cardSvg:{},cardLinkString:{},cardLinkPath:{}},setup(t){const e=t;return(n,i)=>{const s=Tn("router-link");return C(),S("div",GL,[_("div",zL,[_("img",{src:`\\home\\icon\\${e.cardSvg}.svg`,loading:"lazy"},null,8,WL),_("span",null,X(e.cardTitle),1)]),_("span",null,[(C(!0),S(Se,null,Ye(e.cardLinkPath.length,r=>(C(),S("div",{key:r},[N(s,{to:{name:e.cardLinkPath[r-1]}},{default:at(()=>[_("span",null,X(e.cardLinkString[r-1]),1)]),_:2},1032,["to"])]))),128))])])}}}),Hc=Be(BL,[["__scopeId","data-v-3c090993"]]),UL=t=>(At("data-v-f4be4eb8"),t=t(),Pt(),t),KL={class:"inquiry-top"},jL=UL(()=>_("span",{class:"inquiry-title"},"どのようなことでお困りですか？",-1)),YL={class:"inquiry-list"},XL=Le({__name:"InquiryTop",setup(t){return(e,n)=>(C(),S(Se,null,[N(Nt),_("div",KL,[jL,_("div",YL,[N(Hc,{"card-title":"Webサイトの規約","card-svg":"book-solid","card-link-string":["利用規約","プライバシーポリシー"],"card-link-path":["serviceTrems","privacyTrems"]}),N(Hc,{"card-title":"Webサイトについて","card-svg":"circle-info-solid","card-link-string":["オープンソースライブラリ"],"card-link-path":["licenses"]}),N(Hc,{"card-title":"その他のこと","card-svg":"comment-regular","card-link-string":["お問い合わせ"],"card-link-path":["createInquiry"]})])])],64))}}),VL=Be(XL,[["__scopeId","data-v-f4be4eb8"]]),HL=Le({__name:"InquiryTopPage",setup(t){return(e,n)=>(C(),Pn(VL))}}),cv=t=>(At("data-v-c764ca72"),t=t(),Pt(),t),qL={class:"inquiry-form"},ZL=cv(()=>_("label",{for:"email"},"メールアドレス：",-1)),JL=cv(()=>_("button",{type:"submit",class:"btn"},[_("span",null,"問い合わせる")],-1)),QL=Le({__name:"CreateInquiry",setup(t){const e=mt.url,n=Ai(),i=T(""),s=T(""),r=T(!1),o=T(!1),a=T(!1),l=T(!1),u=T(!1),c=T(!1),h=T(!1),d=async()=>{if(!c.value){c.value=!0,r.value=!1,o.value=!1,a.value=!1,l.value=!1,u.value=!1,setTimeout(()=>{c.value&&(c.value=!1,o.value=!0)},35e3);const f=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(i.value||(c.value=!1,a.value=!0),s.value?f.test(s.value)||(c.value=!1,u.value=!0):(c.value=!1,l.value=!0),c.value)try{const g=await De.post(`${e}/inquiry/create`,{text:i.value,email:s.value});console.log("送信に成功しました！"),i.value="",s.value="",n.push({name:"home"}),h.value=!0,c.value=!1}catch(g){r.value=!0,c.value=!1,console.error("投稿の作成に失敗しました:",g);return}}};return(f,g)=>(C(),S(Se,null,[N(Nt),_("div",qL,[N(It,{"is-error":r.value,"error-message":["申し訳ございません。","不明なエラーが発生しました。"]},null,8,["is-error"]),N(It,{"is-error":o.value,"error-message":["申し訳ございません。","タイムアウトしました。"]},null,8,["is-error"]),_("form",{onSubmit:Tr(d,["prevent"])},[Ze(_("textarea",{"onUpdate:modelValue":g[0]||(g[0]=p=>i.value=p),placeholder:"ここにお書きください。"},null,512),[[Cn,i.value]]),N(Kt,{error:a.value,"error-message":["内容を入力してください。"]},null,8,["error"]),_("div",null,[ZL,Ze(_("input",{"onUpdate:modelValue":g[1]||(g[1]=p=>s.value=p),name:"email",type:"email",placeholder:"email@example.com"},null,512),[[Cn,s.value]]),N(Kt,{error:l.value,"error-message":["メールアドレスを入力してください。"]},null,8,["error"]),N(Kt,{error:u.value,"error-message":["メールアドレスの形式にしてください。"]},null,8,["error"])]),JL],32)])],64))}}),eM=Be(QL,[["__scopeId","data-v-c764ca72"]]),tM=Le({__name:"CreateInquiryPage",setup(t){return(e,n)=>(C(),Pn(eM))}}),nM=zo('<div class="trems" data-v-73ae082f><h3 data-v-73ae082f>利用規約</h3><p data-v-73ae082f> この利用規約（以下，「本規約」といいます。）は，本サービスの利用条件を定めるものです。登録ユーザーの皆さま（以下，「ユーザー」といいます。）には，本規約に従って，本サービスをご利用いただきます。 <br data-v-73ae082f><h5 data-v-73ae082f>第1条（適用）</h5><ol data-v-73ae082f><li data-v-73ae082f>本規約は，ユーザーと本サービスとの間の本サービスの利用に関わる一切の関係に適用されるものとします。</li><li data-v-73ae082f>本サービスは本サービスに関し，本規約のほか，ご利用にあたってのルール等，各種の定め（以下，「個別規定」といいます。）をすることがあります。これら個別規定はその名称のいかんに関わらず，本規約の一部を構成するものとします。</li><li data-v-73ae082f>本規約の規定が前条の個別規定の規定と矛盾する場合には，個別規定において特段の定めなき限り，個別規定の規定が優先されるものとします。</li></ol><h5 data-v-73ae082f>第2条（利用登録）</h5><ol data-v-73ae082f><li data-v-73ae082f>本サービスにおいては，登録希望者が本規約に同意の上，本サービスの定める方法によって利用登録を申請し，本サービスがこの承認を登録希望者に通知することによって，利用登録が完了するものとします。</li><li data-v-73ae082f>本サービスは，利用登録の申請者に以下の事由があると判断した場合，利用登録の申請を承認しないことがあり，その理由については一切の開示義務を負わないものとします。</li><ol data-v-73ae082f><li data-v-73ae082f>利用登録の申請に際して虚偽の事項を届け出た場合</li><li data-v-73ae082f>本規約に違反したことがある者からの申請である場合</li><li data-v-73ae082f>英国一般データ保護規制が基準となるイギリスまたはEU加盟国からの登録である場合</li><li data-v-73ae082f>その他，本サービスが利用登録を相当でないと判断した場合</li></ol></ol><h5 data-v-73ae082f>第3条（ユーザーIDおよびパスワードの管理）</h5><ol data-v-73ae082f><li data-v-73ae082f>ユーザーは，自己の責任において，本サービスのユーザーIDおよびパスワードを適切に管理するものとします。</li><li data-v-73ae082f>ユーザーは，いかなる場合にも，ユーザーIDおよびパスワードを第三者に譲渡または貸与し，もしくは第三者と共用することはできません。本サービスは，ユーザーIDとパスワードの組み合わせが登録情報と一致してログインされた場合には，そのユーザーIDを登録しているユーザー自身による利用とみなします。</li><li data-v-73ae082f>ユーザーID及びパスワードが第三者によって使用されたことによって生じた損害は，本サービスは一切の責任を負わないものとします。</li></ol><h5 data-v-73ae082f>第4条（禁止事項）</h5> ユーザーは，本サービスの利用にあたり，以下の行為をしてはなりません。 <ol data-v-73ae082f><li data-v-73ae082f>法令または公序良俗に違反する行為</li><li data-v-73ae082f>犯罪行為に関連する行為</li><li data-v-73ae082f>本サービスや本サービスの他のユーザー，または第三者のサーバーまたはネットワークの機能を破壊したり，妨害したりする行為</li><li data-v-73ae082f>本サービスの運営を妨害するおそれのある行為</li><li data-v-73ae082f>他のユーザーに関する個人情報等を収集または蓄積する行為</li><li data-v-73ae082f>不正アクセスをし，またはこれを試みる行為</li><li data-v-73ae082f>他のユーザーに成りすます行為</li><li data-v-73ae082f>本サービスに関連して，反社会的勢力に対して直接または間接に利益を供与する行為</li><li data-v-73ae082f>本サービス，本サービスの他のユーザーまたは第三者の知的財産権，肖像権，プライバシー，名誉その他の権利または利益を侵害する行為</li><li data-v-73ae082f>以下の表現を含み，または含むと本サービスが判断する内容を本サービス上に投稿し，または送信する行為</li><ol data-v-73ae082f><li data-v-73ae082f>過度に暴力的な表現</li><li data-v-73ae082f>露骨な性的表現</li><li data-v-73ae082f>人種，国籍，信条，性別，社会的身分，門地等による差別につながる表現</li><li data-v-73ae082f>自殺，自傷行為，薬物乱用を誘引または助長する表現</li><li data-v-73ae082f>その他反社会的な内容を含み他人に不快感を与える表現</li></ol><li data-v-73ae082f>以下を目的とし，または目的とすると本サービスが判断する行為</li><ol data-v-73ae082f><li data-v-73ae082f>性行為やわいせつな行為を目的とする行為</li><li data-v-73ae082f>面識のない異性との出会いや交際を目的とする行為</li><li data-v-73ae082f>他のユーザーに対する嫌がらせや誹謗中傷を目的とする行為</li><li data-v-73ae082f>本サービス，本サービスの他のユーザー，または第三者に不利益，損害または不快感を与えることを目的とする行為</li><li data-v-73ae082f>その他本サービスが予定している利用目的と異なる目的で本サービスを利用する行為</li></ol><li data-v-73ae082f>宗教活動または宗教団体への勧誘行為</li><li data-v-73ae082f>その他，本サービスが不適切と判断する行為</li></ol><h5 data-v-73ae082f>第5条（本サービスの提供の停止等）</h5><ol data-v-73ae082f><li data-v-73ae082f>本サービスは，以下のいずれかの事由があると判断した場合，ユーザーに事前に通知することなく本サービスの全部または一部の提供を停止または中断することができるものとします。</li><ol data-v-73ae082f><li data-v-73ae082f>本サービスにかかるコンピュータシステムの保守点検または更新を行う場合</li><li data-v-73ae082f>地震，落雷，火災，停電または天災などの不可抗力により，本サービスの提供が困難となった場合</li><li data-v-73ae082f>コンピュータまたは通信回線等が事故により停止した場合</li><li data-v-73ae082f>その他，本サービスが本サービスの提供が困難と判断した場合</li><li data-v-73ae082f>本サービスは，本サービスの提供の停止または中断により，ユーザーまたは第三者が被ったいかなる不利益または損害についても，一切の責任を負わないものとします。</li></ol></ol><h5 data-v-73ae082f>第6条（著作権）</h5><ol data-v-73ae082f><li data-v-73ae082f>ユーザーは，自ら著作権等の必要な知的財産権を有するか，または必要な権利者の許諾を得た文章等の情報に関してのみ，本サービスを利用し，投稿ないしアップロードすることができるものとします。</li><li data-v-73ae082f>ユーザーが本サービスを利用して投稿ないしアップロードした文章等の著作権については，当該ユーザーその他既存の権利者に留保されるものとします。ただし，本サービスは，本サービスを利用して投稿ないしアップロードされた文章等について，本サービスの改良，品質の向上，または不備の是正等ならびに本サービスの周知宣伝等に必要な範囲で利用できるものとし，ユーザーは，この利用に関して，著作者人格権を行使しないものとします。</li><li data-v-73ae082f>前項本文の定めるものを除き，本サービスおよび本サービスに関連する一切の情報についての著作権およびその他の知的財産権はすべて本サービスまたは本サービスにその利用を許諾した権利者に帰属し，ユーザーは無断で複製，譲渡，貸与，翻訳，改変，転載，公衆送信（送信可能化を含みます。），伝送，配布，出版，営業使用等をしてはならないものとします。</li></ol><h5 data-v-73ae082f>第7条（利用制限および登録抹消）</h5><ol data-v-73ae082f><li data-v-73ae082f>本サービスは，ユーザーが以下のいずれかに該当する場合には，事前の通知なく，投稿データを削除し，ユーザーに対して本サービスの全部もしくは一部の利用を制限しまたはユーザーとしての登録を抹消することができるものとします。</li><ol data-v-73ae082f><li data-v-73ae082f>本規約のいずれかの条項に違反した場合</li><li data-v-73ae082f>登録事項に虚偽の事実があることが判明した場合</li><li data-v-73ae082f>本サービスからの連絡に対し，一定期間返答がない場合</li><li data-v-73ae082f>本サービスについて，最終の利用から一定期間利用がない場合</li><li data-v-73ae082f>その他，本サービスが本サービスの利用を適当でないと判断した場合</li></ol><li data-v-73ae082f>本サービスは，本条に基づき本サービスが行った行為によりユーザーに生じた損害について，一切の責任を負いません。</li></ol><h5 data-v-73ae082f>第8条（退会）</h5> ユーザーは，本サービスの定める退会手続により，本サービスから退会できるものとします。 <br data-v-73ae082f><br data-v-73ae082f><h5 data-v-73ae082f>第9条（保証の否認および免責事項）</h5><ol data-v-73ae082f><li data-v-73ae082f>本サービスは，本サービスに事実上または法律上の瑕疵（安全性，信頼性，正確性，完全性，有効性，特定の目的への適合性，セキュリティなどに関する欠陥，エラーやバグ，権利侵害などを含みます。）がないことを明示的にも黙示的にも保証しておりません。</li><li data-v-73ae082f>本サービスは，本サービスに起因してユーザーに生じたあらゆるトラブルや損害について、一切の責任を負いません。</li><li data-v-73ae082f>本サービスは，本サービスに関して，ユーザーと他のユーザーまたは第三者との間において生じた取引，連絡または紛争等について一切責任を負いません。</li></ol><h5 data-v-73ae082f>第10条（サービス内容の変更等）</h5> 本サービスは，ユーザーへの事前の告知をもって、本サービスの内容を変更、追加または廃止することがあり、ユーザーはこれを承諾するものとします。 <br data-v-73ae082f><br data-v-73ae082f><h5 data-v-73ae082f>第11条（利用規約の変更）</h5><ol data-v-73ae082f><li data-v-73ae082f>本サービスは以下の場合には、ユーザーの個別の同意を要せず、本規約を変更することができるものとします。</li><ol data-v-73ae082f><li data-v-73ae082f>本規約の変更がユーザーの一般の利益に適合するとき。</li><li data-v-73ae082f>本規約の変更が本サービス利用契約の目的に反せず、かつ、変更の必要性、変更後の内容の相当性その他の変更に係る事情に照らして合理的なものであるとき。</li></ol><li data-v-73ae082f>本サービスはユーザーに対し、前項による本規約の変更にあたり、事前に、本規約を変更する旨及び変更後の本規約の内容並びにその効力発生時期を通知します。</li></ol><h5 data-v-73ae082f>第12条（個人情報の取扱い）</h5> 本サービスは，本サービスの利用によって取得する個人情報については，本サービス「個人情報保護方針」に従い適切に取り扱うものとします。 <br data-v-73ae082f><br data-v-73ae082f><h5 data-v-73ae082f>第13条（通知または連絡）</h5> ユーザーと本サービスとの間の通知または連絡は，本サービスの定める方法によって行うものとします。本サービスは，ユーザーから，本サービスが別途定める方式に従った変更届け出がない限り，現在登録されている連絡先が有効なものとみなして当該連絡先へ通知または連絡を行い，これらは，発信時にユーザーへ到達したものとみなします。 <br data-v-73ae082f><br data-v-73ae082f><h5 data-v-73ae082f>第14条（権利義務の譲渡の禁止）</h5> ユーザーは，本サービスの書面による事前の承諾なく，利用契約上の地位または本規約に基づく権利もしくは義務を第三者に譲渡し，または担保に供することはできません。 <br data-v-73ae082f><br data-v-73ae082f><h5 data-v-73ae082f>第15条 (分離可能性)</h5> 本契約の一部の条項が無効、違法または執行不能となった場合においても、その他の条項の有効性、合法性および執行可能性はいかなる意味においても損なわれることはなく、また影響を受けません。 <br data-v-73ae082f><br data-v-73ae082f><h5 data-v-73ae082f>第16条（準拠法・裁判管轄）</h5><ol data-v-73ae082f><li data-v-73ae082f>本規約の解釈にあたっては，日本法を準拠法とします。</li><li data-v-73ae082f>本サービスに関して紛争が生じた場合には，本サービス運営者の所在地を管轄する裁判所を専属的合意管轄とします。</li></ol> 以上 </p></div>',1),iM=Le({__name:"ServiceTremsPage",setup(t){return(e,n)=>(C(),S(Se,null,[N(Nt),nM],64))}}),sM=Be(iM,[["__scopeId","data-v-73ae082f"]]),rM=zo('<div class="trems" data-v-fdcb22fd><h3 data-v-fdcb22fd>個人情報保護方針</h3><p data-v-fdcb22fd> 本サービスにおける，ユーザーの個人情報の取扱いについて，以下のとおり個人情報保護方針（以下，「本ポリシー」といいます。）を定めます。 <br data-v-fdcb22fd><h5 data-v-fdcb22fd>第1条（個人情報）</h5> 「個人情報」とは，個人情報保護法にいう「個人情報」を指すものとし，生存する個人に関する情報であって，当該情報に含まれる氏名，生年月日，住所，電話番号，連絡先その他の記述等により特定の個人を識別できる情報及び容貌，指紋，声紋にかかるデータ，及び健康保険証の保険者番号などの当該情報単体から特定の個人を識別できる情報（個人識別情報）を指します。 <br data-v-fdcb22fd><br data-v-fdcb22fd><h5 data-v-fdcb22fd>第2条（個人情報の収集方法）</h5> 本サービスは，ユーザーが利用登録をする際にメールアドレスなどの個人情報をお尋ねすることがあります。また，ユーザーと提携先などとの間でなされたユーザーの個人情報を含む取引記録や決済に関する情報を，本サービスの提携先（情報提供元，広告主，広告配信先などを含みます。以下，｢提携先｣といいます。）などから収集することがあります。 <br data-v-fdcb22fd><br data-v-fdcb22fd><h5 data-v-fdcb22fd>第3条（個人情報を収集・利用する目的）</h5> 本サービスが個人情報を収集・利用する目的は，以下のとおりです。 <ol data-v-fdcb22fd><li data-v-fdcb22fd>本サービスの提供・運営のため</li><li data-v-fdcb22fd>ユーザーからのお問い合わせに回答するため（本人確認を行うことを含む）</li><li data-v-fdcb22fd>ユーザーが利用中のサービスの新機能，更新情報等及び本サービスが提供する他のサービスの案内のメールを送付するため</li><li data-v-fdcb22fd>メンテナンス，重要なお知らせなど必要に応じたご連絡のため</li><li data-v-fdcb22fd>利用規約に違反したユーザーや，不正・不当な目的でサービスを利用しようとするユーザーの特定をし，ご利用をお断りするため</li><li data-v-fdcb22fd>ユーザーにご自身の登録情報の閲覧や変更，削除，ご利用状況の閲覧を行っていただくため</li><li data-v-fdcb22fd>上記の利用目的に付随する目的</li></ol><h5 data-v-fdcb22fd>第4条（利用目的の変更）</h5> 本サービスは，利用目的が変更前と関連性を有すると合理的に認められる場合に限り，個人情報の利用目的を変更するものとします。 利用目的の変更を行った場合には，変更後の目的について，所定の方法により，ユーザーに通知し，または本ウェブサイト上に公表するものとします。 <br data-v-fdcb22fd><br data-v-fdcb22fd><h5 data-v-fdcb22fd>第5条（個人情報の第三者提供）</h5><ol data-v-fdcb22fd><li data-v-fdcb22fd>本サービスは，次に掲げる場合を除いて，あらかじめユーザーの同意を得ることなく，第三者に個人情報を提供することはありません。ただし，個人情報保護法その他の法令で認められる場合を除きます。</li><ol data-v-fdcb22fd><li data-v-fdcb22fd>人の生命，身体または財産の保護のために必要がある場合であって，本人の同意を得ることが困難であるとき</li><li data-v-fdcb22fd>公衆衛生の向上または児童の健全な育成の推進のために特に必要がある場合であって，本人の同意を得ることが困難であるとき</li><li data-v-fdcb22fd>国の機関もしくは地方公共団体またはその委託を受けた者が法令の定める事務を遂行することに対して協力する必要がある場合であって，本人の同意を得ることにより当該事務の遂行に支障を及ぼすおそれがあるとき</li><li data-v-fdcb22fd>予め次の事項を告知あるいは公表し，かつ本サービスが個人情報保護委員会に届出をしたとき</li><ol data-v-fdcb22fd><li data-v-fdcb22fd>利用目的に第三者への提供を含むこと</li><li data-v-fdcb22fd>第三者に提供されるデータの項目</li><li data-v-fdcb22fd>第三者への提供の手段または方法</li><li data-v-fdcb22fd>本人の求めに応じて個人情報の第三者への提供を停止すること</li><li data-v-fdcb22fd>本人の求めを受け付ける方法</li></ol></ol><li data-v-fdcb22fd>前項の定めにかかわらず，次に掲げる場合には，当該情報の提供先は第三者に該当しないものとします。</li><ol data-v-fdcb22fd><li data-v-fdcb22fd>本サービスが利用目的の達成に必要な範囲内において個人情報の取扱いの全部または一部を委託する場合</li><li data-v-fdcb22fd>合併その他の事由による事業の承継に伴って個人情報が提供される場合</li></ol></ol><h5 data-v-fdcb22fd>第6条（個人情報の開示）</h5><ol data-v-fdcb22fd><li data-v-fdcb22fd>本サービスは，本人から個人情報の開示を求められたときは，本人に対し，遅滞なくこれを開示します。ただし，開示することにより次のいずれかに該当する場合は，その全部または一部を開示しないこともあり，開示しない決定をした場合には，その旨を遅滞なく通知します。</li><ol data-v-fdcb22fd><li data-v-fdcb22fd>本人または第三者の生命，身体，財産その他の権利利益を害するおそれがある場合</li><li data-v-fdcb22fd>本サービスの業務の適正な実施に著しい支障を及ぼすおそれがある場合</li><li data-v-fdcb22fd>その他法令に違反することとなる場合</li></ol><li data-v-fdcb22fd>前項の定めにかかわらず，履歴情報および特性情報などの個人情報以外の情報については，原則として開示いたしません。</li></ol><h5 data-v-fdcb22fd>第7条（個人情報の訂正および削除）</h5><ol data-v-fdcb22fd><li data-v-fdcb22fd>ユーザーは，本サービスの保有する自己の個人情報が誤った情報である場合には，本サービスが定める手続きにより，本サービスに対して個人情報の訂正，追加または削除（以下，「訂正等」といいます。）を請求することができます。</li><li data-v-fdcb22fd>本サービスは，ユーザーから前項の請求を受けてその請求に応じる必要があると判断した場合には，遅滞なく，当該個人情報の訂正等を行うものとします。</li><li data-v-fdcb22fd>本サービスは，前項の規定に基づき訂正等を行った場合，または訂正等を行わない旨の決定をしたときは遅滞なく，これをユーザーに通知します。</li></ol><h5 data-v-fdcb22fd>第8条（個人情報の利用停止等）</h5><ol data-v-fdcb22fd><li data-v-fdcb22fd>本サービスは，本人から，個人情報が，利用目的の範囲を超えて取り扱われているという理由，または不正の手段により取得されたものであるという理由により，その利用の停止または消去（以下，「利用停止等」といいます。）を求められた場合には，遅滞なく必要な調査を行います。</li><li data-v-fdcb22fd>前項の調査結果に基づき，その請求に応じる必要があると判断した場合には，遅滞なく，当該個人情報の利用停止等を行います。</li><li data-v-fdcb22fd>本サービスは，前項の規定に基づき利用停止等を行った場合，または利用停止等を行わない旨の決定をしたときは，遅滞なく，これをユーザーに通知します。</li><li data-v-fdcb22fd>前2項にかかわらず，利用停止等に多額の費用を有する場合その他利用停止等を行うことが困難な場合であって，ユーザーの権利利益を保護するために必要なこれに代わるべき措置をとれる場合は，この代替策を講じるものとします。</li></ol><h5 data-v-fdcb22fd>第9条（プライバシーポリシーの変更）</h5><ol data-v-fdcb22fd><li data-v-fdcb22fd>本ポリシーの内容は，法令その他本ポリシーに別段の定めのある事項を除いて，ユーザーに通知することなく，変更することができるものとします。</li><li data-v-fdcb22fd>本サービスが別途定める場合を除いて，変更後のプライバシーポリシーは，本ウェブサイトに掲載したときから効力を生じるものとします。</li></ol> 以上 </p></div>',1),oM=Le({__name:"PrivacyTremsPage",setup(t){return(e,n)=>(C(),S(Se,null,[N(Nt),rM],64))}}),aM=Be(oM,[["__scopeId","data-v-fdcb22fd"]]),lM=zo(`<div class="licenses" data-v-ccf1a0ff><h1 data-v-ccf1a0ff>ライセンス表記</h1><h2 data-v-ccf1a0ff>axios</h2><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス:</strong> MIT License</p><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>著作権表示:</strong></p><pre data-v-ccf1a0ff>        Copyright (c) 2014-present Matt Zabriskie &amp; Collaborators
        </pre><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス条文:</strong> <a href="https://opensource.org/license/mit" target="_blank" data-v-ccf1a0ff>MIT License</a></p><h2 data-v-ccf1a0ff>uuid</h2><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス:</strong> MIT License</p><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>著作権表示:</strong></p><pre data-v-ccf1a0ff>        Copyright (c) 2010-2020 Robert Kieffer and other contributors
        </pre><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス条文:</strong> <a href="https://opensource.org/license/mit" target="_blank" data-v-ccf1a0ff>MIT License</a></p><h2 data-v-ccf1a0ff>vue</h2><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス:</strong> MIT License</p><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>著作権表示:</strong></p><pre data-v-ccf1a0ff>        Copyright (c) 2013-present, Yuxi (Evan) You
        </pre><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス条文:</strong> <a href="https://opensource.org/license/mit" target="_blank" data-v-ccf1a0ff>MIT License</a></p><h3 data-v-ccf1a0ff>MIT License</h3><pre data-v-ccf1a0ff>        &lt;
        Copyright &lt;YEAR&gt; &lt;COPYRIGHT HOLDER&gt;

        Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

        The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

        THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
        &gt;
        </pre><h2 data-v-ccf1a0ff>Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com</h2><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス:</strong> https://fontawesome.com/license/free</p><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>著作権表示:</strong></p><pre data-v-ccf1a0ff>        Copyright 2025 Fonticons, Inc.
        </pre><h2 data-v-ccf1a0ff>ol</h2><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス:</strong> BSD-2-Clause License</p><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>著作権表示:</strong></p><pre data-v-ccf1a0ff>        Copyright 2005-present, OpenLayers Contributors All rights reserved.
        </pre><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス条文:</strong> <a href="https://opensource.org/license/bsd-2-clause" target="_blank" data-v-ccf1a0ff>BSD-2-Clause License</a></p><h3 data-v-ccf1a0ff>BSD-2-Clause License</h3><pre data-v-ccf1a0ff>        &lt;
        Copyright &lt;YEAR&gt; &lt;COPYRIGHT HOLDER&gt;

        Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

        1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

        2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
        &gt;
        </pre><h2 data-v-ccf1a0ff>TypeScript</h2><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス:</strong> Apache License 2.0</p><p data-v-ccf1a0ff><strong data-v-ccf1a0ff>ライセンス条文:</strong> <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" data-v-ccf1a0ff>Apache License 2.0</a></p><h3 data-v-ccf1a0ff>Apache License 2.0</h3><pre data-v-ccf1a0ff>        &lt;
        Apache License
        Version 2.0, January 2004
        http://www.apache.org/licenses/

        TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

        1. Definitions.

        &quot;License&quot; shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document.

        &quot;Licensor&quot; shall mean the copyright owner or entity authorized by the copyright owner that is granting the License.

        &quot;Legal Entity&quot; shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, &quot;control&quot; means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity.

        &quot;You&quot; (or &quot;Your&quot;) shall mean an individual or Legal Entity exercising permissions granted by this License.

        &quot;Source&quot; form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files.

        &quot;Object&quot; form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types.

        &quot;Work&quot; shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below).

        &quot;Derivative Works&quot; shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof.

        &quot;Contribution&quot; shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, &quot;submitted&quot; means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as &quot;Not a Contribution.&quot;

        &quot;Contributor&quot; shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work.

        2. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form.

        3. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed.

        4. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions:

        You must give any other recipients of the Work or Derivative Works a copy of this License; and
        You must cause any modified files to carry prominent notices stating that You changed the files; and
        You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and
        If the Work includes a &quot;NOTICE&quot; text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License.
        You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License.

        5. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions.

        6. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file.

        7. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License.

        8. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages.

        9. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability.

        END OF TERMS AND CONDITIONS
        &gt;
        </pre></div>`,1),cM=Le({__name:"OpenSourceLibraryPage",setup(t){return(e,n)=>(C(),S(Se,null,[N(Nt),lM],64))}}),uM=Be(cM,[["__scopeId","data-v-ccf1a0ff"]]),hM={};function dM(t,e){return C(),S("h1",null,"404")}const fM=Be(hM,[["render",dM]]),ed=t=>(At("data-v-70e7cfea"),t=t(),Pt(),t),gM=ed(()=>_("h2",null,"樹木ウォッチングリスト",-1)),pM={key:0},_M={key:1},mM={key:2},vM={class:"tree-list"},yM={class:"tree-image"},bM=["src"],EM=["src"],wM={class:"tree-text"},xM={class:"tree-name"},CM={class:"btn"},SM=ed(()=>_("span",null,"コ",-1)),RM={key:0},TM=ed(()=>_("span",null,"樹木が登録されていません。",-1)),IM=[TM],AM=Le({__name:"SecretTreeList",setup(t){let e=T([]),n=T([]),i=T([]),s=T(!0);const r=T(!1),o=T(!1),a=mt.url;return De.get(`${a}/home`).then(l=>{e.value=l.data[0].trees,n.value=l.data[0].posts,s.value=!1,console.log(e.value);for(let u=0;u<e.value.length;u++){i.value.push(0);for(let c=0;c<n.value.length;c++)e.value[u].id==n.value[c].tree&&i.value[u]++;i.value[u]=String(i.value[u])}}).catch(l=>{console.error(l),s.value=!1,o.value=!0}),setTimeout(()=>{s.value&&(r.value=!0)},31e3),(l,u)=>{const c=Tn("router-link");return C(),S(Se,null,[N(Nt),gM,N(It,{"is-error":o.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),L(s)?(C(),S("div",pM,[N(Yn)])):!o.value&&r.value?(C(),S("div",_M,[N(ai)])):(C(),S("div",mM,[_("div",vM,[(C(!0),S(Se,null,Ye(L(e),(h,d)=>(C(),S("div",{key:h.id,class:"tree"},[N(c,{to:{name:"treePost",params:{treePK:`${h.id}`}}},{default:at(()=>[_("div",yM,[h.image_link?(C(),S("img",{key:0,src:h.image_link,loading:"lazy"},null,8,bM)):(C(),S("img",{key:1,src:h.image,loading:"lazy"},null,8,EM))]),_("div",wM,[_("span",null,"No. "+X(h.tree_number),1),_("span",null,[_("span",xM,X(h.name),1),_("span",null,"-"+X(h.sub_number),1)]),_("button",CM,[N(qt,{text:"リストを見る"})]),_("span",null,[Ie("投稿数: "),_("span",null,X(L(i)[d]),1),SM])])]),_:2},1032,["to"])]))),128)),!o.value&&!L(e).length?(C(),S("div",RM,IM)):Ee("",!0)])]))],64)}}}),PM=Be(AM,[["__scopeId","data-v-70e7cfea"]]),td=t=>(At("data-v-d4af5029"),t=t(),Pt(),t),OM=td(()=>_("h2",null,"樹木ウォッチングリスト",-1)),kM={key:0},LM={key:1},MM={key:2},DM={class:"tree-list"},FM={class:"tree-image"},NM=["src"],$M=["src"],GM={class:"tree-text"},zM={class:"tree-name"},WM={class:"btn"},BM=td(()=>_("span",null,"コ",-1)),UM={key:0},KM=td(()=>_("span",null,"樹木が登録されていません。",-1)),jM=[KM],YM=Le({__name:"SecretTreeListLastYear",setup(t){let e=T([]),n=T([]),i=T([]),s=T(!0);const r=T(!1),o=T(!1),a=mt.url;return De.get(`${a}/last-year/tree/post`).then(l=>{e.value=l.data[0].trees,n.value=l.data[0].posts,s.value=!1,console.log(e.value);for(let u=0;u<e.value.length;u++){i.value.push(0);for(let c=0;c<n.value.length;c++)e.value[u].id==n.value[c].tree&&i.value[u]++;i.value[u]=String(i.value[u])}}).catch(l=>{console.error(l),s.value=!1,o.value=!0}),setTimeout(()=>{s.value&&(r.value=!0)},31e3),(l,u)=>{const c=Tn("router-link");return C(),S(Se,null,[N(Nt),OM,N(It,{"is-error":o.value,"error-message":["不明なエラーが発生しました。","時間をあけてから再度お試しください。"]},null,8,["is-error"]),L(s)?(C(),S("div",kM,[N(Yn)])):!o.value&&r.value?(C(),S("div",LM,[N(ai)])):(C(),S("div",MM,[_("div",DM,[(C(!0),S(Se,null,Ye(L(e),(h,d)=>(C(),S("div",{key:h.id,class:"tree"},[N(c,{to:{name:"treePostLastYear",params:{treePK:`${h.id}`}}},{default:at(()=>[_("div",FM,[h.image_link?(C(),S("img",{key:0,src:h.image_link,loading:"lazy"},null,8,NM)):(C(),S("img",{key:1,src:h.image,loading:"lazy"},null,8,$M))]),_("div",GM,[_("span",null,"No. "+X(h.tree_number),1),_("span",null,[_("span",zM,X(h.name),1),_("span",null,"-"+X(h.sub_number),1)]),_("button",WM,[N(qt,{text:"リストを見る"})]),_("span",null,[Ie("投稿数: "),_("span",null,X(L(i)[d]),1),BM])])]),_:2},1032,["to"])]))),128)),!o.value&&!L(e).length?(C(),S("div",UM,jM)):Ee("",!0)])]))],64)}}}),XM=Be(YM,[["__scopeId","data-v-d4af5029"]]),VM=Le({__name:"SecretTreeListLastYearPage",setup(t){return(e,n)=>(C(),Pn(XM))}}),HM={key:0},qM={key:0},ZM={key:1},JM={key:2},QM={key:3},eD={key:4},tD={class:"post"},nD=Le({__name:"GetLastYearTreePost",props:{treePK:{}},setup(t){let e=T([]),n=T([]),i=T([]),s=T([]);T(!1);const r=T(!0),o=T(!1),a=T(!1),l=T([!1]),u=mt.url;T(un.default);const c=t;console.log(c);let h=[];const d=["or","and","か","か、","と","と、","や","や、","とか","とか、","だとか","だとか、","だったり","だったり、","であったり","であったり、","または","または、","又は","又は、","かつ","かつ、","且つ","且つ、","および","および、","及び","及び、","ならびに","ならびに、","並びに","並びに、","もしくは","もしくは、","若しくは","若しくは、","かもしくは","かもしくは、","か若しくは","か若しくは、","ないし","ないし、","乃至","乃至、","ないしは","ないしは、","乃至は","乃至は、","ないしも","ないしも、","乃至も","乃至も、","あるいは","あるいは、","或いは","或いは、","かあるいは","かあるいは、","か或いは","か或いは、","か、あるいは","か、あるいは、","か、或いは","か、或いは、","あるいはまた","あるいはまた、","或いはまた","或いはまた、","あるいは、また","あるいは、また、","或いは、また","或いは、また、","とも","とも、","はたまた","はたまた、","将又","将又、","、","・",",","/"];return T(""),De.get(`${u}/post/tree/last-year/${c.treePK.treePK}`).then(f=>{if(e.value=f.data[0].posts,r.value=!1,!e.value.length){l.value[0]=!0,console.log(l.value[0]);return}h=f.data[0].answers;for(let g=0;g<e.value.length;g++){let p=[0,0,0,0],m=0,w=0,v=0;for(let y=0;y<h.length;y++)e.value[g].id==h[y].post&&(e.value[g].attr=="選択肢"?(m++,h[y].ans_choice==0&&p[0]++,h[y].ans_choice==1&&p[1]++,h[y].ans_choice==2&&p[2]++,h[y].ans_choice==3&&p[3]++):(v++,h[y].is_correct&&w++),console.log(p));i.value.push(Math.floor(w/v*100));for(let y=0;y<p.length;y++)m&&(p[y]=Math.floor(p[y]/m*100));console.log(p),n.value.push(p)}console.log(n.value);for(let g=0;g<e.value.length;g++){s.value.push([]);let p=0;if(e.value[g].attr=="穴埋め")for(let m=0;m<e.value[g].word_group.length;m++)console.log(e.value[g].word_group[m]),console.log(e.value[g].word_group[m+1]),!e.value[g].is_first_blank&&d.includes(e.value[g].content_group[m])||d.includes(e.value[g].content_group[m+1])||e.value[g].is_first_blank&&d.includes(e.value[g].content_group[m-1])||d.includes(e.value[g].content_group[m])?(p!=null&&s.value[g].push(p),p++,`${e.value[g].word_group[m]}`!=`${e.value[g].word_group[m+1]}`&&(p=0)):(p=0,s.value[g].push(""))}console.log(s)}).catch(f=>{r.value=!1,a.value=!0,console.error(f)}),setTimeout(()=>{r.value&&(o.value=!0)},31e3),(f,g)=>(C(),S(Se,null,[N(Nt),l.value[0]?Ee("",!0):(C(),S("h2",HM," 樹木"+X(L(e)[0].tree.tree_number)+"の投稿 ",1)),_("div",null,[r.value?(C(),S("div",qM,[N(Yn)])):o.value?(C(),S("div",ZM,[N(ai)])):a.value?(C(),S("div",JM,[N(It,{"is-error":a.value,"error-message":["不明なエラーが発生しました。","時間を空けてから再度お試しください。"]},null,8,["is-error"])])):l.value[0]?(C(),S("div",QM,[N(nc,{"image-path-s-v-g":"pagelines-brands-solid",text:"この木の投稿がありません。","button-path":"treeList","button-text":"投稿する"})])):(C(),S("div",eD,[_("div",tD,[(C(!0),S(Se,null,Ye(L(e),(p,m)=>(C(),S("div",{key:p.id},[N(ov,{posts:p},null,8,["posts"])]))),128))])]))])],64))}}),iD=Be(nD,[["__scopeId","data-v-bd45bec8"]]),sD=Le({__name:"GetLastYearTreePostPage",props:{treePK:{}},setup(t){return(e,n)=>(C(),Pn(iD,{treePK:e.treePK},null,8,["treePK"]))}}),uv=H1({history:x1("/home/"),routes:[{path:"/",name:"home",component:KR},{path:"/mypost/:userPK",name:"mypost",component:bI,props:t=>({userPK:t.params})},{path:"/post/tree/:treePK",name:"treePost",component:wA,props:t=>({treePK:t.params})},{path:"/tree/list",name:"treeList",component:GA},{path:"/post/create/:treePK",name:"createPost",component:SP,props:t=>({treePK:t.params})},{path:"/post/update/:postPK",name:"updatePost",component:YP,props:t=>({postPK:t.params})},{path:"/ans/create/:postPK",name:"createAnswer",component:SO,props:t=>({postPK:t.params})},{path:"/ans/update/:answerPK",name:"updateAnswer",component:sk,props:t=>({answerPK:t.params})},{path:"/ans/correct",name:"correctPage",component:yk},{path:"/ans/incorrect",name:"incorrectPage",component:xk},{path:"/ans/myanswer/:userPK",name:"myanswer",component:$L,props:t=>({userPK:t.params})},{path:"/inquiry",name:"inquiry",component:HL},{path:"/inquiry/create",name:"createInquiry",component:tM},{path:"/trems/service",name:"serviceTrems",component:sM},{path:"/trems/privacy",name:"privacyTrems",component:aM},{path:"/licenses",name:"licenses",component:uM},{path:"/404",name:"404",component:fM},{path:"/:pathMatch(.*)*",redirect:"/404"},{path:"/secret/tree/list",name:"secretTreeList",component:PM},{path:"/secret/tree/list/last-year",name:"secretTreeListLastYear",component:VM},{path:"/post/tree/last-year/:treePK",name:"treePostLastYear",component:sD,props:t=>({treePK:t.params})}]});uv.beforeEach((t,e,n)=>{t.path==="/"?document.body.style.overflow="hidden":document.body.style.overflow="",n()});const hv=G0(j0);hv.use(uv);hv.mount("#app");
